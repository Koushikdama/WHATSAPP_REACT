function AN(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function iT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var oT={exports:{}},Md={},aT={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xl=Symbol.for("react.element"),PN=Symbol.for("react.portal"),RN=Symbol.for("react.fragment"),jN=Symbol.for("react.strict_mode"),DN=Symbol.for("react.profiler"),MN=Symbol.for("react.provider"),VN=Symbol.for("react.context"),ON=Symbol.for("react.forward_ref"),LN=Symbol.for("react.suspense"),FN=Symbol.for("react.memo"),UN=Symbol.for("react.lazy"),z0=Symbol.iterator;function BN(t){return t===null||typeof t!="object"?null:(t=z0&&t[z0]||t["@@iterator"],typeof t=="function"?t:null)}var lT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cT=Object.assign,uT={};function Qo(t,e,n){this.props=t,this.context=e,this.refs=uT,this.updater=n||lT}Qo.prototype.isReactComponent={};Qo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Qo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dT(){}dT.prototype=Qo.prototype;function mg(t,e,n){this.props=t,this.context=e,this.refs=uT,this.updater=n||lT}var gg=mg.prototype=new dT;gg.constructor=mg;cT(gg,Qo.prototype);gg.isPureReactComponent=!0;var $0=Array.isArray,hT=Object.prototype.hasOwnProperty,yg={current:null},fT={key:!0,ref:!0,__self:!0,__source:!0};function pT(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)hT.call(e,r)&&!fT.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),d=0;d<a;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Xl,type:t,key:i,ref:o,props:s,_owner:yg.current}}function zN(t,e){return{$$typeof:Xl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function vg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xl}function $N(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var W0=/\/+/g;function nf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$N(""+t.key):e.toString(36)}function pu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Xl:case PN:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+nf(o,0):r,$0(s)?(n="",t!=null&&(n=t.replace(W0,"$&/")+"/"),pu(s,e,n,"",function(d){return d})):s!=null&&(vg(s)&&(s=zN(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(W0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",$0(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+nf(i,a);o+=pu(i,e,n,c,s)}else if(c=BN(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+nf(i,a++),o+=pu(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Fc(t,e,n){if(t==null)return t;var r=[],s=0;return pu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function WN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ht={current:null},mu={transition:null},HN={ReactCurrentDispatcher:Ht,ReactCurrentBatchConfig:mu,ReactCurrentOwner:yg};function mT(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Fc,forEach:function(t,e,n){Fc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Fc(t,function(){e++}),e},toArray:function(t){return Fc(t,function(e){return e})||[]},only:function(t){if(!vg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=Qo;me.Fragment=RN;me.Profiler=DN;me.PureComponent=mg;me.StrictMode=jN;me.Suspense=LN;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HN;me.act=mT;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=cT({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=yg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)hT.call(e,c)&&!fT.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var d=0;d<c;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:Xl,type:t.type,key:s,ref:i,props:r,_owner:o}};me.createContext=function(t){return t={$$typeof:VN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:MN,_context:t},t.Consumer=t};me.createElement=pT;me.createFactory=function(t){var e=pT.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:ON,render:t}};me.isValidElement=vg;me.lazy=function(t){return{$$typeof:UN,_payload:{_status:-1,_result:t},_init:WN}};me.memo=function(t,e){return{$$typeof:FN,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=mu.transition;mu.transition={};try{t()}finally{mu.transition=e}};me.unstable_act=mT;me.useCallback=function(t,e){return Ht.current.useCallback(t,e)};me.useContext=function(t){return Ht.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return Ht.current.useDeferredValue(t)};me.useEffect=function(t,e){return Ht.current.useEffect(t,e)};me.useId=function(){return Ht.current.useId()};me.useImperativeHandle=function(t,e,n){return Ht.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return Ht.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return Ht.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return Ht.current.useMemo(t,e)};me.useReducer=function(t,e,n){return Ht.current.useReducer(t,e,n)};me.useRef=function(t){return Ht.current.useRef(t)};me.useState=function(t){return Ht.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return Ht.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return Ht.current.useTransition()};me.version="18.3.1";aT.exports=me;var b=aT.exports;const Vd=iT(b),qN=AN({__proto__:null,default:Vd},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KN=b,GN=Symbol.for("react.element"),QN=Symbol.for("react.fragment"),YN=Object.prototype.hasOwnProperty,XN=KN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,JN={key:!0,ref:!0,__self:!0,__source:!0};function gT(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)YN.call(e,r)&&!JN.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:GN,type:t,key:i,ref:o,props:s,_owner:XN.current}}Md.Fragment=QN;Md.jsx=gT;Md.jsxs=gT;oT.exports=Md;var l=oT.exports,pp={},yT={exports:{}},gn={},vT={exports:{}},wT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,W){var q=U.length;U.push(W);e:for(;0<q;){var ce=q-1>>>1,he=U[ce];if(0<s(he,W))U[ce]=W,U[q]=he,q=ce;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var W=U[0],q=U.pop();if(q!==W){U[0]=q;e:for(var ce=0,he=U.length,Ce=he>>>1;ce<Ce;){var ne=2*(ce+1)-1,Se=U[ne],pe=ne+1,Ie=U[pe];if(0>s(Se,q))pe<he&&0>s(Ie,Se)?(U[ce]=Ie,U[pe]=q,ce=pe):(U[ce]=Se,U[ne]=q,ce=ne);else if(pe<he&&0>s(Ie,q))U[ce]=Ie,U[pe]=q,ce=pe;else break e}}return W}function s(U,W){var q=U.sortIndex-W.sortIndex;return q!==0?q:U.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],d=[],h=1,f=null,p=3,g=!1,w=!1,T=!1,C=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(U){for(var W=n(d);W!==null;){if(W.callback===null)r(d);else if(W.startTime<=U)r(d),W.sortIndex=W.expirationTime,e(c,W);else break;W=n(d)}}function R(U){if(T=!1,x(U),!w)if(n(c)!==null)w=!0,Ee(D);else{var W=n(d);W!==null&&Z(R,W.startTime-U)}}function D(U,W){w=!1,T&&(T=!1,_(E),E=-1),g=!0;var q=p;try{for(x(W),f=n(c);f!==null&&(!(f.expirationTime>W)||U&&!P());){var ce=f.callback;if(typeof ce=="function"){f.callback=null,p=f.priorityLevel;var he=ce(f.expirationTime<=W);W=t.unstable_now(),typeof he=="function"?f.callback=he:f===n(c)&&r(c),x(W)}else r(c);f=n(c)}if(f!==null)var Ce=!0;else{var ne=n(d);ne!==null&&Z(R,ne.startTime-W),Ce=!1}return Ce}finally{f=null,p=q,g=!1}}var V=!1,S=null,E=-1,N=5,I=-1;function P(){return!(t.unstable_now()-I<N)}function j(){if(S!==null){var U=t.unstable_now();I=U;var W=!0;try{W=S(!0,U)}finally{W?A():(V=!1,S=null)}}else V=!1}var A;if(typeof v=="function")A=function(){v(j)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,H=ee.port2;ee.port1.onmessage=j,A=function(){H.postMessage(null)}}else A=function(){C(j,0)};function Ee(U){S=U,V||(V=!0,A())}function Z(U,W){E=C(function(){U(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){w||g||(w=!0,Ee(D))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(U){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var q=p;p=W;try{return U()}finally{p=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,W){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var q=p;p=U;try{return W()}finally{p=q}},t.unstable_scheduleCallback=function(U,W,q){var ce=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?ce+q:ce):q=ce,U){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=q+he,U={id:h++,callback:W,priorityLevel:U,startTime:q,expirationTime:he,sortIndex:-1},q>ce?(U.sortIndex=q,e(d,U),n(c)===null&&U===n(d)&&(T?(_(E),E=-1):T=!0,Z(R,q-ce))):(U.sortIndex=he,e(c,U),w||g||(w=!0,Ee(D))),U},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(U){var W=p;return function(){var q=p;p=W;try{return U.apply(this,arguments)}finally{p=q}}}})(wT);vT.exports=wT;var ZN=vT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eA=b,fn=ZN;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xT=new Set,fl={};function ji(t,e){ko(t,e),ko(t+"Capture",e)}function ko(t,e){for(fl[t]=e,t=0;t<e.length;t++)xT.add(e[t])}var jr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mp=Object.prototype.hasOwnProperty,tA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,H0={},q0={};function nA(t){return mp.call(q0,t)?!0:mp.call(H0,t)?!1:tA.test(t)?q0[t]=!0:(H0[t]=!0,!1)}function rA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sA(t,e,n,r){if(e===null||typeof e>"u"||rA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tt[t]=new qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tt[e]=new qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tt[t]=new qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tt[t]=new qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tt[t]=new qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tt[t]=new qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tt[t]=new qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tt[t]=new qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tt[t]=new qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var wg=/[\-:]([a-z])/g;function xg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wg,xg);Tt[e]=new qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wg,xg);Tt[e]=new qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wg,xg);Tt[e]=new qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tt[t]=new qt(t,1,!1,t.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tt[t]=new qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function _g(t,e,n,r){var s=Tt.hasOwnProperty(e)?Tt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sA(e,n,s,r)&&(n=null),r||s===null?nA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var $r=eA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Uc=Symbol.for("react.element"),Xi=Symbol.for("react.portal"),Ji=Symbol.for("react.fragment"),Tg=Symbol.for("react.strict_mode"),gp=Symbol.for("react.profiler"),_T=Symbol.for("react.provider"),TT=Symbol.for("react.context"),Eg=Symbol.for("react.forward_ref"),yp=Symbol.for("react.suspense"),vp=Symbol.for("react.suspense_list"),Sg=Symbol.for("react.memo"),ts=Symbol.for("react.lazy"),ET=Symbol.for("react.offscreen"),K0=Symbol.iterator;function Ta(t){return t===null||typeof t!="object"?null:(t=K0&&t[K0]||t["@@iterator"],typeof t=="function"?t:null)}var He=Object.assign,rf;function Ra(t){if(rf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);rf=e&&e[1]||""}return`
`+rf+t}var sf=!1;function of(t,e){if(!t||sf)return"";sf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{sf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ra(t):""}function iA(t){switch(t.tag){case 5:return Ra(t.type);case 16:return Ra("Lazy");case 13:return Ra("Suspense");case 19:return Ra("SuspenseList");case 0:case 2:case 15:return t=of(t.type,!1),t;case 11:return t=of(t.type.render,!1),t;case 1:return t=of(t.type,!0),t;default:return""}}function wp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ji:return"Fragment";case Xi:return"Portal";case gp:return"Profiler";case Tg:return"StrictMode";case yp:return"Suspense";case vp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case TT:return(t.displayName||"Context")+".Consumer";case _T:return(t._context.displayName||"Context")+".Provider";case Eg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Sg:return e=t.displayName||null,e!==null?e:wp(t.type)||"Memo";case ts:e=t._payload,t=t._init;try{return wp(t(e))}catch{}}return null}function oA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wp(e);case 8:return e===Tg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ST(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function aA(t){var e=ST(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bc(t){t._valueTracker||(t._valueTracker=aA(t))}function IT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ST(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Uu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function xp(t,e){var n=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function G0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=bs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function bT(t,e){e=e.checked,e!=null&&_g(t,"checked",e,!1)}function _p(t,e){bT(t,e);var n=bs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Tp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Tp(t,e.type,bs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Q0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Tp(t,e,n){(e!=="number"||Uu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ja=Array.isArray;function go(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+bs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ep(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Y0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(ja(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:bs(n)}}function CT(t,e){var n=bs(e.value),r=bs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function X0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function kT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?kT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var zc,NT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(zc=zc||document.createElement("div"),zc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=zc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function pl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Wa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lA=["Webkit","ms","Moz","O"];Object.keys(Wa).forEach(function(t){lA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wa[e]=Wa[t]})});function AT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Wa.hasOwnProperty(t)&&Wa[t]?(""+e).trim():e+"px"}function PT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=AT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var cA=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ip(t,e){if(e){if(cA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function bp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cp=null;function Ig(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var kp=null,yo=null,vo=null;function J0(t){if(t=ec(t)){if(typeof kp!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Bd(e),kp(t.stateNode,t.type,e))}}function RT(t){yo?vo?vo.push(t):vo=[t]:yo=t}function jT(){if(yo){var t=yo,e=vo;if(vo=yo=null,J0(t),e)for(t=0;t<e.length;t++)J0(e[t])}}function DT(t,e){return t(e)}function MT(){}var af=!1;function VT(t,e,n){if(af)return t(e,n);af=!0;try{return DT(t,e,n)}finally{af=!1,(yo!==null||vo!==null)&&(MT(),jT())}}function ml(t,e){var n=t.stateNode;if(n===null)return null;var r=Bd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Np=!1;if(jr)try{var Ea={};Object.defineProperty(Ea,"passive",{get:function(){Np=!0}}),window.addEventListener("test",Ea,Ea),window.removeEventListener("test",Ea,Ea)}catch{Np=!1}function uA(t,e,n,r,s,i,o,a,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var Ha=!1,Bu=null,zu=!1,Ap=null,dA={onError:function(t){Ha=!0,Bu=t}};function hA(t,e,n,r,s,i,o,a,c){Ha=!1,Bu=null,uA.apply(dA,arguments)}function fA(t,e,n,r,s,i,o,a,c){if(hA.apply(this,arguments),Ha){if(Ha){var d=Bu;Ha=!1,Bu=null}else throw Error(z(198));zu||(zu=!0,Ap=d)}}function Di(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function OT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Z0(t){if(Di(t)!==t)throw Error(z(188))}function pA(t){var e=t.alternate;if(!e){if(e=Di(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Z0(s),t;if(i===r)return Z0(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function LT(t){return t=pA(t),t!==null?FT(t):null}function FT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=FT(t);if(e!==null)return e;t=t.sibling}return null}var UT=fn.unstable_scheduleCallback,ew=fn.unstable_cancelCallback,mA=fn.unstable_shouldYield,gA=fn.unstable_requestPaint,tt=fn.unstable_now,yA=fn.unstable_getCurrentPriorityLevel,bg=fn.unstable_ImmediatePriority,BT=fn.unstable_UserBlockingPriority,$u=fn.unstable_NormalPriority,vA=fn.unstable_LowPriority,zT=fn.unstable_IdlePriority,Od=null,nr=null;function wA(t){if(nr&&typeof nr.onCommitFiberRoot=="function")try{nr.onCommitFiberRoot(Od,t,void 0,(t.current.flags&128)===128)}catch{}}var $n=Math.clz32?Math.clz32:TA,xA=Math.log,_A=Math.LN2;function TA(t){return t>>>=0,t===0?32:31-(xA(t)/_A|0)|0}var $c=64,Wc=4194304;function Da(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Da(a):(i&=o,i!==0&&(r=Da(i)))}else o=n&~s,o!==0?r=Da(o):i!==0&&(r=Da(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-$n(e),s=1<<n,r|=t[n],e&=~s;return r}function EA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function SA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-$n(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=EA(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function Pp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $T(){var t=$c;return $c<<=1,!($c&4194240)&&($c=64),t}function lf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Jl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-$n(e),t[e]=n}function IA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-$n(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Cg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-$n(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ke=0;function WT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var HT,kg,qT,KT,GT,Rp=!1,Hc=[],ps=null,ms=null,gs=null,gl=new Map,yl=new Map,rs=[],bA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tw(t,e){switch(t){case"focusin":case"focusout":ps=null;break;case"dragenter":case"dragleave":ms=null;break;case"mouseover":case"mouseout":gs=null;break;case"pointerover":case"pointerout":gl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":yl.delete(e.pointerId)}}function Sa(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ec(e),e!==null&&kg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function CA(t,e,n,r,s){switch(e){case"focusin":return ps=Sa(ps,t,e,n,r,s),!0;case"dragenter":return ms=Sa(ms,t,e,n,r,s),!0;case"mouseover":return gs=Sa(gs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return gl.set(i,Sa(gl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,yl.set(i,Sa(yl.get(i)||null,t,e,n,r,s)),!0}return!1}function QT(t){var e=si(t.target);if(e!==null){var n=Di(e);if(n!==null){if(e=n.tag,e===13){if(e=OT(n),e!==null){t.blockedOn=e,GT(t.priority,function(){qT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function gu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=jp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Cp=r,n.target.dispatchEvent(r),Cp=null}else return e=ec(n),e!==null&&kg(e),t.blockedOn=n,!1;e.shift()}return!0}function nw(t,e,n){gu(t)&&n.delete(e)}function kA(){Rp=!1,ps!==null&&gu(ps)&&(ps=null),ms!==null&&gu(ms)&&(ms=null),gs!==null&&gu(gs)&&(gs=null),gl.forEach(nw),yl.forEach(nw)}function Ia(t,e){t.blockedOn===e&&(t.blockedOn=null,Rp||(Rp=!0,fn.unstable_scheduleCallback(fn.unstable_NormalPriority,kA)))}function vl(t){function e(s){return Ia(s,t)}if(0<Hc.length){Ia(Hc[0],t);for(var n=1;n<Hc.length;n++){var r=Hc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ps!==null&&Ia(ps,t),ms!==null&&Ia(ms,t),gs!==null&&Ia(gs,t),gl.forEach(e),yl.forEach(e),n=0;n<rs.length;n++)r=rs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<rs.length&&(n=rs[0],n.blockedOn===null);)QT(n),n.blockedOn===null&&rs.shift()}var wo=$r.ReactCurrentBatchConfig,Hu=!0;function NA(t,e,n,r){var s=ke,i=wo.transition;wo.transition=null;try{ke=1,Ng(t,e,n,r)}finally{ke=s,wo.transition=i}}function AA(t,e,n,r){var s=ke,i=wo.transition;wo.transition=null;try{ke=4,Ng(t,e,n,r)}finally{ke=s,wo.transition=i}}function Ng(t,e,n,r){if(Hu){var s=jp(t,e,n,r);if(s===null)vf(t,e,r,qu,n),tw(t,r);else if(CA(s,t,e,n,r))r.stopPropagation();else if(tw(t,r),e&4&&-1<bA.indexOf(t)){for(;s!==null;){var i=ec(s);if(i!==null&&HT(i),i=jp(t,e,n,r),i===null&&vf(t,e,r,qu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else vf(t,e,r,null,n)}}var qu=null;function jp(t,e,n,r){if(qu=null,t=Ig(r),t=si(t),t!==null)if(e=Di(t),e===null)t=null;else if(n=e.tag,n===13){if(t=OT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qu=t,null}function YT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yA()){case bg:return 1;case BT:return 4;case $u:case vA:return 16;case zT:return 536870912;default:return 16}default:return 16}}var cs=null,Ag=null,yu=null;function XT(){if(yu)return yu;var t,e=Ag,n=e.length,r,s="value"in cs?cs.value:cs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return yu=s.slice(t,1<r?1-r:void 0)}function vu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function qc(){return!0}function rw(){return!1}function yn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?qc:rw,this.isPropagationStopped=rw,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qc)},persist:function(){},isPersistent:qc}),e}var Yo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pg=yn(Yo),Zl=He({},Yo,{view:0,detail:0}),PA=yn(Zl),cf,uf,ba,Ld=He({},Zl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ba&&(ba&&t.type==="mousemove"?(cf=t.screenX-ba.screenX,uf=t.screenY-ba.screenY):uf=cf=0,ba=t),cf)},movementY:function(t){return"movementY"in t?t.movementY:uf}}),sw=yn(Ld),RA=He({},Ld,{dataTransfer:0}),jA=yn(RA),DA=He({},Zl,{relatedTarget:0}),df=yn(DA),MA=He({},Yo,{animationName:0,elapsedTime:0,pseudoElement:0}),VA=yn(MA),OA=He({},Yo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),LA=yn(OA),FA=He({},Yo,{data:0}),iw=yn(FA),UA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},BA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $A(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=zA[t])?!!e[t]:!1}function Rg(){return $A}var WA=He({},Zl,{key:function(t){if(t.key){var e=UA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=vu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?BA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rg,charCode:function(t){return t.type==="keypress"?vu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),HA=yn(WA),qA=He({},Ld,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ow=yn(qA),KA=He({},Zl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rg}),GA=yn(KA),QA=He({},Yo,{propertyName:0,elapsedTime:0,pseudoElement:0}),YA=yn(QA),XA=He({},Ld,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),JA=yn(XA),ZA=[9,13,27,32],jg=jr&&"CompositionEvent"in window,qa=null;jr&&"documentMode"in document&&(qa=document.documentMode);var eP=jr&&"TextEvent"in window&&!qa,JT=jr&&(!jg||qa&&8<qa&&11>=qa),aw=" ",lw=!1;function ZT(t,e){switch(t){case"keyup":return ZA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zi=!1;function tP(t,e){switch(t){case"compositionend":return eE(e);case"keypress":return e.which!==32?null:(lw=!0,aw);case"textInput":return t=e.data,t===aw&&lw?null:t;default:return null}}function nP(t,e){if(Zi)return t==="compositionend"||!jg&&ZT(t,e)?(t=XT(),yu=Ag=cs=null,Zi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return JT&&e.locale!=="ko"?null:e.data;default:return null}}var rP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rP[t.type]:e==="textarea"}function tE(t,e,n,r){RT(r),e=Ku(e,"onChange"),0<e.length&&(n=new Pg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ka=null,wl=null;function sP(t){hE(t,0)}function Fd(t){var e=no(t);if(IT(e))return t}function iP(t,e){if(t==="change")return e}var nE=!1;if(jr){var hf;if(jr){var ff="oninput"in document;if(!ff){var uw=document.createElement("div");uw.setAttribute("oninput","return;"),ff=typeof uw.oninput=="function"}hf=ff}else hf=!1;nE=hf&&(!document.documentMode||9<document.documentMode)}function dw(){Ka&&(Ka.detachEvent("onpropertychange",rE),wl=Ka=null)}function rE(t){if(t.propertyName==="value"&&Fd(wl)){var e=[];tE(e,wl,t,Ig(t)),VT(sP,e)}}function oP(t,e,n){t==="focusin"?(dw(),Ka=e,wl=n,Ka.attachEvent("onpropertychange",rE)):t==="focusout"&&dw()}function aP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fd(wl)}function lP(t,e){if(t==="click")return Fd(e)}function cP(t,e){if(t==="input"||t==="change")return Fd(e)}function uP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qn=typeof Object.is=="function"?Object.is:uP;function xl(t,e){if(qn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!mp.call(e,s)||!qn(t[s],e[s]))return!1}return!0}function hw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fw(t,e){var n=hw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hw(n)}}function sE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?sE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function iE(){for(var t=window,e=Uu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Uu(t.document)}return e}function Dg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function dP(t){var e=iE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&sE(n.ownerDocument.documentElement,n)){if(r!==null&&Dg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=fw(n,i);var o=fw(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var hP=jr&&"documentMode"in document&&11>=document.documentMode,eo=null,Dp=null,Ga=null,Mp=!1;function pw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mp||eo==null||eo!==Uu(r)||(r=eo,"selectionStart"in r&&Dg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ga&&xl(Ga,r)||(Ga=r,r=Ku(Dp,"onSelect"),0<r.length&&(e=new Pg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=eo)))}function Kc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var to={animationend:Kc("Animation","AnimationEnd"),animationiteration:Kc("Animation","AnimationIteration"),animationstart:Kc("Animation","AnimationStart"),transitionend:Kc("Transition","TransitionEnd")},pf={},oE={};jr&&(oE=document.createElement("div").style,"AnimationEvent"in window||(delete to.animationend.animation,delete to.animationiteration.animation,delete to.animationstart.animation),"TransitionEvent"in window||delete to.transitionend.transition);function Ud(t){if(pf[t])return pf[t];if(!to[t])return t;var e=to[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in oE)return pf[t]=e[n];return t}var aE=Ud("animationend"),lE=Ud("animationiteration"),cE=Ud("animationstart"),uE=Ud("transitionend"),dE=new Map,mw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ms(t,e){dE.set(t,e),ji(e,[t])}for(var mf=0;mf<mw.length;mf++){var gf=mw[mf],fP=gf.toLowerCase(),pP=gf[0].toUpperCase()+gf.slice(1);Ms(fP,"on"+pP)}Ms(aE,"onAnimationEnd");Ms(lE,"onAnimationIteration");Ms(cE,"onAnimationStart");Ms("dblclick","onDoubleClick");Ms("focusin","onFocus");Ms("focusout","onBlur");Ms(uE,"onTransitionEnd");ko("onMouseEnter",["mouseout","mouseover"]);ko("onMouseLeave",["mouseout","mouseover"]);ko("onPointerEnter",["pointerout","pointerover"]);ko("onPointerLeave",["pointerout","pointerover"]);ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ji("onBeforeInput",["compositionend","keypress","textInput","paste"]);ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ma="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ma));function gw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,fA(r,e,void 0,t),t.currentTarget=null}function hE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,d=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;gw(s,a,d),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,d=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;gw(s,a,d),i=c}}}if(zu)throw t=Ap,zu=!1,Ap=null,t}function De(t,e){var n=e[Up];n===void 0&&(n=e[Up]=new Set);var r=t+"__bubble";n.has(r)||(fE(e,t,2,!1),n.add(r))}function yf(t,e,n){var r=0;e&&(r|=4),fE(n,t,r,e)}var Gc="_reactListening"+Math.random().toString(36).slice(2);function _l(t){if(!t[Gc]){t[Gc]=!0,xT.forEach(function(n){n!=="selectionchange"&&(mP.has(n)||yf(n,!1,t),yf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Gc]||(e[Gc]=!0,yf("selectionchange",!1,e))}}function fE(t,e,n,r){switch(YT(e)){case 1:var s=NA;break;case 4:s=AA;break;default:s=Ng}n=s.bind(null,e,n,t),s=void 0,!Np||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function vf(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=si(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}VT(function(){var d=i,h=Ig(n),f=[];e:{var p=dE.get(t);if(p!==void 0){var g=Pg,w=t;switch(t){case"keypress":if(vu(n)===0)break e;case"keydown":case"keyup":g=HA;break;case"focusin":w="focus",g=df;break;case"focusout":w="blur",g=df;break;case"beforeblur":case"afterblur":g=df;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=sw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=jA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=GA;break;case aE:case lE:case cE:g=VA;break;case uE:g=YA;break;case"scroll":g=PA;break;case"wheel":g=JA;break;case"copy":case"cut":case"paste":g=LA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=ow}var T=(e&4)!==0,C=!T&&t==="scroll",_=T?p!==null?p+"Capture":null:p;T=[];for(var v=d,x;v!==null;){x=v;var R=x.stateNode;if(x.tag===5&&R!==null&&(x=R,_!==null&&(R=ml(v,_),R!=null&&T.push(Tl(v,R,x)))),C)break;v=v.return}0<T.length&&(p=new g(p,w,null,n,h),f.push({event:p,listeners:T}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==Cp&&(w=n.relatedTarget||n.fromElement)&&(si(w)||w[Dr]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(w=n.relatedTarget||n.toElement,g=d,w=w?si(w):null,w!==null&&(C=Di(w),w!==C||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=d),g!==w)){if(T=sw,R="onMouseLeave",_="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(T=ow,R="onPointerLeave",_="onPointerEnter",v="pointer"),C=g==null?p:no(g),x=w==null?p:no(w),p=new T(R,v+"leave",g,n,h),p.target=C,p.relatedTarget=x,R=null,si(h)===d&&(T=new T(_,v+"enter",w,n,h),T.target=x,T.relatedTarget=C,R=T),C=R,g&&w)t:{for(T=g,_=w,v=0,x=T;x;x=Ki(x))v++;for(x=0,R=_;R;R=Ki(R))x++;for(;0<v-x;)T=Ki(T),v--;for(;0<x-v;)_=Ki(_),x--;for(;v--;){if(T===_||_!==null&&T===_.alternate)break t;T=Ki(T),_=Ki(_)}T=null}else T=null;g!==null&&yw(f,p,g,T,!1),w!==null&&C!==null&&yw(f,C,w,T,!0)}}e:{if(p=d?no(d):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var D=iP;else if(cw(p))if(nE)D=cP;else{D=aP;var V=oP}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(D=lP);if(D&&(D=D(t,d))){tE(f,D,n,h);break e}V&&V(t,p,d),t==="focusout"&&(V=p._wrapperState)&&V.controlled&&p.type==="number"&&Tp(p,"number",p.value)}switch(V=d?no(d):window,t){case"focusin":(cw(V)||V.contentEditable==="true")&&(eo=V,Dp=d,Ga=null);break;case"focusout":Ga=Dp=eo=null;break;case"mousedown":Mp=!0;break;case"contextmenu":case"mouseup":case"dragend":Mp=!1,pw(f,n,h);break;case"selectionchange":if(hP)break;case"keydown":case"keyup":pw(f,n,h)}var S;if(jg)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Zi?ZT(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(JT&&n.locale!=="ko"&&(Zi||E!=="onCompositionStart"?E==="onCompositionEnd"&&Zi&&(S=XT()):(cs=h,Ag="value"in cs?cs.value:cs.textContent,Zi=!0)),V=Ku(d,E),0<V.length&&(E=new iw(E,t,null,n,h),f.push({event:E,listeners:V}),S?E.data=S:(S=eE(n),S!==null&&(E.data=S)))),(S=eP?tP(t,n):nP(t,n))&&(d=Ku(d,"onBeforeInput"),0<d.length&&(h=new iw("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:d}),h.data=S))}hE(f,e)})}function Tl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ku(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ml(t,n),i!=null&&r.unshift(Tl(t,i,s)),i=ml(t,e),i!=null&&r.push(Tl(t,i,s))),t=t.return}return r}function Ki(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function yw(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,d=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&d!==null&&(a=d,s?(c=ml(n,i),c!=null&&o.unshift(Tl(n,c,a))):s||(c=ml(n,i),c!=null&&o.push(Tl(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var gP=/\r\n?/g,yP=/\u0000|\uFFFD/g;function vw(t){return(typeof t=="string"?t:""+t).replace(gP,`
`).replace(yP,"")}function Qc(t,e,n){if(e=vw(e),vw(t)!==e&&n)throw Error(z(425))}function Gu(){}var Vp=null,Op=null;function Lp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fp=typeof setTimeout=="function"?setTimeout:void 0,vP=typeof clearTimeout=="function"?clearTimeout:void 0,ww=typeof Promise=="function"?Promise:void 0,wP=typeof queueMicrotask=="function"?queueMicrotask:typeof ww<"u"?function(t){return ww.resolve(null).then(t).catch(xP)}:Fp;function xP(t){setTimeout(function(){throw t})}function wf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),vl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);vl(e)}function ys(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function xw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xo=Math.random().toString(36).slice(2),er="__reactFiber$"+Xo,El="__reactProps$"+Xo,Dr="__reactContainer$"+Xo,Up="__reactEvents$"+Xo,_P="__reactListeners$"+Xo,TP="__reactHandles$"+Xo;function si(t){var e=t[er];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Dr]||n[er]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=xw(t);t!==null;){if(n=t[er])return n;t=xw(t)}return e}t=n,n=t.parentNode}return null}function ec(t){return t=t[er]||t[Dr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function no(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Bd(t){return t[El]||null}var Bp=[],ro=-1;function Vs(t){return{current:t}}function Ve(t){0>ro||(t.current=Bp[ro],Bp[ro]=null,ro--)}function Re(t,e){ro++,Bp[ro]=t.current,t.current=e}var Cs={},Ft=Vs(Cs),Jt=Vs(!1),wi=Cs;function No(t,e){var n=t.type.contextTypes;if(!n)return Cs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Zt(t){return t=t.childContextTypes,t!=null}function Qu(){Ve(Jt),Ve(Ft)}function _w(t,e,n){if(Ft.current!==Cs)throw Error(z(168));Re(Ft,e),Re(Jt,n)}function pE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,oA(t)||"Unknown",s));return He({},n,r)}function Yu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Cs,wi=Ft.current,Re(Ft,t),Re(Jt,Jt.current),!0}function Tw(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=pE(t,e,wi),r.__reactInternalMemoizedMergedChildContext=t,Ve(Jt),Ve(Ft),Re(Ft,t)):Ve(Jt),Re(Jt,n)}var Tr=null,zd=!1,xf=!1;function mE(t){Tr===null?Tr=[t]:Tr.push(t)}function EP(t){zd=!0,mE(t)}function Os(){if(!xf&&Tr!==null){xf=!0;var t=0,e=ke;try{var n=Tr;for(ke=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Tr=null,zd=!1}catch(s){throw Tr!==null&&(Tr=Tr.slice(t+1)),UT(bg,Os),s}finally{ke=e,xf=!1}}return null}var so=[],io=0,Xu=null,Ju=0,Tn=[],En=0,xi=null,Er=1,Sr="";function ei(t,e){so[io++]=Ju,so[io++]=Xu,Xu=t,Ju=e}function gE(t,e,n){Tn[En++]=Er,Tn[En++]=Sr,Tn[En++]=xi,xi=t;var r=Er;t=Sr;var s=32-$n(r)-1;r&=~(1<<s),n+=1;var i=32-$n(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Er=1<<32-$n(e)+s|n<<s|r,Sr=i+t}else Er=1<<i|n<<s|r,Sr=t}function Mg(t){t.return!==null&&(ei(t,1),gE(t,1,0))}function Vg(t){for(;t===Xu;)Xu=so[--io],so[io]=null,Ju=so[--io],so[io]=null;for(;t===xi;)xi=Tn[--En],Tn[En]=null,Sr=Tn[--En],Tn[En]=null,Er=Tn[--En],Tn[En]=null}var un=null,ln=null,Le=!1,zn=null;function yE(t,e){var n=Sn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ew(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,un=t,ln=ys(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,un=t,ln=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=xi!==null?{id:Er,overflow:Sr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Sn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,un=t,ln=null,!0):!1;default:return!1}}function zp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $p(t){if(Le){var e=ln;if(e){var n=e;if(!Ew(t,e)){if(zp(t))throw Error(z(418));e=ys(n.nextSibling);var r=un;e&&Ew(t,e)?yE(r,n):(t.flags=t.flags&-4097|2,Le=!1,un=t)}}else{if(zp(t))throw Error(z(418));t.flags=t.flags&-4097|2,Le=!1,un=t}}}function Sw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;un=t}function Yc(t){if(t!==un)return!1;if(!Le)return Sw(t),Le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Lp(t.type,t.memoizedProps)),e&&(e=ln)){if(zp(t))throw vE(),Error(z(418));for(;e;)yE(t,e),e=ys(e.nextSibling)}if(Sw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ln=ys(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ln=null}}else ln=un?ys(t.stateNode.nextSibling):null;return!0}function vE(){for(var t=ln;t;)t=ys(t.nextSibling)}function Ao(){ln=un=null,Le=!1}function Og(t){zn===null?zn=[t]:zn.push(t)}var SP=$r.ReactCurrentBatchConfig;function Ca(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Xc(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Iw(t){var e=t._init;return e(t._payload)}function wE(t){function e(_,v){if(t){var x=_.deletions;x===null?(_.deletions=[v],_.flags|=16):x.push(v)}}function n(_,v){if(!t)return null;for(;v!==null;)e(_,v),v=v.sibling;return null}function r(_,v){for(_=new Map;v!==null;)v.key!==null?_.set(v.key,v):_.set(v.index,v),v=v.sibling;return _}function s(_,v){return _=_s(_,v),_.index=0,_.sibling=null,_}function i(_,v,x){return _.index=x,t?(x=_.alternate,x!==null?(x=x.index,x<v?(_.flags|=2,v):x):(_.flags|=2,v)):(_.flags|=1048576,v)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,v,x,R){return v===null||v.tag!==6?(v=Cf(x,_.mode,R),v.return=_,v):(v=s(v,x),v.return=_,v)}function c(_,v,x,R){var D=x.type;return D===Ji?h(_,v,x.props.children,R,x.key):v!==null&&(v.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===ts&&Iw(D)===v.type)?(R=s(v,x.props),R.ref=Ca(_,v,x),R.return=_,R):(R=Iu(x.type,x.key,x.props,null,_.mode,R),R.ref=Ca(_,v,x),R.return=_,R)}function d(_,v,x,R){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=kf(x,_.mode,R),v.return=_,v):(v=s(v,x.children||[]),v.return=_,v)}function h(_,v,x,R,D){return v===null||v.tag!==7?(v=fi(x,_.mode,R,D),v.return=_,v):(v=s(v,x),v.return=_,v)}function f(_,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Cf(""+v,_.mode,x),v.return=_,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Uc:return x=Iu(v.type,v.key,v.props,null,_.mode,x),x.ref=Ca(_,null,v),x.return=_,x;case Xi:return v=kf(v,_.mode,x),v.return=_,v;case ts:var R=v._init;return f(_,R(v._payload),x)}if(ja(v)||Ta(v))return v=fi(v,_.mode,x,null),v.return=_,v;Xc(_,v)}return null}function p(_,v,x,R){var D=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return D!==null?null:a(_,v,""+x,R);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Uc:return x.key===D?c(_,v,x,R):null;case Xi:return x.key===D?d(_,v,x,R):null;case ts:return D=x._init,p(_,v,D(x._payload),R)}if(ja(x)||Ta(x))return D!==null?null:h(_,v,x,R,null);Xc(_,x)}return null}function g(_,v,x,R,D){if(typeof R=="string"&&R!==""||typeof R=="number")return _=_.get(x)||null,a(v,_,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Uc:return _=_.get(R.key===null?x:R.key)||null,c(v,_,R,D);case Xi:return _=_.get(R.key===null?x:R.key)||null,d(v,_,R,D);case ts:var V=R._init;return g(_,v,x,V(R._payload),D)}if(ja(R)||Ta(R))return _=_.get(x)||null,h(v,_,R,D,null);Xc(v,R)}return null}function w(_,v,x,R){for(var D=null,V=null,S=v,E=v=0,N=null;S!==null&&E<x.length;E++){S.index>E?(N=S,S=null):N=S.sibling;var I=p(_,S,x[E],R);if(I===null){S===null&&(S=N);break}t&&S&&I.alternate===null&&e(_,S),v=i(I,v,E),V===null?D=I:V.sibling=I,V=I,S=N}if(E===x.length)return n(_,S),Le&&ei(_,E),D;if(S===null){for(;E<x.length;E++)S=f(_,x[E],R),S!==null&&(v=i(S,v,E),V===null?D=S:V.sibling=S,V=S);return Le&&ei(_,E),D}for(S=r(_,S);E<x.length;E++)N=g(S,_,E,x[E],R),N!==null&&(t&&N.alternate!==null&&S.delete(N.key===null?E:N.key),v=i(N,v,E),V===null?D=N:V.sibling=N,V=N);return t&&S.forEach(function(P){return e(_,P)}),Le&&ei(_,E),D}function T(_,v,x,R){var D=Ta(x);if(typeof D!="function")throw Error(z(150));if(x=D.call(x),x==null)throw Error(z(151));for(var V=D=null,S=v,E=v=0,N=null,I=x.next();S!==null&&!I.done;E++,I=x.next()){S.index>E?(N=S,S=null):N=S.sibling;var P=p(_,S,I.value,R);if(P===null){S===null&&(S=N);break}t&&S&&P.alternate===null&&e(_,S),v=i(P,v,E),V===null?D=P:V.sibling=P,V=P,S=N}if(I.done)return n(_,S),Le&&ei(_,E),D;if(S===null){for(;!I.done;E++,I=x.next())I=f(_,I.value,R),I!==null&&(v=i(I,v,E),V===null?D=I:V.sibling=I,V=I);return Le&&ei(_,E),D}for(S=r(_,S);!I.done;E++,I=x.next())I=g(S,_,E,I.value,R),I!==null&&(t&&I.alternate!==null&&S.delete(I.key===null?E:I.key),v=i(I,v,E),V===null?D=I:V.sibling=I,V=I);return t&&S.forEach(function(j){return e(_,j)}),Le&&ei(_,E),D}function C(_,v,x,R){if(typeof x=="object"&&x!==null&&x.type===Ji&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Uc:e:{for(var D=x.key,V=v;V!==null;){if(V.key===D){if(D=x.type,D===Ji){if(V.tag===7){n(_,V.sibling),v=s(V,x.props.children),v.return=_,_=v;break e}}else if(V.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===ts&&Iw(D)===V.type){n(_,V.sibling),v=s(V,x.props),v.ref=Ca(_,V,x),v.return=_,_=v;break e}n(_,V);break}else e(_,V);V=V.sibling}x.type===Ji?(v=fi(x.props.children,_.mode,R,x.key),v.return=_,_=v):(R=Iu(x.type,x.key,x.props,null,_.mode,R),R.ref=Ca(_,v,x),R.return=_,_=R)}return o(_);case Xi:e:{for(V=x.key;v!==null;){if(v.key===V)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(_,v.sibling),v=s(v,x.children||[]),v.return=_,_=v;break e}else{n(_,v);break}else e(_,v);v=v.sibling}v=kf(x,_.mode,R),v.return=_,_=v}return o(_);case ts:return V=x._init,C(_,v,V(x._payload),R)}if(ja(x))return w(_,v,x,R);if(Ta(x))return T(_,v,x,R);Xc(_,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(_,v.sibling),v=s(v,x),v.return=_,_=v):(n(_,v),v=Cf(x,_.mode,R),v.return=_,_=v),o(_)):n(_,v)}return C}var Po=wE(!0),xE=wE(!1),Zu=Vs(null),ed=null,oo=null,Lg=null;function Fg(){Lg=oo=ed=null}function Ug(t){var e=Zu.current;Ve(Zu),t._currentValue=e}function Wp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function xo(t,e){ed=t,Lg=oo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yt=!0),t.firstContext=null)}function An(t){var e=t._currentValue;if(Lg!==t)if(t={context:t,memoizedValue:e,next:null},oo===null){if(ed===null)throw Error(z(308));oo=t,ed.dependencies={lanes:0,firstContext:t}}else oo=oo.next=t;return e}var ii=null;function Bg(t){ii===null?ii=[t]:ii.push(t)}function _E(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Bg(e)):(n.next=s.next,s.next=n),e.interleaved=n,Mr(t,r)}function Mr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ns=!1;function zg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function kr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function vs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Mr(t,n)}return s=r.interleaved,s===null?(e.next=e,Bg(r)):(e.next=s.next,s.next=e),r.interleaved=e,Mr(t,n)}function wu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Cg(t,n)}}function bw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function td(t,e,n,r){var s=t.updateQueue;ns=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=d:a.next=d,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,h=d=c=null,a=i;do{var p=a.lane,g=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,T=a;switch(p=e,g=n,T.tag){case 1:if(w=T.payload,typeof w=="function"){f=w.call(g,f,p);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=T.payload,p=typeof w=="function"?w.call(g,f,p):w,p==null)break e;f=He({},f,p);break e;case 2:ns=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(d=h=g,c=f):h=h.next=g,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ti|=o,t.lanes=o,t.memoizedState=f}}function Cw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var tc={},rr=Vs(tc),Sl=Vs(tc),Il=Vs(tc);function oi(t){if(t===tc)throw Error(z(174));return t}function $g(t,e){switch(Re(Il,e),Re(Sl,t),Re(rr,tc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Sp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Sp(e,t)}Ve(rr),Re(rr,e)}function Ro(){Ve(rr),Ve(Sl),Ve(Il)}function EE(t){oi(Il.current);var e=oi(rr.current),n=Sp(e,t.type);e!==n&&(Re(Sl,t),Re(rr,n))}function Wg(t){Sl.current===t&&(Ve(rr),Ve(Sl))}var Be=Vs(0);function nd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var _f=[];function Hg(){for(var t=0;t<_f.length;t++)_f[t]._workInProgressVersionPrimary=null;_f.length=0}var xu=$r.ReactCurrentDispatcher,Tf=$r.ReactCurrentBatchConfig,_i=0,$e=null,lt=null,ht=null,rd=!1,Qa=!1,bl=0,IP=0;function Nt(){throw Error(z(321))}function qg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!qn(t[n],e[n]))return!1;return!0}function Kg(t,e,n,r,s,i){if(_i=i,$e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xu.current=t===null||t.memoizedState===null?NP:AP,t=n(r,s),Qa){i=0;do{if(Qa=!1,bl=0,25<=i)throw Error(z(301));i+=1,ht=lt=null,e.updateQueue=null,xu.current=PP,t=n(r,s)}while(Qa)}if(xu.current=sd,e=lt!==null&&lt.next!==null,_i=0,ht=lt=$e=null,rd=!1,e)throw Error(z(300));return t}function Gg(){var t=bl!==0;return bl=0,t}function Zn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?$e.memoizedState=ht=t:ht=ht.next=t,ht}function Pn(){if(lt===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var e=ht===null?$e.memoizedState:ht.next;if(e!==null)ht=e,lt=t;else{if(t===null)throw Error(z(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},ht===null?$e.memoizedState=ht=t:ht=ht.next=t}return ht}function Cl(t,e){return typeof e=="function"?e(t):e}function Ef(t){var e=Pn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=lt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,d=i;do{var h=d.lane;if((_i&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(a=c=f,o=r):c=c.next=f,$e.lanes|=h,Ti|=h}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=a,qn(r,e.memoizedState)||(Yt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,$e.lanes|=i,Ti|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Sf(t){var e=Pn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);qn(i,e.memoizedState)||(Yt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function SE(){}function IE(t,e){var n=$e,r=Pn(),s=e(),i=!qn(r.memoizedState,s);if(i&&(r.memoizedState=s,Yt=!0),r=r.queue,Qg(kE.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ht!==null&&ht.memoizedState.tag&1){if(n.flags|=2048,kl(9,CE.bind(null,n,r,s,e),void 0,null),ft===null)throw Error(z(349));_i&30||bE(n,e,s)}return s}function bE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function CE(t,e,n,r){e.value=n,e.getSnapshot=r,NE(e)&&AE(t)}function kE(t,e,n){return n(function(){NE(e)&&AE(t)})}function NE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!qn(t,n)}catch{return!0}}function AE(t){var e=Mr(t,1);e!==null&&Wn(e,t,1,-1)}function kw(t){var e=Zn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cl,lastRenderedState:t},e.queue=t,t=t.dispatch=kP.bind(null,$e,t),[e.memoizedState,t]}function kl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function PE(){return Pn().memoizedState}function _u(t,e,n,r){var s=Zn();$e.flags|=t,s.memoizedState=kl(1|e,n,void 0,r===void 0?null:r)}function $d(t,e,n,r){var s=Pn();r=r===void 0?null:r;var i=void 0;if(lt!==null){var o=lt.memoizedState;if(i=o.destroy,r!==null&&qg(r,o.deps)){s.memoizedState=kl(e,n,i,r);return}}$e.flags|=t,s.memoizedState=kl(1|e,n,i,r)}function Nw(t,e){return _u(8390656,8,t,e)}function Qg(t,e){return $d(2048,8,t,e)}function RE(t,e){return $d(4,2,t,e)}function jE(t,e){return $d(4,4,t,e)}function DE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ME(t,e,n){return n=n!=null?n.concat([t]):null,$d(4,4,DE.bind(null,e,t),n)}function Yg(){}function VE(t,e){var n=Pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&qg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function OE(t,e){var n=Pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&qg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function LE(t,e,n){return _i&21?(qn(n,e)||(n=$T(),$e.lanes|=n,Ti|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yt=!0),t.memoizedState=n)}function bP(t,e){var n=ke;ke=n!==0&&4>n?n:4,t(!0);var r=Tf.transition;Tf.transition={};try{t(!1),e()}finally{ke=n,Tf.transition=r}}function FE(){return Pn().memoizedState}function CP(t,e,n){var r=xs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},UE(t))BE(e,n);else if(n=_E(t,e,n,r),n!==null){var s=Wt();Wn(n,t,r,s),zE(n,e,r)}}function kP(t,e,n){var r=xs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(UE(t))BE(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,qn(a,o)){var c=e.interleaved;c===null?(s.next=s,Bg(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=_E(t,e,s,r),n!==null&&(s=Wt(),Wn(n,t,r,s),zE(n,e,r))}}function UE(t){var e=t.alternate;return t===$e||e!==null&&e===$e}function BE(t,e){Qa=rd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function zE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Cg(t,n)}}var sd={readContext:An,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},NP={readContext:An,useCallback:function(t,e){return Zn().memoizedState=[t,e===void 0?null:e],t},useContext:An,useEffect:Nw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,_u(4194308,4,DE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _u(4194308,4,t,e)},useInsertionEffect:function(t,e){return _u(4,2,t,e)},useMemo:function(t,e){var n=Zn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Zn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=CP.bind(null,$e,t),[r.memoizedState,t]},useRef:function(t){var e=Zn();return t={current:t},e.memoizedState=t},useState:kw,useDebugValue:Yg,useDeferredValue:function(t){return Zn().memoizedState=t},useTransition:function(){var t=kw(!1),e=t[0];return t=bP.bind(null,t[1]),Zn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=$e,s=Zn();if(Le){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),ft===null)throw Error(z(349));_i&30||bE(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Nw(kE.bind(null,r,i,t),[t]),r.flags|=2048,kl(9,CE.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Zn(),e=ft.identifierPrefix;if(Le){var n=Sr,r=Er;n=(r&~(1<<32-$n(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=bl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=IP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},AP={readContext:An,useCallback:VE,useContext:An,useEffect:Qg,useImperativeHandle:ME,useInsertionEffect:RE,useLayoutEffect:jE,useMemo:OE,useReducer:Ef,useRef:PE,useState:function(){return Ef(Cl)},useDebugValue:Yg,useDeferredValue:function(t){var e=Pn();return LE(e,lt.memoizedState,t)},useTransition:function(){var t=Ef(Cl)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:SE,useSyncExternalStore:IE,useId:FE,unstable_isNewReconciler:!1},PP={readContext:An,useCallback:VE,useContext:An,useEffect:Qg,useImperativeHandle:ME,useInsertionEffect:RE,useLayoutEffect:jE,useMemo:OE,useReducer:Sf,useRef:PE,useState:function(){return Sf(Cl)},useDebugValue:Yg,useDeferredValue:function(t){var e=Pn();return lt===null?e.memoizedState=t:LE(e,lt.memoizedState,t)},useTransition:function(){var t=Sf(Cl)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:SE,useSyncExternalStore:IE,useId:FE,unstable_isNewReconciler:!1};function Un(t,e){if(t&&t.defaultProps){e=He({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Hp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:He({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Wd={isMounted:function(t){return(t=t._reactInternals)?Di(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Wt(),s=xs(t),i=kr(r,s);i.payload=e,n!=null&&(i.callback=n),e=vs(t,i,s),e!==null&&(Wn(e,t,s,r),wu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Wt(),s=xs(t),i=kr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=vs(t,i,s),e!==null&&(Wn(e,t,s,r),wu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Wt(),r=xs(t),s=kr(n,r);s.tag=2,e!=null&&(s.callback=e),e=vs(t,s,r),e!==null&&(Wn(e,t,r,n),wu(e,t,r))}};function Aw(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!xl(n,r)||!xl(s,i):!0}function $E(t,e,n){var r=!1,s=Cs,i=e.contextType;return typeof i=="object"&&i!==null?i=An(i):(s=Zt(e)?wi:Ft.current,r=e.contextTypes,i=(r=r!=null)?No(t,s):Cs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Pw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Wd.enqueueReplaceState(e,e.state,null)}function qp(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},zg(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=An(i):(i=Zt(e)?wi:Ft.current,s.context=No(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Hp(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Wd.enqueueReplaceState(s,s.state,null),td(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function jo(t,e){try{var n="",r=e;do n+=iA(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function If(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Kp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var RP=typeof WeakMap=="function"?WeakMap:Map;function WE(t,e,n){n=kr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){od||(od=!0,rm=r),Kp(t,e)},n}function HE(t,e,n){n=kr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Kp(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Kp(t,e),typeof r!="function"&&(ws===null?ws=new Set([this]):ws.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Rw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new RP;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=qP.bind(null,t,e,n),e.then(t,t))}function jw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Dw(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=kr(-1,1),e.tag=2,vs(n,e,1))),n.lanes|=1),t)}var jP=$r.ReactCurrentOwner,Yt=!1;function zt(t,e,n,r){e.child=t===null?xE(e,null,n,r):Po(e,t.child,n,r)}function Mw(t,e,n,r,s){n=n.render;var i=e.ref;return xo(e,s),r=Kg(t,e,n,r,i,s),n=Gg(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Vr(t,e,s)):(Le&&n&&Mg(e),e.flags|=1,zt(t,e,r,s),e.child)}function Vw(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!sy(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,qE(t,e,i,r,s)):(t=Iu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:xl,n(o,r)&&t.ref===e.ref)return Vr(t,e,s)}return e.flags|=1,t=_s(i,r),t.ref=e.ref,t.return=e,e.child=t}function qE(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(xl(i,r)&&t.ref===e.ref)if(Yt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Yt=!0);else return e.lanes=t.lanes,Vr(t,e,s)}return Gp(t,e,n,r,s)}function KE(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(lo,an),an|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Re(lo,an),an|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Re(lo,an),an|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Re(lo,an),an|=r;return zt(t,e,s,n),e.child}function GE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Gp(t,e,n,r,s){var i=Zt(n)?wi:Ft.current;return i=No(e,i),xo(e,s),n=Kg(t,e,n,r,i,s),r=Gg(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Vr(t,e,s)):(Le&&r&&Mg(e),e.flags|=1,zt(t,e,n,s),e.child)}function Ow(t,e,n,r,s){if(Zt(n)){var i=!0;Yu(e)}else i=!1;if(xo(e,s),e.stateNode===null)Tu(t,e),$E(e,n,r),qp(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=An(d):(d=Zt(n)?wi:Ft.current,d=No(e,d));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==d)&&Pw(e,o,r,d),ns=!1;var p=e.memoizedState;o.state=p,td(e,r,o,s),c=e.memoizedState,a!==r||p!==c||Jt.current||ns?(typeof h=="function"&&(Hp(e,n,h,r),c=e.memoizedState),(a=ns||Aw(e,n,a,r,p,c,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,TE(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:Un(e.type,a),o.props=d,f=e.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=An(c):(c=Zt(n)?wi:Ft.current,c=No(e,c));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==c)&&Pw(e,o,r,c),ns=!1,p=e.memoizedState,o.state=p,td(e,r,o,s);var w=e.memoizedState;a!==f||p!==w||Jt.current||ns?(typeof g=="function"&&(Hp(e,n,g,r),w=e.memoizedState),(d=ns||Aw(e,n,d,r,p,w,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Qp(t,e,n,r,i,s)}function Qp(t,e,n,r,s,i){GE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Tw(e,n,!1),Vr(t,e,i);r=e.stateNode,jP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Po(e,t.child,null,i),e.child=Po(e,null,a,i)):zt(t,e,a,i),e.memoizedState=r.state,s&&Tw(e,n,!0),e.child}function QE(t){var e=t.stateNode;e.pendingContext?_w(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_w(t,e.context,!1),$g(t,e.containerInfo)}function Lw(t,e,n,r,s){return Ao(),Og(s),e.flags|=256,zt(t,e,n,r),e.child}var Yp={dehydrated:null,treeContext:null,retryLane:0};function Xp(t){return{baseLanes:t,cachePool:null,transitions:null}}function YE(t,e,n){var r=e.pendingProps,s=Be.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Re(Be,s&1),t===null)return $p(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Kd(o,r,0,null),t=fi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Xp(n),e.memoizedState=Yp,t):Xg(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return DP(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=_s(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=_s(a,i):(i=fi(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Xp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Yp,r}return i=t.child,t=i.sibling,r=_s(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Xg(t,e){return e=Kd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Jc(t,e,n,r){return r!==null&&Og(r),Po(e,t.child,null,n),t=Xg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function DP(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=If(Error(z(422))),Jc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Kd({mode:"visible",children:r.children},s,0,null),i=fi(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Po(e,t.child,null,o),e.child.memoizedState=Xp(o),e.memoizedState=Yp,i);if(!(e.mode&1))return Jc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(z(419)),r=If(i,r,void 0),Jc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Yt||a){if(r=ft,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Mr(t,s),Wn(r,t,s,-1))}return ry(),r=If(Error(z(421))),Jc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=KP.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,ln=ys(s.nextSibling),un=e,Le=!0,zn=null,t!==null&&(Tn[En++]=Er,Tn[En++]=Sr,Tn[En++]=xi,Er=t.id,Sr=t.overflow,xi=e),e=Xg(e,r.children),e.flags|=4096,e)}function Fw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Wp(t.return,e,n)}function bf(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function XE(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(zt(t,e,r.children,n),r=Be.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fw(t,n,e);else if(t.tag===19)Fw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Re(Be,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&nd(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),bf(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&nd(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}bf(e,!0,n,null,i);break;case"together":bf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Tu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Vr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ti|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=_s(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=_s(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function MP(t,e,n){switch(e.tag){case 3:QE(e),Ao();break;case 5:EE(e);break;case 1:Zt(e.type)&&Yu(e);break;case 4:$g(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Re(Zu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Re(Be,Be.current&1),e.flags|=128,null):n&e.child.childLanes?YE(t,e,n):(Re(Be,Be.current&1),t=Vr(t,e,n),t!==null?t.sibling:null);Re(Be,Be.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return XE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Re(Be,Be.current),r)break;return null;case 22:case 23:return e.lanes=0,KE(t,e,n)}return Vr(t,e,n)}var JE,Jp,ZE,eS;JE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jp=function(){};ZE=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,oi(rr.current);var i=null;switch(n){case"input":s=xp(t,s),r=xp(t,r),i=[];break;case"select":s=He({},s,{value:void 0}),r=He({},r,{value:void 0}),i=[];break;case"textarea":s=Ep(t,s),r=Ep(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Gu)}Ip(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var a=s[d];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(fl.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(a=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==a&&(c!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(fl.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&De("scroll",t),i||a===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};eS=function(t,e,n,r){n!==r&&(e.flags|=4)};function ka(t,e){if(!Le)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function At(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function VP(t,e,n){var r=e.pendingProps;switch(Vg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(e),null;case 1:return Zt(e.type)&&Qu(),At(e),null;case 3:return r=e.stateNode,Ro(),Ve(Jt),Ve(Ft),Hg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Yc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zn!==null&&(om(zn),zn=null))),Jp(t,e),At(e),null;case 5:Wg(e);var s=oi(Il.current);if(n=e.type,t!==null&&e.stateNode!=null)ZE(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return At(e),null}if(t=oi(rr.current),Yc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[er]=e,r[El]=i,t=(e.mode&1)!==0,n){case"dialog":De("cancel",r),De("close",r);break;case"iframe":case"object":case"embed":De("load",r);break;case"video":case"audio":for(s=0;s<Ma.length;s++)De(Ma[s],r);break;case"source":De("error",r);break;case"img":case"image":case"link":De("error",r),De("load",r);break;case"details":De("toggle",r);break;case"input":G0(r,i),De("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},De("invalid",r);break;case"textarea":Y0(r,i),De("invalid",r)}Ip(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Qc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Qc(r.textContent,a,t),s=["children",""+a]):fl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&De("scroll",r)}switch(n){case"input":Bc(r),Q0(r,i,!0);break;case"textarea":Bc(r),X0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Gu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=kT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[er]=e,t[El]=r,JE(t,e,!1,!1),e.stateNode=t;e:{switch(o=bp(n,r),n){case"dialog":De("cancel",t),De("close",t),s=r;break;case"iframe":case"object":case"embed":De("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ma.length;s++)De(Ma[s],t);s=r;break;case"source":De("error",t),s=r;break;case"img":case"image":case"link":De("error",t),De("load",t),s=r;break;case"details":De("toggle",t),s=r;break;case"input":G0(t,r),s=xp(t,r),De("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=He({},r,{value:void 0}),De("invalid",t);break;case"textarea":Y0(t,r),s=Ep(t,r),De("invalid",t);break;default:s=r}Ip(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?PT(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&NT(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&pl(t,c):typeof c=="number"&&pl(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(fl.hasOwnProperty(i)?c!=null&&i==="onScroll"&&De("scroll",t):c!=null&&_g(t,i,c,o))}switch(n){case"input":Bc(t),Q0(t,r,!1);break;case"textarea":Bc(t),X0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+bs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?go(t,!!r.multiple,i,!1):r.defaultValue!=null&&go(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Gu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return At(e),null;case 6:if(t&&e.stateNode!=null)eS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=oi(Il.current),oi(rr.current),Yc(e)){if(r=e.stateNode,n=e.memoizedProps,r[er]=e,(i=r.nodeValue!==n)&&(t=un,t!==null))switch(t.tag){case 3:Qc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Qc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[er]=e,e.stateNode=r}return At(e),null;case 13:if(Ve(Be),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Le&&ln!==null&&e.mode&1&&!(e.flags&128))vE(),Ao(),e.flags|=98560,i=!1;else if(i=Yc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[er]=e}else Ao(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;At(e),i=!1}else zn!==null&&(om(zn),zn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Be.current&1?ct===0&&(ct=3):ry())),e.updateQueue!==null&&(e.flags|=4),At(e),null);case 4:return Ro(),Jp(t,e),t===null&&_l(e.stateNode.containerInfo),At(e),null;case 10:return Ug(e.type._context),At(e),null;case 17:return Zt(e.type)&&Qu(),At(e),null;case 19:if(Ve(Be),i=e.memoizedState,i===null)return At(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ka(i,!1);else{if(ct!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=nd(t),o!==null){for(e.flags|=128,ka(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Re(Be,Be.current&1|2),e.child}t=t.sibling}i.tail!==null&&tt()>Do&&(e.flags|=128,r=!0,ka(i,!1),e.lanes=4194304)}else{if(!r)if(t=nd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ka(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Le)return At(e),null}else 2*tt()-i.renderingStartTime>Do&&n!==1073741824&&(e.flags|=128,r=!0,ka(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=tt(),e.sibling=null,n=Be.current,Re(Be,r?n&1|2:n&1),e):(At(e),null);case 22:case 23:return ny(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?an&1073741824&&(At(e),e.subtreeFlags&6&&(e.flags|=8192)):At(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function OP(t,e){switch(Vg(e),e.tag){case 1:return Zt(e.type)&&Qu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ro(),Ve(Jt),Ve(Ft),Hg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Wg(e),null;case 13:if(Ve(Be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Ao()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ve(Be),null;case 4:return Ro(),null;case 10:return Ug(e.type._context),null;case 22:case 23:return ny(),null;case 24:return null;default:return null}}var Zc=!1,jt=!1,LP=typeof WeakSet=="function"?WeakSet:Set,Y=null;function ao(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Qe(t,e,r)}else n.current=null}function Zp(t,e,n){try{n()}catch(r){Qe(t,e,r)}}var Uw=!1;function FP(t,e){if(Vp=Hu,t=iE(),Dg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,d=0,h=0,f=t,p=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break t;if(p===n&&++d===s&&(a=o),p===i&&++h===r&&(c=o),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Op={focusedElem:t,selectionRange:n},Hu=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var T=w.memoizedProps,C=w.memoizedState,_=e.stateNode,v=_.getSnapshotBeforeUpdate(e.elementType===e.type?T:Un(e.type,T),C);_.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(R){Qe(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return w=Uw,Uw=!1,w}function Ya(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Zp(e,n,i)}s=s.next}while(s!==r)}}function Hd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function em(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function tS(t){var e=t.alternate;e!==null&&(t.alternate=null,tS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[er],delete e[El],delete e[Up],delete e[_P],delete e[TP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function nS(t){return t.tag===5||t.tag===3||t.tag===4}function Bw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function tm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Gu));else if(r!==4&&(t=t.child,t!==null))for(tm(t,e,n),t=t.sibling;t!==null;)tm(t,e,n),t=t.sibling}function nm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(nm(t,e,n),t=t.sibling;t!==null;)nm(t,e,n),t=t.sibling}var gt=null,Bn=!1;function Xr(t,e,n){for(n=n.child;n!==null;)rS(t,e,n),n=n.sibling}function rS(t,e,n){if(nr&&typeof nr.onCommitFiberUnmount=="function")try{nr.onCommitFiberUnmount(Od,n)}catch{}switch(n.tag){case 5:jt||ao(n,e);case 6:var r=gt,s=Bn;gt=null,Xr(t,e,n),gt=r,Bn=s,gt!==null&&(Bn?(t=gt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):gt.removeChild(n.stateNode));break;case 18:gt!==null&&(Bn?(t=gt,n=n.stateNode,t.nodeType===8?wf(t.parentNode,n):t.nodeType===1&&wf(t,n),vl(t)):wf(gt,n.stateNode));break;case 4:r=gt,s=Bn,gt=n.stateNode.containerInfo,Bn=!0,Xr(t,e,n),gt=r,Bn=s;break;case 0:case 11:case 14:case 15:if(!jt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Zp(n,e,o),s=s.next}while(s!==r)}Xr(t,e,n);break;case 1:if(!jt&&(ao(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Qe(n,e,a)}Xr(t,e,n);break;case 21:Xr(t,e,n);break;case 22:n.mode&1?(jt=(r=jt)||n.memoizedState!==null,Xr(t,e,n),jt=r):Xr(t,e,n);break;default:Xr(t,e,n)}}function zw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new LP),e.forEach(function(r){var s=GP.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ln(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:gt=a.stateNode,Bn=!1;break e;case 3:gt=a.stateNode.containerInfo,Bn=!0;break e;case 4:gt=a.stateNode.containerInfo,Bn=!0;break e}a=a.return}if(gt===null)throw Error(z(160));rS(i,o,s),gt=null,Bn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Qe(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sS(e,t),e=e.sibling}function sS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ln(e,t),Jn(t),r&4){try{Ya(3,t,t.return),Hd(3,t)}catch(T){Qe(t,t.return,T)}try{Ya(5,t,t.return)}catch(T){Qe(t,t.return,T)}}break;case 1:Ln(e,t),Jn(t),r&512&&n!==null&&ao(n,n.return);break;case 5:if(Ln(e,t),Jn(t),r&512&&n!==null&&ao(n,n.return),t.flags&32){var s=t.stateNode;try{pl(s,"")}catch(T){Qe(t,t.return,T)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&bT(s,i),bp(a,o);var d=bp(a,i);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?PT(s,f):h==="dangerouslySetInnerHTML"?NT(s,f):h==="children"?pl(s,f):_g(s,h,f,d)}switch(a){case"input":_p(s,i);break;case"textarea":CT(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?go(s,!!i.multiple,g,!1):p!==!!i.multiple&&(i.defaultValue!=null?go(s,!!i.multiple,i.defaultValue,!0):go(s,!!i.multiple,i.multiple?[]:"",!1))}s[El]=i}catch(T){Qe(t,t.return,T)}}break;case 6:if(Ln(e,t),Jn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(T){Qe(t,t.return,T)}}break;case 3:if(Ln(e,t),Jn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{vl(e.containerInfo)}catch(T){Qe(t,t.return,T)}break;case 4:Ln(e,t),Jn(t);break;case 13:Ln(e,t),Jn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ey=tt())),r&4&&zw(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(jt=(d=jt)||h,Ln(e,t),jt=d):Ln(e,t),Jn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(Y=t,h=t.child;h!==null;){for(f=Y=h;Y!==null;){switch(p=Y,g=p.child,p.tag){case 0:case 11:case 14:case 15:Ya(4,p,p.return);break;case 1:ao(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(T){Qe(r,n,T)}}break;case 5:ao(p,p.return);break;case 22:if(p.memoizedState!==null){Ww(f);continue}}g!==null?(g.return=p,Y=g):Ww(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=AT("display",o))}catch(T){Qe(t,t.return,T)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(T){Qe(t,t.return,T)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ln(e,t),Jn(t),r&4&&zw(t);break;case 21:break;default:Ln(e,t),Jn(t)}}function Jn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(nS(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(pl(s,""),r.flags&=-33);var i=Bw(t);nm(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Bw(t);tm(t,a,o);break;default:throw Error(z(161))}}catch(c){Qe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function UP(t,e,n){Y=t,iS(t)}function iS(t,e,n){for(var r=(t.mode&1)!==0;Y!==null;){var s=Y,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Zc;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||jt;a=Zc;var d=jt;if(Zc=o,(jt=c)&&!d)for(Y=s;Y!==null;)o=Y,c=o.child,o.tag===22&&o.memoizedState!==null?Hw(s):c!==null?(c.return=o,Y=c):Hw(s);for(;i!==null;)Y=i,iS(i),i=i.sibling;Y=s,Zc=a,jt=d}$w(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Y=i):$w(t)}}function $w(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:jt||Hd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!jt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Un(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Cw(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Cw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&vl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}jt||e.flags&512&&em(e)}catch(p){Qe(e,e.return,p)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function Ww(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function Hw(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Hd(4,e)}catch(c){Qe(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Qe(e,s,c)}}var i=e.return;try{em(e)}catch(c){Qe(e,i,c)}break;case 5:var o=e.return;try{em(e)}catch(c){Qe(e,o,c)}}}catch(c){Qe(e,e.return,c)}if(e===t){Y=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Y=a;break}Y=e.return}}var BP=Math.ceil,id=$r.ReactCurrentDispatcher,Jg=$r.ReactCurrentOwner,Cn=$r.ReactCurrentBatchConfig,we=0,ft=null,st=null,xt=0,an=0,lo=Vs(0),ct=0,Nl=null,Ti=0,qd=0,Zg=0,Xa=null,Gt=null,ey=0,Do=1/0,xr=null,od=!1,rm=null,ws=null,eu=!1,us=null,ad=0,Ja=0,sm=null,Eu=-1,Su=0;function Wt(){return we&6?tt():Eu!==-1?Eu:Eu=tt()}function xs(t){return t.mode&1?we&2&&xt!==0?xt&-xt:SP.transition!==null?(Su===0&&(Su=$T()),Su):(t=ke,t!==0||(t=window.event,t=t===void 0?16:YT(t.type)),t):1}function Wn(t,e,n,r){if(50<Ja)throw Ja=0,sm=null,Error(z(185));Jl(t,n,r),(!(we&2)||t!==ft)&&(t===ft&&(!(we&2)&&(qd|=n),ct===4&&ss(t,xt)),en(t,r),n===1&&we===0&&!(e.mode&1)&&(Do=tt()+500,zd&&Os()))}function en(t,e){var n=t.callbackNode;SA(t,e);var r=Wu(t,t===ft?xt:0);if(r===0)n!==null&&ew(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ew(n),e===1)t.tag===0?EP(qw.bind(null,t)):mE(qw.bind(null,t)),wP(function(){!(we&6)&&Os()}),n=null;else{switch(WT(r)){case 1:n=bg;break;case 4:n=BT;break;case 16:n=$u;break;case 536870912:n=zT;break;default:n=$u}n=fS(n,oS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function oS(t,e){if(Eu=-1,Su=0,we&6)throw Error(z(327));var n=t.callbackNode;if(_o()&&t.callbackNode!==n)return null;var r=Wu(t,t===ft?xt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ld(t,r);else{e=r;var s=we;we|=2;var i=lS();(ft!==t||xt!==e)&&(xr=null,Do=tt()+500,hi(t,e));do try{WP();break}catch(a){aS(t,a)}while(!0);Fg(),id.current=i,we=s,st!==null?e=0:(ft=null,xt=0,e=ct)}if(e!==0){if(e===2&&(s=Pp(t),s!==0&&(r=s,e=im(t,s))),e===1)throw n=Nl,hi(t,0),ss(t,r),en(t,tt()),n;if(e===6)ss(t,r);else{if(s=t.current.alternate,!(r&30)&&!zP(s)&&(e=ld(t,r),e===2&&(i=Pp(t),i!==0&&(r=i,e=im(t,i))),e===1))throw n=Nl,hi(t,0),ss(t,r),en(t,tt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:ti(t,Gt,xr);break;case 3:if(ss(t,r),(r&130023424)===r&&(e=ey+500-tt(),10<e)){if(Wu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Wt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Fp(ti.bind(null,t,Gt,xr),e);break}ti(t,Gt,xr);break;case 4:if(ss(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-$n(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=tt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*BP(r/1960))-r,10<r){t.timeoutHandle=Fp(ti.bind(null,t,Gt,xr),r);break}ti(t,Gt,xr);break;case 5:ti(t,Gt,xr);break;default:throw Error(z(329))}}}return en(t,tt()),t.callbackNode===n?oS.bind(null,t):null}function im(t,e){var n=Xa;return t.current.memoizedState.isDehydrated&&(hi(t,e).flags|=256),t=ld(t,e),t!==2&&(e=Gt,Gt=n,e!==null&&om(e)),t}function om(t){Gt===null?Gt=t:Gt.push.apply(Gt,t)}function zP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!qn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ss(t,e){for(e&=~Zg,e&=~qd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-$n(e),r=1<<n;t[n]=-1,e&=~r}}function qw(t){if(we&6)throw Error(z(327));_o();var e=Wu(t,0);if(!(e&1))return en(t,tt()),null;var n=ld(t,e);if(t.tag!==0&&n===2){var r=Pp(t);r!==0&&(e=r,n=im(t,r))}if(n===1)throw n=Nl,hi(t,0),ss(t,e),en(t,tt()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ti(t,Gt,xr),en(t,tt()),null}function ty(t,e){var n=we;we|=1;try{return t(e)}finally{we=n,we===0&&(Do=tt()+500,zd&&Os())}}function Ei(t){us!==null&&us.tag===0&&!(we&6)&&_o();var e=we;we|=1;var n=Cn.transition,r=ke;try{if(Cn.transition=null,ke=1,t)return t()}finally{ke=r,Cn.transition=n,we=e,!(we&6)&&Os()}}function ny(){an=lo.current,Ve(lo)}function hi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,vP(n)),st!==null)for(n=st.return;n!==null;){var r=n;switch(Vg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Qu();break;case 3:Ro(),Ve(Jt),Ve(Ft),Hg();break;case 5:Wg(r);break;case 4:Ro();break;case 13:Ve(Be);break;case 19:Ve(Be);break;case 10:Ug(r.type._context);break;case 22:case 23:ny()}n=n.return}if(ft=t,st=t=_s(t.current,null),xt=an=e,ct=0,Nl=null,Zg=qd=Ti=0,Gt=Xa=null,ii!==null){for(e=0;e<ii.length;e++)if(n=ii[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ii=null}return t}function aS(t,e){do{var n=st;try{if(Fg(),xu.current=sd,rd){for(var r=$e.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}rd=!1}if(_i=0,ht=lt=$e=null,Qa=!1,bl=0,Jg.current=null,n===null||n.return===null){ct=1,Nl=e,st=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=xt,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=jw(o);if(g!==null){g.flags&=-257,Dw(g,o,a,i,e),g.mode&1&&Rw(i,d,e),e=g,c=d;var w=e.updateQueue;if(w===null){var T=new Set;T.add(c),e.updateQueue=T}else w.add(c);break e}else{if(!(e&1)){Rw(i,d,e),ry();break e}c=Error(z(426))}}else if(Le&&a.mode&1){var C=jw(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Dw(C,o,a,i,e),Og(jo(c,a));break e}}i=c=jo(c,a),ct!==4&&(ct=2),Xa===null?Xa=[i]:Xa.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=WE(i,c,e);bw(i,_);break e;case 1:a=c;var v=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ws===null||!ws.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=HE(i,a,e);bw(i,R);break e}}i=i.return}while(i!==null)}uS(n)}catch(D){e=D,st===n&&n!==null&&(st=n=n.return);continue}break}while(!0)}function lS(){var t=id.current;return id.current=sd,t===null?sd:t}function ry(){(ct===0||ct===3||ct===2)&&(ct=4),ft===null||!(Ti&268435455)&&!(qd&268435455)||ss(ft,xt)}function ld(t,e){var n=we;we|=2;var r=lS();(ft!==t||xt!==e)&&(xr=null,hi(t,e));do try{$P();break}catch(s){aS(t,s)}while(!0);if(Fg(),we=n,id.current=r,st!==null)throw Error(z(261));return ft=null,xt=0,ct}function $P(){for(;st!==null;)cS(st)}function WP(){for(;st!==null&&!mA();)cS(st)}function cS(t){var e=hS(t.alternate,t,an);t.memoizedProps=t.pendingProps,e===null?uS(t):st=e,Jg.current=null}function uS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=OP(n,e),n!==null){n.flags&=32767,st=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ct=6,st=null;return}}else if(n=VP(n,e,an),n!==null){st=n;return}if(e=e.sibling,e!==null){st=e;return}st=e=t}while(e!==null);ct===0&&(ct=5)}function ti(t,e,n){var r=ke,s=Cn.transition;try{Cn.transition=null,ke=1,HP(t,e,n,r)}finally{Cn.transition=s,ke=r}return null}function HP(t,e,n,r){do _o();while(us!==null);if(we&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(IA(t,i),t===ft&&(st=ft=null,xt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||eu||(eu=!0,fS($u,function(){return _o(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Cn.transition,Cn.transition=null;var o=ke;ke=1;var a=we;we|=4,Jg.current=null,FP(t,n),sS(n,t),dP(Op),Hu=!!Vp,Op=Vp=null,t.current=n,UP(n),gA(),we=a,ke=o,Cn.transition=i}else t.current=n;if(eu&&(eu=!1,us=t,ad=s),i=t.pendingLanes,i===0&&(ws=null),wA(n.stateNode),en(t,tt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(od)throw od=!1,t=rm,rm=null,t;return ad&1&&t.tag!==0&&_o(),i=t.pendingLanes,i&1?t===sm?Ja++:(Ja=0,sm=t):Ja=0,Os(),null}function _o(){if(us!==null){var t=WT(ad),e=Cn.transition,n=ke;try{if(Cn.transition=null,ke=16>t?16:t,us===null)var r=!1;else{if(t=us,us=null,ad=0,we&6)throw Error(z(331));var s=we;for(we|=4,Y=t.current;Y!==null;){var i=Y,o=i.child;if(Y.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var d=a[c];for(Y=d;Y!==null;){var h=Y;switch(h.tag){case 0:case 11:case 15:Ya(8,h,i)}var f=h.child;if(f!==null)f.return=h,Y=f;else for(;Y!==null;){h=Y;var p=h.sibling,g=h.return;if(tS(h),h===d){Y=null;break}if(p!==null){p.return=g,Y=p;break}Y=g}}}var w=i.alternate;if(w!==null){var T=w.child;if(T!==null){w.child=null;do{var C=T.sibling;T.sibling=null,T=C}while(T!==null)}}Y=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Y=o;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ya(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,Y=_;break e}Y=i.return}}var v=t.current;for(Y=v;Y!==null;){o=Y;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Y=x;else e:for(o=v;Y!==null;){if(a=Y,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Hd(9,a)}}catch(D){Qe(a,a.return,D)}if(a===o){Y=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,Y=R;break e}Y=a.return}}if(we=s,Os(),nr&&typeof nr.onPostCommitFiberRoot=="function")try{nr.onPostCommitFiberRoot(Od,t)}catch{}r=!0}return r}finally{ke=n,Cn.transition=e}}return!1}function Kw(t,e,n){e=jo(n,e),e=WE(t,e,1),t=vs(t,e,1),e=Wt(),t!==null&&(Jl(t,1,e),en(t,e))}function Qe(t,e,n){if(t.tag===3)Kw(t,t,n);else for(;e!==null;){if(e.tag===3){Kw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ws===null||!ws.has(r))){t=jo(n,t),t=HE(e,t,1),e=vs(e,t,1),t=Wt(),e!==null&&(Jl(e,1,t),en(e,t));break}}e=e.return}}function qP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Wt(),t.pingedLanes|=t.suspendedLanes&n,ft===t&&(xt&n)===n&&(ct===4||ct===3&&(xt&130023424)===xt&&500>tt()-ey?hi(t,0):Zg|=n),en(t,e)}function dS(t,e){e===0&&(t.mode&1?(e=Wc,Wc<<=1,!(Wc&130023424)&&(Wc=4194304)):e=1);var n=Wt();t=Mr(t,e),t!==null&&(Jl(t,e,n),en(t,n))}function KP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),dS(t,n)}function GP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),dS(t,n)}var hS;hS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Jt.current)Yt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Yt=!1,MP(t,e,n);Yt=!!(t.flags&131072)}else Yt=!1,Le&&e.flags&1048576&&gE(e,Ju,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Tu(t,e),t=e.pendingProps;var s=No(e,Ft.current);xo(e,n),s=Kg(null,e,r,t,s,n);var i=Gg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zt(r)?(i=!0,Yu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,zg(e),s.updater=Wd,e.stateNode=s,s._reactInternals=e,qp(e,r,t,n),e=Qp(null,e,r,!0,i,n)):(e.tag=0,Le&&i&&Mg(e),zt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Tu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=YP(r),t=Un(r,t),s){case 0:e=Gp(null,e,r,t,n);break e;case 1:e=Ow(null,e,r,t,n);break e;case 11:e=Mw(null,e,r,t,n);break e;case 14:e=Vw(null,e,r,Un(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Un(r,s),Gp(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Un(r,s),Ow(t,e,r,s,n);case 3:e:{if(QE(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,TE(t,e),td(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=jo(Error(z(423)),e),e=Lw(t,e,r,n,s);break e}else if(r!==s){s=jo(Error(z(424)),e),e=Lw(t,e,r,n,s);break e}else for(ln=ys(e.stateNode.containerInfo.firstChild),un=e,Le=!0,zn=null,n=xE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ao(),r===s){e=Vr(t,e,n);break e}zt(t,e,r,n)}e=e.child}return e;case 5:return EE(e),t===null&&$p(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Lp(r,s)?o=null:i!==null&&Lp(r,i)&&(e.flags|=32),GE(t,e),zt(t,e,o,n),e.child;case 6:return t===null&&$p(e),null;case 13:return YE(t,e,n);case 4:return $g(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Po(e,null,r,n):zt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Un(r,s),Mw(t,e,r,s,n);case 7:return zt(t,e,e.pendingProps,n),e.child;case 8:return zt(t,e,e.pendingProps.children,n),e.child;case 12:return zt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Re(Zu,r._currentValue),r._currentValue=o,i!==null)if(qn(i.value,o)){if(i.children===s.children&&!Jt.current){e=Vr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=kr(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Wp(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Wp(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}zt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,xo(e,n),s=An(s),r=r(s),e.flags|=1,zt(t,e,r,n),e.child;case 14:return r=e.type,s=Un(r,e.pendingProps),s=Un(r.type,s),Vw(t,e,r,s,n);case 15:return qE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Un(r,s),Tu(t,e),e.tag=1,Zt(r)?(t=!0,Yu(e)):t=!1,xo(e,n),$E(e,r,s),qp(e,r,s,n),Qp(null,e,r,!0,t,n);case 19:return XE(t,e,n);case 22:return KE(t,e,n)}throw Error(z(156,e.tag))};function fS(t,e){return UT(t,e)}function QP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(t,e,n,r){return new QP(t,e,n,r)}function sy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function YP(t){if(typeof t=="function")return sy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Eg)return 11;if(t===Sg)return 14}return 2}function _s(t,e){var n=t.alternate;return n===null?(n=Sn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Iu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")sy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ji:return fi(n.children,s,i,e);case Tg:o=8,s|=8;break;case gp:return t=Sn(12,n,e,s|2),t.elementType=gp,t.lanes=i,t;case yp:return t=Sn(13,n,e,s),t.elementType=yp,t.lanes=i,t;case vp:return t=Sn(19,n,e,s),t.elementType=vp,t.lanes=i,t;case ET:return Kd(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _T:o=10;break e;case TT:o=9;break e;case Eg:o=11;break e;case Sg:o=14;break e;case ts:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Sn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function fi(t,e,n,r){return t=Sn(7,t,r,e),t.lanes=n,t}function Kd(t,e,n,r){return t=Sn(22,t,r,e),t.elementType=ET,t.lanes=n,t.stateNode={isHidden:!1},t}function Cf(t,e,n){return t=Sn(6,t,null,e),t.lanes=n,t}function kf(t,e,n){return e=Sn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function XP(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lf(0),this.expirationTimes=lf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lf(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function iy(t,e,n,r,s,i,o,a,c){return t=new XP(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Sn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zg(i),t}function JP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function pS(t){if(!t)return Cs;t=t._reactInternals;e:{if(Di(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Zt(n))return pE(t,n,e)}return e}function mS(t,e,n,r,s,i,o,a,c){return t=iy(n,r,!0,t,s,i,o,a,c),t.context=pS(null),n=t.current,r=Wt(),s=xs(n),i=kr(r,s),i.callback=e??null,vs(n,i,s),t.current.lanes=s,Jl(t,s,r),en(t,r),t}function Gd(t,e,n,r){var s=e.current,i=Wt(),o=xs(s);return n=pS(n),e.context===null?e.context=n:e.pendingContext=n,e=kr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=vs(s,e,o),t!==null&&(Wn(t,s,o,i),wu(t,s,o)),o}function cd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Gw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function oy(t,e){Gw(t,e),(t=t.alternate)&&Gw(t,e)}function ZP(){return null}var gS=typeof reportError=="function"?reportError:function(t){console.error(t)};function ay(t){this._internalRoot=t}Qd.prototype.render=ay.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Gd(t,e,null,null)};Qd.prototype.unmount=ay.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ei(function(){Gd(null,t,null,null)}),e[Dr]=null}};function Qd(t){this._internalRoot=t}Qd.prototype.unstable_scheduleHydration=function(t){if(t){var e=KT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<rs.length&&e!==0&&e<rs[n].priority;n++);rs.splice(n,0,t),n===0&&QT(t)}};function ly(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Qw(){}function eR(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=cd(o);i.call(d)}}var o=mS(e,r,t,0,null,!1,!1,"",Qw);return t._reactRootContainer=o,t[Dr]=o.current,_l(t.nodeType===8?t.parentNode:t),Ei(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var d=cd(c);a.call(d)}}var c=iy(t,0,!1,null,null,!1,!1,"",Qw);return t._reactRootContainer=c,t[Dr]=c.current,_l(t.nodeType===8?t.parentNode:t),Ei(function(){Gd(e,c,n,r)}),c}function Xd(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=cd(o);a.call(c)}}Gd(e,o,t,s)}else o=eR(n,e,t,s,r);return cd(o)}HT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Da(e.pendingLanes);n!==0&&(Cg(e,n|1),en(e,tt()),!(we&6)&&(Do=tt()+500,Os()))}break;case 13:Ei(function(){var r=Mr(t,1);if(r!==null){var s=Wt();Wn(r,t,1,s)}}),oy(t,1)}};kg=function(t){if(t.tag===13){var e=Mr(t,134217728);if(e!==null){var n=Wt();Wn(e,t,134217728,n)}oy(t,134217728)}};qT=function(t){if(t.tag===13){var e=xs(t),n=Mr(t,e);if(n!==null){var r=Wt();Wn(n,t,e,r)}oy(t,e)}};KT=function(){return ke};GT=function(t,e){var n=ke;try{return ke=t,e()}finally{ke=n}};kp=function(t,e,n){switch(e){case"input":if(_p(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Bd(r);if(!s)throw Error(z(90));IT(r),_p(r,s)}}}break;case"textarea":CT(t,n);break;case"select":e=n.value,e!=null&&go(t,!!n.multiple,e,!1)}};DT=ty;MT=Ei;var tR={usingClientEntryPoint:!1,Events:[ec,no,Bd,RT,jT,ty]},Na={findFiberByHostInstance:si,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nR={bundleType:Na.bundleType,version:Na.version,rendererPackageName:Na.rendererPackageName,rendererConfig:Na.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$r.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=LT(t),t===null?null:t.stateNode},findFiberByHostInstance:Na.findFiberByHostInstance||ZP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tu.isDisabled&&tu.supportsFiber)try{Od=tu.inject(nR),nr=tu}catch{}}gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tR;gn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ly(e))throw Error(z(200));return JP(t,e,null,n)};gn.createRoot=function(t,e){if(!ly(t))throw Error(z(299));var n=!1,r="",s=gS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=iy(t,1,!1,null,null,n,!1,r,s),t[Dr]=e.current,_l(t.nodeType===8?t.parentNode:t),new ay(e)};gn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=LT(e),t=t===null?null:t.stateNode,t};gn.flushSync=function(t){return Ei(t)};gn.hydrate=function(t,e,n){if(!Yd(e))throw Error(z(200));return Xd(null,t,e,!0,n)};gn.hydrateRoot=function(t,e,n){if(!ly(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=gS;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=mS(e,null,t,1,n??null,s,!1,i,o),t[Dr]=e.current,_l(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Qd(e)};gn.render=function(t,e,n){if(!Yd(e))throw Error(z(200));return Xd(null,t,e,!1,n)};gn.unmountComponentAtNode=function(t){if(!Yd(t))throw Error(z(40));return t._reactRootContainer?(Ei(function(){Xd(null,null,t,!1,function(){t._reactRootContainer=null,t[Dr]=null})}),!0):!1};gn.unstable_batchedUpdates=ty;gn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Yd(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Xd(t,e,n,!1,r)};gn.version="18.3.1-next-f1338f8080-20240426";function yS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yS)}catch(t){console.error(t)}}yS(),yT.exports=gn;var rR=yT.exports,Yw=rR;pp.createRoot=Yw.createRoot,pp.hydrateRoot=Yw.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Al(){return Al=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Al.apply(this,arguments)}var ds;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ds||(ds={}));const Xw="popstate";function sR(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:c=""}=Mi(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),am("",{pathname:o,search:a,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let c=s.location.href,d=c.indexOf("#");a=d===-1?c:c.slice(0,d)}return a+"#"+(typeof i=="string"?i:ud(i))}function r(s,i){Jd(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return oR(e,n,r,t)}function We(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Jd(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function iR(){return Math.random().toString(36).substr(2,8)}function Jw(t,e){return{usr:t.state,key:t.key,idx:e}}function am(t,e,n,r){return n===void 0&&(n=null),Al({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Mi(e):e,{state:n,key:e&&e.key||r||iR()})}function ud(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Mi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function oR(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=ds.Pop,c=null,d=h();d==null&&(d=0,o.replaceState(Al({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=ds.Pop;let C=h(),_=C==null?null:C-d;d=C,c&&c({action:a,location:T.location,delta:_})}function p(C,_){a=ds.Push;let v=am(T.location,C,_);n&&n(v,C),d=h()+1;let x=Jw(v,d),R=T.createHref(v);try{o.pushState(x,"",R)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(R)}i&&c&&c({action:a,location:T.location,delta:1})}function g(C,_){a=ds.Replace;let v=am(T.location,C,_);n&&n(v,C),d=h();let x=Jw(v,d),R=T.createHref(v);o.replaceState(x,"",R),i&&c&&c({action:a,location:T.location,delta:0})}function w(C){let _=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof C=="string"?C:ud(C);return v=v.replace(/ $/,"%20"),We(_,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,_)}let T={get action(){return a},get location(){return t(s,o)},listen(C){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Xw,f),c=C,()=>{s.removeEventListener(Xw,f),c=null}},createHref(C){return e(s,C)},createURL:w,encodeLocation(C){let _=w(C);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:p,replace:g,go(C){return o.go(C)}};return T}var Zw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Zw||(Zw={}));function aR(t,e,n){return n===void 0&&(n="/"),lR(t,e,n)}function lR(t,e,n,r){let s=typeof e=="string"?Mi(e):e,i=Mo(s.pathname||"/",n);if(i==null)return null;let o=vS(t);cR(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let d=xR(i);a=vR(o[c],d)}return a}function vS(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(We(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Ts([r,c.relativePath]),h=n.concat(c);i.children&&i.children.length>0&&(We(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),vS(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:gR(d,i.index),routesMeta:h})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of wS(i.path))s(i,o,c)}),e}function wS(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=wS(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function cR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:yR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const uR=/^:[\w-]+$/,dR=3,hR=2,fR=1,pR=10,mR=-2,ex=t=>t==="*";function gR(t,e){let n=t.split("/"),r=n.length;return n.some(ex)&&(r+=mR),e&&(r+=hR),n.filter(s=>!ex(s)).reduce((s,i)=>s+(uR.test(i)?dR:i===""?fR:pR),r)}function yR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function vR(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],d=a===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=lm({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),p=c.route;if(!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Ts([i,f.pathname]),pathnameBase:IR(Ts([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=Ts([i,f.pathnameBase]))}return o}function lm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=wR(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((d,h,f)=>{let{paramName:p,isOptional:g}=h;if(p==="*"){let T=a[f]||"";o=i.slice(0,i.length-T.length).replace(/(.)\/+$/,"$1")}const w=a[f];return g&&!w?d[p]=void 0:d[p]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function wR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Jd(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function xR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Jd(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Mo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const _R=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,TR=t=>_R.test(t);function ER(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Mi(t):t,i;if(n)if(TR(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Jd(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=tx(n.substring(1),"/"):i=tx(n,e)}else i=e;return{pathname:i,search:bR(r),hash:CR(s)}}function tx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Nf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function SR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function cy(t,e){let n=SR(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function uy(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Mi(t):(s=Al({},t),We(!s.pathname||!s.pathname.includes("?"),Nf("?","pathname","search",s)),We(!s.pathname||!s.pathname.includes("#"),Nf("#","pathname","hash",s)),We(!s.search||!s.search.includes("#"),Nf("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}a=f>=0?e[f]:"/"}let c=ER(s,a),d=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const Ts=t=>t.join("/").replace(/\/\/+/g,"/"),IR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),bR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,CR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function kR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const xS=["post","put","patch","delete"];new Set(xS);const NR=["get",...xS];new Set(NR);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pl(){return Pl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pl.apply(this,arguments)}const Zd=b.createContext(null),_S=b.createContext(null),Wr=b.createContext(null),eh=b.createContext(null),Hr=b.createContext({outlet:null,matches:[],isDataRoute:!1}),TS=b.createContext(null);function AR(t,e){let{relative:n}=e===void 0?{}:e;Jo()||We(!1);let{basename:r,navigator:s}=b.useContext(Wr),{hash:i,pathname:o,search:a}=th(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Ts([r,o])),s.createHref({pathname:c,search:a,hash:i})}function Jo(){return b.useContext(eh)!=null}function hr(){return Jo()||We(!1),b.useContext(eh).location}function ES(t){b.useContext(Wr).static||b.useLayoutEffect(t)}function Ue(){let{isDataRoute:t}=b.useContext(Hr);return t?$R():PR()}function PR(){Jo()||We(!1);let t=b.useContext(Zd),{basename:e,future:n,navigator:r}=b.useContext(Wr),{matches:s}=b.useContext(Hr),{pathname:i}=hr(),o=JSON.stringify(cy(s,n.v7_relativeSplatPath)),a=b.useRef(!1);return ES(()=>{a.current=!0}),b.useCallback(function(d,h){if(h===void 0&&(h={}),!a.current)return;if(typeof d=="number"){r.go(d);return}let f=uy(d,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ts([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,i,t])}function dy(){let{matches:t}=b.useContext(Hr),e=t[t.length-1];return e?e.params:{}}function th(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=b.useContext(Wr),{matches:s}=b.useContext(Hr),{pathname:i}=hr(),o=JSON.stringify(cy(s,r.v7_relativeSplatPath));return b.useMemo(()=>uy(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function RR(t,e){return jR(t,e)}function jR(t,e,n,r){Jo()||We(!1);let{navigator:s}=b.useContext(Wr),{matches:i}=b.useContext(Hr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=hr(),h;if(e){var f;let C=typeof e=="string"?Mi(e):e;c==="/"||(f=C.pathname)!=null&&f.startsWith(c)||We(!1),h=C}else h=d;let p=h.pathname||"/",g=p;if(c!=="/"){let C=c.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(C.length).join("/")}let w=aR(t,{pathname:g}),T=LR(w&&w.map(C=>Object.assign({},C,{params:Object.assign({},a,C.params),pathname:Ts([c,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?c:Ts([c,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),i,n,r);return e&&T?b.createElement(eh.Provider,{value:{location:Pl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:ds.Pop}},T):T}function DR(){let t=zR(),e=kR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:s},n):null,null)}const MR=b.createElement(DR,null);class VR extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(Hr.Provider,{value:this.props.routeContext},b.createElement(TS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function OR(t){let{routeContext:e,match:n,children:r}=t,s=b.useContext(Zd);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Hr.Provider,{value:e},r)}function LR(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||We(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:p,errors:g}=n,w=f.route.loader&&p[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||w){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,f,p)=>{let g,w=!1,T=null,C=null;n&&(g=a&&f.route.id?a[f.route.id]:void 0,T=f.route.errorElement||MR,c&&(d<0&&p===0?(WR("route-fallback"),w=!0,C=null):d===p&&(w=!0,C=f.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,p+1)),v=()=>{let x;return g?x=T:w?x=C:f.route.Component?x=b.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=h,b.createElement(OR,{match:f,routeContext:{outlet:h,matches:_,isDataRoute:n!=null},children:x})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?b.createElement(VR,{location:n.location,revalidation:n.revalidation,component:T,error:g,children:v(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):v()},null)}var SS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(SS||{}),IS=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(IS||{});function FR(t){let e=b.useContext(Zd);return e||We(!1),e}function UR(t){let e=b.useContext(_S);return e||We(!1),e}function BR(t){let e=b.useContext(Hr);return e||We(!1),e}function bS(t){let e=BR(),n=e.matches[e.matches.length-1];return n.route.id||We(!1),n.route.id}function zR(){var t;let e=b.useContext(TS),n=UR(),r=bS();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function $R(){let{router:t}=FR(SS.UseNavigateStable),e=bS(IS.UseNavigateStable),n=b.useRef(!1);return ES(()=>{n.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Pl({fromRouteId:e},i)))},[t,e])}const nx={};function WR(t,e,n){nx[t]||(nx[t]=!0)}function HR(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function qR(t){let{to:e,replace:n,state:r,relative:s}=t;Jo()||We(!1);let{future:i,static:o}=b.useContext(Wr),{matches:a}=b.useContext(Hr),{pathname:c}=hr(),d=Ue(),h=uy(e,cy(a,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(h);return b.useEffect(()=>d(JSON.parse(f),{replace:n,state:r,relative:s}),[d,f,s,n,r]),null}function Je(t){We(!1)}function KR(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ds.Pop,navigator:i,static:o=!1,future:a}=t;Jo()&&We(!1);let c=e.replace(/^\/*/,"/"),d=b.useMemo(()=>({basename:c,navigator:i,static:o,future:Pl({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=Mi(r));let{pathname:h="/",search:f="",hash:p="",state:g=null,key:w="default"}=r,T=b.useMemo(()=>{let C=Mo(h,c);return C==null?null:{location:{pathname:C,search:f,hash:p,state:g,key:w},navigationType:s}},[c,h,f,p,g,w,s]);return T==null?null:b.createElement(Wr.Provider,{value:d},b.createElement(eh.Provider,{children:n,value:T}))}function GR(t){let{children:e,location:n}=t;return RR(cm(e),n)}new Promise(()=>{});function cm(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,s)=>{if(!b.isValidElement(r))return;let i=[...e,s];if(r.type===b.Fragment){n.push.apply(n,cm(r.props.children,i));return}r.type!==Je&&We(!1),!r.props.index||!r.props.children||We(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=cm(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dd(){return dd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dd.apply(this,arguments)}function CS(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function QR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function YR(t,e){return t.button===0&&(!e||e==="_self")&&!QR(t)}const XR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],JR=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],ZR="6";try{window.__reactRouterVersion=ZR}catch{}const e4=b.createContext({isTransitioning:!1}),t4="startTransition",rx=qN[t4];function n4(t){let{basename:e,children:n,future:r,window:s}=t,i=b.useRef();i.current==null&&(i.current=sR({window:s,v5Compat:!0}));let o=i.current,[a,c]=b.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},h=b.useCallback(f=>{d&&rx?rx(()=>c(f)):c(f)},[c,d]);return b.useLayoutEffect(()=>o.listen(h),[o,h]),b.useEffect(()=>HR(r),[r]),b.createElement(KR,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const r4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",s4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hs=b.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:c,to:d,preventScrollReset:h,viewTransition:f}=e,p=CS(e,XR),{basename:g}=b.useContext(Wr),w,T=!1;if(typeof d=="string"&&s4.test(d)&&(w=d,r4))try{let x=new URL(window.location.href),R=d.startsWith("//")?new URL(x.protocol+d):new URL(d),D=Mo(R.pathname,g);R.origin===x.origin&&D!=null?d=D+R.search+R.hash:T=!0}catch{}let C=AR(d,{relative:s}),_=o4(d,{replace:o,state:a,target:c,preventScrollReset:h,relative:s,viewTransition:f});function v(x){r&&r(x),x.defaultPrevented||_(x)}return b.createElement("a",dd({},p,{href:w||C,onClick:T||i?r:v,ref:n,target:c}))}),To=b.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:a,to:c,viewTransition:d,children:h}=e,f=CS(e,JR),p=th(c,{relative:f.relative}),g=hr(),w=b.useContext(_S),{navigator:T,basename:C}=b.useContext(Wr),_=w!=null&&a4(p)&&d===!0,v=T.encodeLocation?T.encodeLocation(p).pathname:p.pathname,x=g.pathname,R=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;s||(x=x.toLowerCase(),R=R?R.toLowerCase():null,v=v.toLowerCase()),R&&C&&(R=Mo(R,C)||R);const D=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let V=x===v||!o&&x.startsWith(v)&&x.charAt(D)==="/",S=R!=null&&(R===v||!o&&R.startsWith(v)&&R.charAt(v.length)==="/"),E={isActive:V,isPending:S,isTransitioning:_},N=V?r:void 0,I;typeof i=="function"?I=i(E):I=[i,V?"active":null,S?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let P=typeof a=="function"?a(E):a;return b.createElement(hs,dd({},f,{"aria-current":N,className:I,ref:n,style:P,to:c,viewTransition:d}),typeof h=="function"?h(E):h)});var um;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(um||(um={}));var sx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(sx||(sx={}));function i4(t){let e=b.useContext(Zd);return e||We(!1),e}function o4(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,c=Ue(),d=hr(),h=th(t,{relative:o});return b.useCallback(f=>{if(YR(f,n)){f.preventDefault();let p=r!==void 0?r:ud(d)===ud(h);c(t,{replace:p,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[d,c,h,r,s,n,t,i,o,a])}function a4(t,e){e===void 0&&(e={});let n=b.useContext(e4);n==null&&We(!1);let{basename:r}=i4(um.useViewTransitionState),s=th(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Mo(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Mo(n.nextLocation.pathname,r)||n.nextLocation.pathname;return lm(s.pathname,o)!=null||lm(s.pathname,i)!=null}const In=({className:t})=>l.jsx("svg",{viewBox:"0 0 16 15",width:"16",height:"15",className:t,children:l.jsx("path",{fill:"currentColor",d:"M10.91 3.316l-4.243 4.242-2.122-2.121-1.414 1.414 3.536 3.535 5.657-5.657-1.414-1.414z"})}),pi=({className:t})=>l.jsx("svg",{viewBox:"0 0 16 15",width:"16",height:"15",className:t,children:l.jsx("path",{fill:"currentColor",d:"M15.01 3.316l-4.243 4.242-1.414-1.414 3.536-3.535-1.414-1.414-4.95 4.95L2.828 4.732l-1.414 1.414 3.536 3.535L15.01 3.316zm-4.95 4.95l-1.414 1.414-3.536-3.535-1.414 1.414 4.95 4.95 1.414-1.414-1.414-1.414z"})}),kS=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M12 7a2 2 0 1 0-.001-4.001A2 2 0 0 0 12 7zm0 2a2 2 0 1 0-.001 3.999A2 2 0 0 0 12 9zm0 6a2 2 0 1 0-.001 3.999A2 2 0 0 0 12 15z"})}),Si=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M15.5 14h-.79l-.28-.27a6.5 6.5 0 0 0 1.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 0 0-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 0 0 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})}),NS=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"})}),l4=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"})}),c4=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.49 6-3.31 6-6.72h-1.7z"})}),u4=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})}),Nr=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})}),AS=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M17.77 3.77L16 2 6 12l10 10 1.77-1.77L9.54 12z"})}),ur=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.02.74-.25 1.02l-2.2 2.2z"})}),hy=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"})}),Ii=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"})}),d4=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M7 10l5 5 5-5H7z"})}),PS=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm-1.5-5h3v-2h-3v2zm0-4h3V7h-3v4z"})}),RS=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),dm=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})}),ix=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M11.5 9H13v6h-1.5zM9 9H6c-.6 0-1 .5-1 1v4c0 .5.4 1 1 1h3c.6 0 1-.5 1-1v-2H8.5v1.5h-2v-3H10V10c0-.5-.4-1-1-1zm10 1.5V9h-4.5v6H16v-2h2v-1.5h-2v-1z"})}),hm=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6H6zm7 7V3.5L18.5 9H13z"})}),h4=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"})}),fm=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4H12.65zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"})}),nh=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"})}),jS=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})}),f4=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"})}),p4=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"})}),m4=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),DS=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"})}),g4=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M21 6.5l-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18V6.5zM3.27 2L2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.55-.18L19.73 21 21 19.73 3.27 2z"})}),pm=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.49 6-3.31 6-6.72h-1.7z"})}),MS=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-1.27.89-2.67.89-4.18zm-2.88 4.67l-1.28-1.28c-.62.27-1.31.42-2.04.42-2.76 0-5-2.24-5-5h-1.7c0 2.97 2.16 5.43 5 5.91V21h1.7v-3.09c.69-.13 1.35-.39 1.96-.75l-1.68-1.68c-.12.02-.24.03-.36.03zm-7.3-1.62l1.53 1.53c-.31-.56-.53-1.18-.61-1.84H5.1c0 2.09.81 3.98 2.16 5.4l1.22-1.22c-.63-.8-1.03-1.81-1.06-2.91zm10.22-3.47L4.27 2 3 3.27l4.02 4.02c0 .24-.02.48-.02.72v1.98h1.7v-1.98c0-.24.02-.48.05-.72l1.62 1.62v.08c0 1.66 1.34 3 3 3 .73 0 1.4-.27 1.93-.69l1.45 1.45c-.83.62-1.83 1.01-2.94 1.01-2.21 0-4-1.79-4-4V7.27l4.01 4.01c.01 0 .01.01.01.01z"})}),y4=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M20 4h-3.17L15 2H9L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-5 11.5V13H9v2.5L5.5 12 9 8.5V11h6V8.5l3.5 3.5-3.5 3.5z"})}),VS=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M22 6.98V16c0 1.1-.9 2-2 2H6l-4 4V4c0-1.1.9-2 2-2h10.1C12.05 2.54 12 3.25 12 4c0 2.21 1.79 4 4 4 .75 0 1.46-.22 2.09-.59L22 6.98zM16 8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"})}),OS=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})}),LS=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M3 11h8V3H3v8zm2-6h4v4H5V5zM3 21h8v-8H3v8zm2-6h4v4H5v-4zM13 3v8h8V3h-8zm6 6h-4V5h4v4zM13 21h8v-8h-8v8zm2-6h4v4h-4v-4z"})}),v4=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),w4=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M10 21v-2H5v-5H3v7h7zm-2-9H3V5h7V3H3v7h5zm9 9h-7v2h7v-7h-2v5zm0-16h-7v2h5v5h2V3z"})}),x4=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"})}),_4=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M2 20h20v-4H2v4zm2-3h2v2H4v-2zM2 4v4h20V4H2zm4 3H4V5h2v2zm-4 7h20v-4H2v4zm2-3h2v2H4v-2z"})}),Zo=(t=1024)=>{const[e,n]=b.useState(window.innerWidth>=t);return b.useEffect(()=>{const r=()=>{n(window.innerWidth>=t)};return window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}},[t]),e};var ox={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},T4=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},US={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|d>>6,g=d&63;c||(g=64,o||(p=64)),r.push(n[h],n[f],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(FS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):T4(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||d==null||f==null)throw new E4;const p=i<<2|a>>4;if(r.push(p),d!==64){const g=a<<4&240|d>>2;if(r.push(g),f!==64){const w=d<<6&192|f;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class E4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const S4=function(t){const e=FS(t);return US.encodeByteArray(e,!0)},hd=function(t){return S4(t).replace(/\./g,"")},BS=function(t){try{return US.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=()=>I4().__FIREBASE_DEFAULTS__,C4=()=>{if(typeof process>"u"||typeof ox>"u")return;const t=ox.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},k4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&BS(t[1]);return e&&JSON.parse(e)},rh=()=>{try{return b4()||C4()||k4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},zS=t=>{var e,n;return(n=(e=rh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},N4=t=>{const e=zS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},$S=()=>{var t;return(t=rh())===null||t===void 0?void 0:t.config},WS=t=>{var e;return(e=rh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[hd(JSON.stringify(n)),hd(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function R4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ut())}function j4(){var t;const e=(t=rh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function D4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function HS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function M4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function V4(){const t=Ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function O4(){return!j4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fy(){try{return typeof indexedDB=="object"}catch{return!1}}function py(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function qS(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4="FirebaseError";class Qn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=L4,Object.setPrototypeOf(this,Qn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ls.prototype.create)}}class Ls{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?F4(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Qn(s,a,r)}}function F4(t,e){return t.replace(U4,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const U4=/\{\$([^}]+)}/g;function B4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(ax(i)&&ax(o)){if(!Vo(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function ax(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Va(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Oa(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function z4(t,e){const n=new $4(t,e);return n.subscribe.bind(n)}class $4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");W4(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Af),s.error===void 0&&(s.error=Af),s.complete===void 0&&(s.complete=Af);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function W4(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Af(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4=1e3,q4=2,K4=4*60*60*1e3,G4=.5;function lx(t,e=H4,n=q4){const r=e*Math.pow(n,t),s=Math.round(G4*r*(Math.random()-.5)*2);return Math.min(K4,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(t){return t&&t._delegate?t._delegate:t}class pn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new A4;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(X4(e))try{this.getOrInitializeService({instanceIdentifier:ni})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ni){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ni){return this.instances.has(e)}getOptions(e=ni){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Y4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ni){return this.component?this.component.multipleInstances?e:ni:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Y4(t){return t===ni?void 0:t}function X4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Q4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ye||(ye={}));const Z4={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},ej=ye.INFO,tj={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},nj=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=tj[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sh{constructor(e){this.name=e,this._logLevel=ej,this._logHandler=nj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Z4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}}const rj=(t,e)=>e.some(n=>t instanceof n);let cx,ux;function sj(){return cx||(cx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ij(){return ux||(ux=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const KS=new WeakMap,mm=new WeakMap,GS=new WeakMap,Pf=new WeakMap,my=new WeakMap;function oj(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ar(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&KS.set(n,t)}).catch(()=>{}),my.set(e,t),e}function aj(t){if(mm.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});mm.set(t,e)}let gm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return mm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||GS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ar(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lj(t){gm=t(gm)}function cj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Rf(this),e,...n);return GS.set(r,e.sort?e.sort():[e]),Ar(r)}:ij().includes(t)?function(...e){return t.apply(Rf(this),e),Ar(KS.get(this))}:function(...e){return Ar(t.apply(Rf(this),e))}}function uj(t){return typeof t=="function"?cj(t):(t instanceof IDBTransaction&&aj(t),rj(t,sj())?new Proxy(t,gm):t)}function Ar(t){if(t instanceof IDBRequest)return oj(t);if(Pf.has(t))return Pf.get(t);const e=uj(t);return e!==t&&(Pf.set(t,e),my.set(e,t)),e}const Rf=t=>my.get(t);function ih(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ar(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Ar(o.result),c.oldVersion,c.newVersion,Ar(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}function jf(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Ar(n).then(()=>{})}const dj=["get","getKey","getAll","getAllKeys","count"],hj=["put","add","delete","clear"],Df=new Map;function dx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Df.get(e))return Df.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=hj.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||dj.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[n](...a),s&&c.done]))[0]};return Df.set(e,i),i}lj(t=>({...t,get:(e,n,r)=>dx(e,n)||t.get(e,n,r),has:(e,n)=>!!dx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pj(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function pj(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ym="@firebase/app",hx="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or=new sh("@firebase/app"),mj="@firebase/app-compat",gj="@firebase/analytics-compat",yj="@firebase/analytics",vj="@firebase/app-check-compat",wj="@firebase/app-check",xj="@firebase/auth",_j="@firebase/auth-compat",Tj="@firebase/database",Ej="@firebase/data-connect",Sj="@firebase/database-compat",Ij="@firebase/functions",bj="@firebase/functions-compat",Cj="@firebase/installations",kj="@firebase/installations-compat",Nj="@firebase/messaging",Aj="@firebase/messaging-compat",Pj="@firebase/performance",Rj="@firebase/performance-compat",jj="@firebase/remote-config",Dj="@firebase/remote-config-compat",Mj="@firebase/storage",Vj="@firebase/storage-compat",Oj="@firebase/firestore",Lj="@firebase/vertexai-preview",Fj="@firebase/firestore-compat",Uj="firebase",Bj="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="[DEFAULT]",zj={[ym]:"fire-core",[mj]:"fire-core-compat",[yj]:"fire-analytics",[gj]:"fire-analytics-compat",[wj]:"fire-app-check",[vj]:"fire-app-check-compat",[xj]:"fire-auth",[_j]:"fire-auth-compat",[Tj]:"fire-rtdb",[Ej]:"fire-data-connect",[Sj]:"fire-rtdb-compat",[Ij]:"fire-fn",[bj]:"fire-fn-compat",[Cj]:"fire-iid",[kj]:"fire-iid-compat",[Nj]:"fire-fcm",[Aj]:"fire-fcm-compat",[Pj]:"fire-perf",[Rj]:"fire-perf-compat",[jj]:"fire-rc",[Dj]:"fire-rc-compat",[Mj]:"fire-gcs",[Vj]:"fire-gcs-compat",[Oj]:"fire-fst",[Fj]:"fire-fst-compat",[Lj]:"fire-vertex","fire-js":"fire-js",[Uj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd=new Map,$j=new Map,wm=new Map;function fx(t,e){try{t.container.addComponent(e)}catch(n){Or.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Rn(t){const e=t.name;if(wm.has(e))return Or.debug(`There were multiple attempts to register component ${e}.`),!1;wm.set(e,t);for(const n of fd.values())fx(n,t);for(const n of $j.values())fx(n,t);return!0}function Fs(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function tr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Es=new Ls("app","Firebase",Wj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new pn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=Bj;function gy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:vm,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Es.create("bad-app-name",{appName:String(s)});if(n||(n=$S()),!n)throw Es.create("no-options");const i=fd.get(s);if(i){if(Vo(n,i.options)&&Vo(r,i.config))return i;throw Es.create("duplicate-app",{appName:s})}const o=new J4(s);for(const c of wm.values())o.addComponent(c);const a=new Hj(n,r,o);return fd.set(s,a),a}function oh(t=vm){const e=fd.get(t);if(!e&&t===vm&&$S())return gy();if(!e)throw Es.create("no-app",{appName:t});return e}function tn(t,e,n){var r;let s=(r=zj[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Or.warn(a.join(" "));return}Rn(new pn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj="firebase-heartbeat-database",Kj=1,Rl="firebase-heartbeat-store";let Mf=null;function QS(){return Mf||(Mf=ih(qj,Kj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Rl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Es.create("idb-open",{originalErrorMessage:t.message})})),Mf}async function Gj(t){try{const n=(await QS()).transaction(Rl),r=await n.objectStore(Rl).get(YS(t));return await n.done,r}catch(e){if(e instanceof Qn)Or.warn(e.message);else{const n=Es.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Or.warn(n.message)}}}async function px(t,e){try{const r=(await QS()).transaction(Rl,"readwrite");await r.objectStore(Rl).put(e,YS(t)),await r.done}catch(n){if(n instanceof Qn)Or.warn(n.message);else{const r=Es.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Or.warn(r.message)}}}function YS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj=1024,Yj=30*24*60*60*1e3;class Xj{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Zj(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=mx();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Yj}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Or.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=mx(),{heartbeatsToSend:r,unsentEntries:s}=Jj(this._heartbeatsCache.heartbeats),i=hd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Or.warn(n),""}}}function mx(){return new Date().toISOString().substring(0,10)}function Jj(t,e=Qj){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),gx(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),gx(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Zj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fy()?py().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Gj(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return px(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return px(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function gx(t){return hd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(t){Rn(new pn("platform-logger",e=>new fj(e),"PRIVATE")),Rn(new pn("heartbeat",e=>new Xj(e),"PRIVATE")),tn(ym,hx,t),tn(ym,hx,"esm2017"),tn("fire-js","")}eD("");var yx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mi,XS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,E){function N(){}N.prototype=E.prototype,S.D=E.prototype,S.prototype=new N,S.prototype.constructor=S,S.C=function(I,P,j){for(var A=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)A[ee-2]=arguments[ee];return E.prototype[P].apply(I,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,E,N){N||(N=0);var I=Array(16);if(typeof E=="string")for(var P=0;16>P;++P)I[P]=E.charCodeAt(N++)|E.charCodeAt(N++)<<8|E.charCodeAt(N++)<<16|E.charCodeAt(N++)<<24;else for(P=0;16>P;++P)I[P]=E[N++]|E[N++]<<8|E[N++]<<16|E[N++]<<24;E=S.g[0],N=S.g[1],P=S.g[2];var j=S.g[3],A=E+(j^N&(P^j))+I[0]+3614090360&4294967295;E=N+(A<<7&4294967295|A>>>25),A=j+(P^E&(N^P))+I[1]+3905402710&4294967295,j=E+(A<<12&4294967295|A>>>20),A=P+(N^j&(E^N))+I[2]+606105819&4294967295,P=j+(A<<17&4294967295|A>>>15),A=N+(E^P&(j^E))+I[3]+3250441966&4294967295,N=P+(A<<22&4294967295|A>>>10),A=E+(j^N&(P^j))+I[4]+4118548399&4294967295,E=N+(A<<7&4294967295|A>>>25),A=j+(P^E&(N^P))+I[5]+1200080426&4294967295,j=E+(A<<12&4294967295|A>>>20),A=P+(N^j&(E^N))+I[6]+2821735955&4294967295,P=j+(A<<17&4294967295|A>>>15),A=N+(E^P&(j^E))+I[7]+4249261313&4294967295,N=P+(A<<22&4294967295|A>>>10),A=E+(j^N&(P^j))+I[8]+1770035416&4294967295,E=N+(A<<7&4294967295|A>>>25),A=j+(P^E&(N^P))+I[9]+2336552879&4294967295,j=E+(A<<12&4294967295|A>>>20),A=P+(N^j&(E^N))+I[10]+4294925233&4294967295,P=j+(A<<17&4294967295|A>>>15),A=N+(E^P&(j^E))+I[11]+2304563134&4294967295,N=P+(A<<22&4294967295|A>>>10),A=E+(j^N&(P^j))+I[12]+1804603682&4294967295,E=N+(A<<7&4294967295|A>>>25),A=j+(P^E&(N^P))+I[13]+4254626195&4294967295,j=E+(A<<12&4294967295|A>>>20),A=P+(N^j&(E^N))+I[14]+2792965006&4294967295,P=j+(A<<17&4294967295|A>>>15),A=N+(E^P&(j^E))+I[15]+1236535329&4294967295,N=P+(A<<22&4294967295|A>>>10),A=E+(P^j&(N^P))+I[1]+4129170786&4294967295,E=N+(A<<5&4294967295|A>>>27),A=j+(N^P&(E^N))+I[6]+3225465664&4294967295,j=E+(A<<9&4294967295|A>>>23),A=P+(E^N&(j^E))+I[11]+643717713&4294967295,P=j+(A<<14&4294967295|A>>>18),A=N+(j^E&(P^j))+I[0]+3921069994&4294967295,N=P+(A<<20&4294967295|A>>>12),A=E+(P^j&(N^P))+I[5]+3593408605&4294967295,E=N+(A<<5&4294967295|A>>>27),A=j+(N^P&(E^N))+I[10]+38016083&4294967295,j=E+(A<<9&4294967295|A>>>23),A=P+(E^N&(j^E))+I[15]+3634488961&4294967295,P=j+(A<<14&4294967295|A>>>18),A=N+(j^E&(P^j))+I[4]+3889429448&4294967295,N=P+(A<<20&4294967295|A>>>12),A=E+(P^j&(N^P))+I[9]+568446438&4294967295,E=N+(A<<5&4294967295|A>>>27),A=j+(N^P&(E^N))+I[14]+3275163606&4294967295,j=E+(A<<9&4294967295|A>>>23),A=P+(E^N&(j^E))+I[3]+4107603335&4294967295,P=j+(A<<14&4294967295|A>>>18),A=N+(j^E&(P^j))+I[8]+1163531501&4294967295,N=P+(A<<20&4294967295|A>>>12),A=E+(P^j&(N^P))+I[13]+2850285829&4294967295,E=N+(A<<5&4294967295|A>>>27),A=j+(N^P&(E^N))+I[2]+4243563512&4294967295,j=E+(A<<9&4294967295|A>>>23),A=P+(E^N&(j^E))+I[7]+1735328473&4294967295,P=j+(A<<14&4294967295|A>>>18),A=N+(j^E&(P^j))+I[12]+2368359562&4294967295,N=P+(A<<20&4294967295|A>>>12),A=E+(N^P^j)+I[5]+4294588738&4294967295,E=N+(A<<4&4294967295|A>>>28),A=j+(E^N^P)+I[8]+2272392833&4294967295,j=E+(A<<11&4294967295|A>>>21),A=P+(j^E^N)+I[11]+1839030562&4294967295,P=j+(A<<16&4294967295|A>>>16),A=N+(P^j^E)+I[14]+4259657740&4294967295,N=P+(A<<23&4294967295|A>>>9),A=E+(N^P^j)+I[1]+2763975236&4294967295,E=N+(A<<4&4294967295|A>>>28),A=j+(E^N^P)+I[4]+1272893353&4294967295,j=E+(A<<11&4294967295|A>>>21),A=P+(j^E^N)+I[7]+4139469664&4294967295,P=j+(A<<16&4294967295|A>>>16),A=N+(P^j^E)+I[10]+3200236656&4294967295,N=P+(A<<23&4294967295|A>>>9),A=E+(N^P^j)+I[13]+681279174&4294967295,E=N+(A<<4&4294967295|A>>>28),A=j+(E^N^P)+I[0]+3936430074&4294967295,j=E+(A<<11&4294967295|A>>>21),A=P+(j^E^N)+I[3]+3572445317&4294967295,P=j+(A<<16&4294967295|A>>>16),A=N+(P^j^E)+I[6]+76029189&4294967295,N=P+(A<<23&4294967295|A>>>9),A=E+(N^P^j)+I[9]+3654602809&4294967295,E=N+(A<<4&4294967295|A>>>28),A=j+(E^N^P)+I[12]+3873151461&4294967295,j=E+(A<<11&4294967295|A>>>21),A=P+(j^E^N)+I[15]+530742520&4294967295,P=j+(A<<16&4294967295|A>>>16),A=N+(P^j^E)+I[2]+3299628645&4294967295,N=P+(A<<23&4294967295|A>>>9),A=E+(P^(N|~j))+I[0]+4096336452&4294967295,E=N+(A<<6&4294967295|A>>>26),A=j+(N^(E|~P))+I[7]+1126891415&4294967295,j=E+(A<<10&4294967295|A>>>22),A=P+(E^(j|~N))+I[14]+2878612391&4294967295,P=j+(A<<15&4294967295|A>>>17),A=N+(j^(P|~E))+I[5]+4237533241&4294967295,N=P+(A<<21&4294967295|A>>>11),A=E+(P^(N|~j))+I[12]+1700485571&4294967295,E=N+(A<<6&4294967295|A>>>26),A=j+(N^(E|~P))+I[3]+2399980690&4294967295,j=E+(A<<10&4294967295|A>>>22),A=P+(E^(j|~N))+I[10]+4293915773&4294967295,P=j+(A<<15&4294967295|A>>>17),A=N+(j^(P|~E))+I[1]+2240044497&4294967295,N=P+(A<<21&4294967295|A>>>11),A=E+(P^(N|~j))+I[8]+1873313359&4294967295,E=N+(A<<6&4294967295|A>>>26),A=j+(N^(E|~P))+I[15]+4264355552&4294967295,j=E+(A<<10&4294967295|A>>>22),A=P+(E^(j|~N))+I[6]+2734768916&4294967295,P=j+(A<<15&4294967295|A>>>17),A=N+(j^(P|~E))+I[13]+1309151649&4294967295,N=P+(A<<21&4294967295|A>>>11),A=E+(P^(N|~j))+I[4]+4149444226&4294967295,E=N+(A<<6&4294967295|A>>>26),A=j+(N^(E|~P))+I[11]+3174756917&4294967295,j=E+(A<<10&4294967295|A>>>22),A=P+(E^(j|~N))+I[2]+718787259&4294967295,P=j+(A<<15&4294967295|A>>>17),A=N+(j^(P|~E))+I[9]+3951481745&4294967295,S.g[0]=S.g[0]+E&4294967295,S.g[1]=S.g[1]+(P+(A<<21&4294967295|A>>>11))&4294967295,S.g[2]=S.g[2]+P&4294967295,S.g[3]=S.g[3]+j&4294967295}r.prototype.u=function(S,E){E===void 0&&(E=S.length);for(var N=E-this.blockSize,I=this.B,P=this.h,j=0;j<E;){if(P==0)for(;j<=N;)s(this,S,j),j+=this.blockSize;if(typeof S=="string"){for(;j<E;)if(I[P++]=S.charCodeAt(j++),P==this.blockSize){s(this,I),P=0;break}}else for(;j<E;)if(I[P++]=S[j++],P==this.blockSize){s(this,I),P=0;break}}this.h=P,this.o+=E},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var E=1;E<S.length-8;++E)S[E]=0;var N=8*this.o;for(E=S.length-8;E<S.length;++E)S[E]=N&255,N/=256;for(this.u(S),S=Array(16),E=N=0;4>E;++E)for(var I=0;32>I;I+=8)S[N++]=this.g[E]>>>I&255;return S};function i(S,E){var N=a;return Object.prototype.hasOwnProperty.call(N,S)?N[S]:N[S]=E(S)}function o(S,E){this.h=E;for(var N=[],I=!0,P=S.length-1;0<=P;P--){var j=S[P]|0;I&&j==E||(N[P]=j,I=!1)}this.g=N}var a={};function c(S){return-128<=S&&128>S?i(S,function(E){return new o([E|0],0>E?-1:0)}):new o([S|0],0>S?-1:0)}function d(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return C(d(-S));for(var E=[],N=1,I=0;S>=N;I++)E[I]=S/N|0,N*=4294967296;return new o(E,0)}function h(S,E){if(S.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(S.charAt(0)=="-")return C(h(S.substring(1),E));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=d(Math.pow(E,8)),I=f,P=0;P<S.length;P+=8){var j=Math.min(8,S.length-P),A=parseInt(S.substring(P,P+j),E);8>j?(j=d(Math.pow(E,j)),I=I.j(j).add(d(A))):(I=I.j(N),I=I.add(d(A)))}return I}var f=c(0),p=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(T(this))return-C(this).m();for(var S=0,E=1,N=0;N<this.g.length;N++){var I=this.i(N);S+=(0<=I?I:4294967296+I)*E,E*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(w(this))return"0";if(T(this))return"-"+C(this).toString(S);for(var E=d(Math.pow(S,6)),N=this,I="";;){var P=R(N,E).g;N=_(N,P.j(E));var j=((0<N.g.length?N.g[0]:N.h)>>>0).toString(S);if(N=P,w(N))return j+I;for(;6>j.length;)j="0"+j;I=j+I}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function w(S){if(S.h!=0)return!1;for(var E=0;E<S.g.length;E++)if(S.g[E]!=0)return!1;return!0}function T(S){return S.h==-1}t.l=function(S){return S=_(this,S),T(S)?-1:w(S)?0:1};function C(S){for(var E=S.g.length,N=[],I=0;I<E;I++)N[I]=~S.g[I];return new o(N,~S.h).add(p)}t.abs=function(){return T(this)?C(this):this},t.add=function(S){for(var E=Math.max(this.g.length,S.g.length),N=[],I=0,P=0;P<=E;P++){var j=I+(this.i(P)&65535)+(S.i(P)&65535),A=(j>>>16)+(this.i(P)>>>16)+(S.i(P)>>>16);I=A>>>16,j&=65535,A&=65535,N[P]=A<<16|j}return new o(N,N[N.length-1]&-2147483648?-1:0)};function _(S,E){return S.add(C(E))}t.j=function(S){if(w(this)||w(S))return f;if(T(this))return T(S)?C(this).j(C(S)):C(C(this).j(S));if(T(S))return C(this.j(C(S)));if(0>this.l(g)&&0>S.l(g))return d(this.m()*S.m());for(var E=this.g.length+S.g.length,N=[],I=0;I<2*E;I++)N[I]=0;for(I=0;I<this.g.length;I++)for(var P=0;P<S.g.length;P++){var j=this.i(I)>>>16,A=this.i(I)&65535,ee=S.i(P)>>>16,H=S.i(P)&65535;N[2*I+2*P]+=A*H,v(N,2*I+2*P),N[2*I+2*P+1]+=j*H,v(N,2*I+2*P+1),N[2*I+2*P+1]+=A*ee,v(N,2*I+2*P+1),N[2*I+2*P+2]+=j*ee,v(N,2*I+2*P+2)}for(I=0;I<E;I++)N[I]=N[2*I+1]<<16|N[2*I];for(I=E;I<2*E;I++)N[I]=0;return new o(N,0)};function v(S,E){for(;(S[E]&65535)!=S[E];)S[E+1]+=S[E]>>>16,S[E]&=65535,E++}function x(S,E){this.g=S,this.h=E}function R(S,E){if(w(E))throw Error("division by zero");if(w(S))return new x(f,f);if(T(S))return E=R(C(S),E),new x(C(E.g),C(E.h));if(T(E))return E=R(S,C(E)),new x(C(E.g),E.h);if(30<S.g.length){if(T(S)||T(E))throw Error("slowDivide_ only works with positive integers.");for(var N=p,I=E;0>=I.l(S);)N=D(N),I=D(I);var P=V(N,1),j=V(I,1);for(I=V(I,2),N=V(N,2);!w(I);){var A=j.add(I);0>=A.l(S)&&(P=P.add(N),j=A),I=V(I,1),N=V(N,1)}return E=_(S,P.j(E)),new x(P,E)}for(P=f;0<=S.l(E);){for(N=Math.max(1,Math.floor(S.m()/E.m())),I=Math.ceil(Math.log(N)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),j=d(N),A=j.j(E);T(A)||0<A.l(S);)N-=I,j=d(N),A=j.j(E);w(j)&&(j=p),P=P.add(j),S=_(S,A)}return new x(P,S)}t.A=function(S){return R(this,S).h},t.and=function(S){for(var E=Math.max(this.g.length,S.g.length),N=[],I=0;I<E;I++)N[I]=this.i(I)&S.i(I);return new o(N,this.h&S.h)},t.or=function(S){for(var E=Math.max(this.g.length,S.g.length),N=[],I=0;I<E;I++)N[I]=this.i(I)|S.i(I);return new o(N,this.h|S.h)},t.xor=function(S){for(var E=Math.max(this.g.length,S.g.length),N=[],I=0;I<E;I++)N[I]=this.i(I)^S.i(I);return new o(N,this.h^S.h)};function D(S){for(var E=S.g.length+1,N=[],I=0;I<E;I++)N[I]=S.i(I)<<1|S.i(I-1)>>>31;return new o(N,S.h)}function V(S,E){var N=E>>5;E%=32;for(var I=S.g.length-N,P=[],j=0;j<I;j++)P[j]=0<E?S.i(j+N)>>>E|S.i(j+N+1)<<32-E:S.i(j+N);return new o(P,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,XS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,mi=o}).apply(typeof yx<"u"?yx:typeof self<"u"?self:typeof window<"u"?window:{});var nu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var JS,La,ZS,bu,xm,e2,t2,n2;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,y){return u==Array.prototype||u==Object.prototype||(u[m]=y.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof nu=="object"&&nu];for(var m=0;m<u.length;++m){var y=u[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function s(u,m){if(m)e:{var y=r;u=u.split(".");for(var k=0;k<u.length-1;k++){var M=u[k];if(!(M in y))break e;y=y[M]}u=u[u.length-1],k=y[u],m=m(k),m!=k&&m!=null&&e(y,u,{configurable:!0,writable:!0,value:m})}}function i(u,m){u instanceof String&&(u+="");var y=0,k=!1,M={next:function(){if(!k&&y<u.length){var O=y++;return{value:m(O,u[O]),done:!1}}return k=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(u){return u||function(){return i(this,function(m,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function d(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function h(u,m,y){return u.call.apply(u.bind,arguments)}function f(u,m,y){if(!u)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,k),u.apply(m,M)}}return function(){return u.apply(m,arguments)}}function p(u,m,y){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function g(u,m){var y=Array.prototype.slice.call(arguments,1);return function(){var k=y.slice();return k.push.apply(k,arguments),u.apply(this,k)}}function w(u,m){function y(){}y.prototype=m.prototype,u.aa=m.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(k,M,O){for(var $=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)$[Pe-2]=arguments[Pe];return m.prototype[M].apply(k,$)}}function T(u){const m=u.length;if(0<m){const y=Array(m);for(let k=0;k<m;k++)y[k]=u[k];return y}return[]}function C(u,m){for(let y=1;y<arguments.length;y++){const k=arguments[y];if(c(k)){const M=u.length||0,O=k.length||0;u.length=M+O;for(let $=0;$<O;$++)u[M+$]=k[$]}else u.push(k)}}class _{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function v(u){return/^[\s\xa0]*$/.test(u)}function x(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function R(u){return R[" "](u),u}R[" "]=function(){};var D=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function V(u,m,y){for(const k in u)m.call(y,u[k],k,u)}function S(u,m){for(const y in u)m.call(void 0,u[y],y,u)}function E(u){const m={};for(const y in u)m[y]=u[y];return m}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(u,m){let y,k;for(let M=1;M<arguments.length;M++){k=arguments[M];for(y in k)u[y]=k[y];for(let O=0;O<N.length;O++)y=N[O],Object.prototype.hasOwnProperty.call(k,y)&&(u[y]=k[y])}}function P(u){var m=1;u=u.split(":");const y=[];for(;0<m&&u.length;)y.push(u.shift()),m--;return u.length&&y.push(u.join(":")),y}function j(u){a.setTimeout(()=>{throw u},0)}function A(){var u=W;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class ee{constructor(){this.h=this.g=null}add(m,y){const k=H.get();k.set(m,y),this.h?this.h.next=k:this.g=k,this.h=k}}var H=new _(()=>new Ee,u=>u.reset());class Ee{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,U=!1,W=new ee,q=()=>{const u=a.Promise.resolve(void 0);Z=()=>{u.then(ce)}};var ce=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(y){j(y)}var m=H;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}U=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ce(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}Ce.prototype.h=function(){this.defaultPrevented=!0};var ne=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};a.addEventListener("test",y,m),a.removeEventListener("test",y,m)}catch{}return u}();function Se(u,m){if(Ce.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,k=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(D){e:{try{R(m.nodeName);var M=!0;break e}catch{}M=!1}M||(m=null)}}else y=="mouseover"?m=u.fromElement:y=="mouseout"&&(m=u.toElement);this.relatedTarget=m,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:pe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Se.aa.h.call(this)}}w(Se,Ce);var pe={2:"touch",3:"pen",4:"mouse"};Se.prototype.h=function(){Se.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ie="closure_listenable_"+(1e6*Math.random()|0),jn=0;function St(u,m,y,k,M){this.listener=u,this.proxy=null,this.src=m,this.type=y,this.capture=!!k,this.ha=M,this.key=++jn,this.da=this.fa=!1}function vn(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function It(u){this.src=u,this.g={},this.h=0}It.prototype.add=function(u,m,y,k,M){var O=u.toString();u=this.g[O],u||(u=this.g[O]=[],this.h++);var $=Ae(u,m,k,M);return-1<$?(m=u[$],y||(m.fa=!1)):(m=new St(m,this.src,O,!!k,M),m.fa=y,u.push(m)),m};function fe(u,m){var y=m.type;if(y in u.g){var k=u.g[y],M=Array.prototype.indexOf.call(k,m,void 0),O;(O=0<=M)&&Array.prototype.splice.call(k,M,1),O&&(vn(m),u.g[y].length==0&&(delete u.g[y],u.h--))}}function Ae(u,m,y,k){for(var M=0;M<u.length;++M){var O=u[M];if(!O.da&&O.listener==m&&O.capture==!!y&&O.ha==k)return M}return-1}var pt="closure_lm_"+(1e6*Math.random()|0),Bt={};function ot(u,m,y,k,M){if(Array.isArray(m)){for(var O=0;O<m.length;O++)ot(u,m[O],y,k,M);return null}return y=Bi(y),u&&u[Ie]?u.K(m,y,d(k)?!!k.capture:!1,M):Xe(u,m,y,!1,k,M)}function Xe(u,m,y,k,M,O){if(!m)throw Error("Invalid event type");var $=d(M)?!!M.capture:!!M,Pe=Fi(u);if(Pe||(u[pt]=Pe=new It(u)),y=Pe.add(m,y,k,$,O),y.proxy)return y;if(k=Dn(),y.proxy=k,k.src=u,k.listener=y,u.addEventListener)ne||(M=$),M===void 0&&(M=!1),u.addEventListener(m.toString(),k,M);else if(u.attachEvent)u.attachEvent(ua(m.toString()),k);else if(u.addListener&&u.removeListener)u.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Dn(){function u(y){return m.call(u.src,u.listener,y)}const m=xc;return u}function fr(u,m,y,k,M){if(Array.isArray(m))for(var O=0;O<m.length;O++)fr(u,m[O],y,k,M);else k=d(k)?!!k.capture:!!k,y=Bi(y),u&&u[Ie]?(u=u.i,m=String(m).toString(),m in u.g&&(O=u.g[m],y=Ae(O,y,k,M),-1<y&&(vn(O[y]),Array.prototype.splice.call(O,y,1),O.length==0&&(delete u.g[m],u.h--)))):u&&(u=Fi(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Ae(m,y,k,M)),(y=-1<u?m[u]:null)&&pr(y))}function pr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Ie])fe(m.i,u);else{var y=u.type,k=u.proxy;m.removeEventListener?m.removeEventListener(y,k,u.capture):m.detachEvent?m.detachEvent(ua(y),k):m.addListener&&m.removeListener&&m.removeListener(k),(y=Fi(m))?(fe(y,u),y.h==0&&(y.src=null,m[pt]=null)):vn(u)}}}function ua(u){return u in Bt?Bt[u]:Bt[u]="on"+u}function xc(u,m){if(u.da)u=!0;else{m=new Se(m,this);var y=u.listener,k=u.ha||u.src;u.fa&&pr(u),u=y.call(k,m)}return u}function Fi(u){return u=u[pt],u instanceof It?u:null}var Ui="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bi(u){return typeof u=="function"?u:(u[Ui]||(u[Ui]=function(m){return u.handleEvent(m)}),u[Ui])}function at(){he.call(this),this.i=new It(this),this.M=this,this.F=null}w(at,he),at.prototype[Ie]=!0,at.prototype.removeEventListener=function(u,m,y,k){fr(this,u,m,y,k)};function ut(u,m){var y,k=u.F;if(k)for(y=[];k;k=k.F)y.push(k);if(u=u.M,k=m.type||m,typeof m=="string")m=new Ce(m,u);else if(m instanceof Ce)m.target=m.target||u;else{var M=m;m=new Ce(k,u),I(m,M)}if(M=!0,y)for(var O=y.length-1;0<=O;O--){var $=m.g=y[O];M=Hs($,k,!0,m)&&M}if($=m.g=u,M=Hs($,k,!0,m)&&M,M=Hs($,k,!1,m)&&M,y)for(O=0;O<y.length;O++)$=m.g=y[O],M=Hs($,k,!1,m)&&M}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var y=u.g[m],k=0;k<y.length;k++)vn(y[k]);delete u.g[m],u.h--}}this.F=null},at.prototype.K=function(u,m,y,k){return this.i.add(String(u),m,!1,y,k)},at.prototype.L=function(u,m,y,k){return this.i.add(String(u),m,!0,y,k)};function Hs(u,m,y,k){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var M=!0,O=0;O<m.length;++O){var $=m[O];if($&&!$.da&&$.capture==y){var Pe=$.listener,mt=$.ha||$.src;$.fa&&fe(u.i,$),M=Pe.call(mt,k)!==!1&&M}}return M&&!k.defaultPrevented}function da(u,m,y){if(typeof u=="function")y&&(u=p(u,y));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:a.setTimeout(u,m||0)}function qs(u){u.g=da(()=>{u.g=null,u.i&&(u.i=!1,qs(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class _c extends he{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:qs(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kr(u){he.call(this),this.h=u,this.g={}}w(Kr,he);var ha=[];function fa(u){V(u.g,function(m,y){this.g.hasOwnProperty(y)&&pr(m)},u),u.g={}}Kr.prototype.N=function(){Kr.aa.N.call(this),fa(this)},Kr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zi=a.JSON.stringify,Tc=a.JSON.parse,Ec=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Ks(){}Ks.prototype.h=null;function J(u){return u.h||(u.h=u.i())}function F(){}var K={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Q(){Ce.call(this,"d")}w(Q,Ce);function re(){Ce.call(this,"c")}w(re,Ce);var oe={},le=null;function be(){return le=le||new at}oe.La="serverreachability";function Mn(u){Ce.call(this,oe.La,u)}w(Mn,Ce);function Vn(u){const m=be();ut(m,new Mn(m))}oe.STAT_EVENT="statevent";function Sc(u,m){Ce.call(this,oe.STAT_EVENT,u),this.stat=m}w(Sc,Ce);function bt(u){const m=be();ut(m,new Sc(m,u))}oe.Ma="timingevent";function mr(u,m){Ce.call(this,oe.Ma,u),this.size=m}w(mr,Ce);function Kt(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},m)}function Xn(){this.g=!0}Xn.prototype.xa=function(){this.g=!1};function aN(u,m,y,k,M,O){u.info(function(){if(u.g)if(O)for(var $="",Pe=O.split("&"),mt=0;mt<Pe.length;mt++){var xe=Pe[mt].split("=");if(1<xe.length){var Ct=xe[0];xe=xe[1];var kt=Ct.split("_");$=2<=kt.length&&kt[1]=="type"?$+(Ct+"="+xe+"&"):$+(Ct+"=redacted&")}}else $=null;else $=O;return"XMLHTTP REQ ("+k+") [attempt "+M+"]: "+m+`
`+y+`
`+$})}function lN(u,m,y,k,M,O,$){u.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+M+"]: "+m+`
`+y+`
`+O+" "+$})}function $i(u,m,y,k){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+uN(u,y)+(k?" "+k:"")})}function cN(u,m){u.info(function(){return"TIMEOUT: "+m})}Xn.prototype.info=function(){};function uN(u,m){if(!u.g)return m;if(!m)return null;try{var y=JSON.parse(m);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var k=y[u];if(!(2>k.length)){var M=k[1];if(Array.isArray(M)&&!(1>M.length)){var O=M[0];if(O!="noop"&&O!="stop"&&O!="close")for(var $=1;$<M.length;$++)M[$]=""}}}}return zi(y)}catch{return m}}var Ic={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},r0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Wh;function bc(){}w(bc,Ks),bc.prototype.g=function(){return new XMLHttpRequest},bc.prototype.i=function(){return{}},Wh=new bc;function Gr(u,m,y,k){this.j=u,this.i=m,this.l=y,this.R=k||1,this.U=new Kr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new s0}function s0(){this.i=null,this.g="",this.h=!1}var i0={},Hh={};function qh(u,m,y){u.L=1,u.v=Ac(gr(m)),u.m=y,u.P=!0,o0(u,null)}function o0(u,m){u.F=Date.now(),Cc(u),u.A=gr(u.v);var y=u.A,k=u.R;Array.isArray(k)||(k=[String(k)]),x0(y.i,"t",k),u.C=0,y=u.j.J,u.h=new s0,u.g=L0(u.j,y?m:null,!u.m),0<u.O&&(u.M=new _c(p(u.Y,u,u.g),u.O)),m=u.U,y=u.g,k=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(ha[0]=M.toString()),M=ha);for(var O=0;O<M.length;O++){var $=ot(y,M[O],k||m.handleEvent,!1,m.h||m);if(!$)break;m.g[$.key]=$}m=u.H?E(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Vn(),aN(u.i,u.u,u.A,u.l,u.R,u.m)}Gr.prototype.ca=function(u){u=u.target;const m=this.M;m&&yr(u)==3?m.j():this.Y(u)},Gr.prototype.Y=function(u){try{if(u==this.g)e:{const kt=yr(this.g);var m=this.g.Ba();const qi=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||C0(this.g)))){this.J||kt!=4||m==7||(m==8||0>=qi?Vn(3):Vn(2)),Kh(this);var y=this.g.Z();this.X=y;t:if(a0(this)){var k=C0(this.g);u="";var M=k.length,O=yr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gs(this),pa(this);var $="";break t}this.h.i=new a.TextDecoder}for(m=0;m<M;m++)this.h.h=!0,u+=this.h.i.decode(k[m],{stream:!(O&&m==M-1)});k.length=0,this.h.g+=u,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=y==200,lN(this.i,this.u,this.A,this.l,this.R,kt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Pe,mt=this.g;if((Pe=mt.g?mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Pe)){var xe=Pe;break t}}xe=null}if(y=xe)$i(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gh(this,y);else{this.o=!1,this.s=3,bt(12),Gs(this),pa(this);break e}}if(this.P){y=!0;let On;for(;!this.J&&this.C<$.length;)if(On=dN(this,$),On==Hh){kt==4&&(this.s=4,bt(14),y=!1),$i(this.i,this.l,null,"[Incomplete Response]");break}else if(On==i0){this.s=4,bt(15),$i(this.i,this.l,$,"[Invalid Chunk]"),y=!1;break}else $i(this.i,this.l,On,null),Gh(this,On);if(a0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||$.length!=0||this.h.h||(this.s=1,bt(16),y=!1),this.o=this.o&&y,!y)$i(this.i,this.l,$,"[Invalid Chunked Response]"),Gs(this),pa(this);else if(0<$.length&&!this.W){this.W=!0;var Ct=this.j;Ct.g==this&&Ct.ba&&!Ct.M&&(Ct.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),ef(Ct),Ct.M=!0,bt(11))}}else $i(this.i,this.l,$,null),Gh(this,$);kt==4&&Gs(this),this.o&&!this.J&&(kt==4?D0(this.j,this):(this.o=!1,Cc(this)))}else kN(this.g),y==400&&0<$.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),Gs(this),pa(this)}}}catch{}finally{}};function a0(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function dN(u,m){var y=u.C,k=m.indexOf(`
`,y);return k==-1?Hh:(y=Number(m.substring(y,k)),isNaN(y)?i0:(k+=1,k+y>m.length?Hh:(m=m.slice(k,k+y),u.C=k+y,m)))}Gr.prototype.cancel=function(){this.J=!0,Gs(this)};function Cc(u){u.S=Date.now()+u.I,l0(u,u.I)}function l0(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Kt(p(u.ba,u),m)}function Kh(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Gr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(cN(this.i,this.A),this.L!=2&&(Vn(),bt(17)),Gs(this),this.s=2,pa(this)):l0(this,this.S-u)};function pa(u){u.j.G==0||u.J||D0(u.j,u)}function Gs(u){Kh(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,fa(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function Gh(u,m){try{var y=u.j;if(y.G!=0&&(y.g==u||Qh(y.h,u))){if(!u.K&&Qh(y.h,u)&&y.G==3){try{var k=y.Da.g.parse(m)}catch{k=null}if(Array.isArray(k)&&k.length==3){var M=k;if(M[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)Vc(y),Dc(y);else break e;Zh(y),bt(18)}}else y.za=M[1],0<y.za-y.T&&37500>M[2]&&y.F&&y.v==0&&!y.C&&(y.C=Kt(p(y.Za,y),6e3));if(1>=d0(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Ys(y,11)}else if((u.K||y.g==u)&&Vc(y),!v(m))for(M=y.Da.g.parse(m),m=0;m<M.length;m++){let xe=M[m];if(y.T=xe[0],xe=xe[1],y.G==2)if(xe[0]=="c"){y.K=xe[1],y.ia=xe[2];const Ct=xe[3];Ct!=null&&(y.la=Ct,y.j.info("VER="+y.la));const kt=xe[4];kt!=null&&(y.Aa=kt,y.j.info("SVER="+y.Aa));const qi=xe[5];qi!=null&&typeof qi=="number"&&0<qi&&(k=1.5*qi,y.L=k,y.j.info("backChannelRequestTimeoutMs_="+k)),k=y;const On=u.g;if(On){const Lc=On.g?On.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Lc){var O=k.h;O.g||Lc.indexOf("spdy")==-1&&Lc.indexOf("quic")==-1&&Lc.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Yh(O,O.h),O.h=null))}if(k.D){const tf=On.g?On.g.getResponseHeader("X-HTTP-Session-Id"):null;tf&&(k.ya=tf,je(k.I,k.D,tf))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),k=y;var $=u;if(k.qa=O0(k,k.J?k.ia:null,k.W),$.K){h0(k.h,$);var Pe=$,mt=k.L;mt&&(Pe.I=mt),Pe.B&&(Kh(Pe),Cc(Pe)),k.g=$}else R0(k);0<y.i.length&&Mc(y)}else xe[0]!="stop"&&xe[0]!="close"||Ys(y,7);else y.G==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?Ys(y,7):Jh(y):xe[0]!="noop"&&y.l&&y.l.ta(xe),y.v=0)}}Vn(4)}catch{}}var hN=class{constructor(u,m){this.g=u,this.map=m}};function c0(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function u0(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function d0(u){return u.h?1:u.g?u.g.size:0}function Qh(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Yh(u,m){u.g?u.g.add(m):u.h=m}function h0(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}c0.prototype.cancel=function(){if(this.i=f0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function f0(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const y of u.g.values())m=m.concat(y.D);return m}return T(u.i)}function fN(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var m=[],y=u.length,k=0;k<y;k++)m.push(u[k]);return m}m=[],y=0;for(k in u)m[y++]=u[k];return m}function pN(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var m=[];u=u.length;for(var y=0;y<u;y++)m.push(y);return m}m=[],y=0;for(const k in u)m[y++]=k;return m}}}function p0(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var y=pN(u),k=fN(u),M=k.length,O=0;O<M;O++)m.call(void 0,k[O],y&&y[O],u)}var m0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mN(u,m){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var k=u[y].indexOf("="),M=null;if(0<=k){var O=u[y].substring(0,k);M=u[y].substring(k+1)}else O=u[y];m(O,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Qs(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Qs){this.h=u.h,kc(this,u.j),this.o=u.o,this.g=u.g,Nc(this,u.s),this.l=u.l;var m=u.i,y=new ya;y.i=m.i,m.g&&(y.g=new Map(m.g),y.h=m.h),g0(this,y),this.m=u.m}else u&&(m=String(u).match(m0))?(this.h=!1,kc(this,m[1]||"",!0),this.o=ma(m[2]||""),this.g=ma(m[3]||"",!0),Nc(this,m[4]),this.l=ma(m[5]||"",!0),g0(this,m[6]||"",!0),this.m=ma(m[7]||"")):(this.h=!1,this.i=new ya(null,this.h))}Qs.prototype.toString=function(){var u=[],m=this.j;m&&u.push(ga(m,y0,!0),":");var y=this.g;return(y||m=="file")&&(u.push("//"),(m=this.o)&&u.push(ga(m,y0,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(ga(y,y.charAt(0)=="/"?vN:yN,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",ga(y,xN)),u.join("")};function gr(u){return new Qs(u)}function kc(u,m,y){u.j=y?ma(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Nc(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function g0(u,m,y){m instanceof ya?(u.i=m,_N(u.i,u.h)):(y||(m=ga(m,wN)),u.i=new ya(m,u.h))}function je(u,m,y){u.i.set(m,y)}function Ac(u){return je(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ma(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ga(u,m,y){return typeof u=="string"?(u=encodeURI(u).replace(m,gN),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function gN(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var y0=/[#\/\?@]/g,yN=/[#\?:]/g,vN=/[#\?]/g,wN=/[#\?@]/g,xN=/#/g;function ya(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Qr(u){u.g||(u.g=new Map,u.h=0,u.i&&mN(u.i,function(m,y){u.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}t=ya.prototype,t.add=function(u,m){Qr(this),this.i=null,u=Wi(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(m),this.h+=1,this};function v0(u,m){Qr(u),m=Wi(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function w0(u,m){return Qr(u),m=Wi(u,m),u.g.has(m)}t.forEach=function(u,m){Qr(this),this.g.forEach(function(y,k){y.forEach(function(M){u.call(m,M,k,this)},this)},this)},t.na=function(){Qr(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),y=[];for(let k=0;k<m.length;k++){const M=u[k];for(let O=0;O<M.length;O++)y.push(m[k])}return y},t.V=function(u){Qr(this);let m=[];if(typeof u=="string")w0(this,u)&&(m=m.concat(this.g.get(Wi(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)m=m.concat(u[y])}return m},t.set=function(u,m){return Qr(this),this.i=null,u=Wi(this,u),w0(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function x0(u,m,y){v0(u,m),0<y.length&&(u.i=null,u.g.set(Wi(u,m),T(y)),u.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var y=0;y<m.length;y++){var k=m[y];const O=encodeURIComponent(String(k)),$=this.V(k);for(k=0;k<$.length;k++){var M=O;$[k]!==""&&(M+="="+encodeURIComponent(String($[k]))),u.push(M)}}return this.i=u.join("&")};function Wi(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function _N(u,m){m&&!u.j&&(Qr(u),u.i=null,u.g.forEach(function(y,k){var M=k.toLowerCase();k!=M&&(v0(this,k),x0(this,M,y))},u)),u.j=m}function TN(u,m){const y=new Xn;if(a.Image){const k=new Image;k.onload=g(Yr,y,"TestLoadImage: loaded",!0,m,k),k.onerror=g(Yr,y,"TestLoadImage: error",!1,m,k),k.onabort=g(Yr,y,"TestLoadImage: abort",!1,m,k),k.ontimeout=g(Yr,y,"TestLoadImage: timeout",!1,m,k),a.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=u}else m(!1)}function EN(u,m){const y=new Xn,k=new AbortController,M=setTimeout(()=>{k.abort(),Yr(y,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:k.signal}).then(O=>{clearTimeout(M),O.ok?Yr(y,"TestPingServer: ok",!0,m):Yr(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(M),Yr(y,"TestPingServer: error",!1,m)})}function Yr(u,m,y,k,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),k(y)}catch{}}function SN(){this.g=new Ec}function IN(u,m,y){const k=y||"";try{p0(u,function(M,O){let $=M;d(M)&&($=zi(M)),m.push(k+O+"="+encodeURIComponent($))})}catch(M){throw m.push(k+"type="+encodeURIComponent("_badmap")),M}}function Pc(u){this.l=u.Ub||null,this.j=u.eb||!1}w(Pc,Ks),Pc.prototype.g=function(){return new Rc(this.l,this.j)},Pc.prototype.i=function(u){return function(){return u}}({});function Rc(u,m){at.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Rc,at),t=Rc.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,wa(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||a).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,va(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,wa(this)),this.g&&(this.readyState=3,wa(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_0(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function _0(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?va(this):wa(this),this.readyState==3&&_0(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,va(this))},t.Qa=function(u){this.g&&(this.response=u,va(this))},t.ga=function(){this.g&&va(this)};function va(u){u.readyState=4,u.l=null,u.j=null,u.v=null,wa(u)}t.setRequestHeader=function(u,m){this.u.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=m.next();return u.join(`\r
`)};function wa(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Rc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function T0(u){let m="";return V(u,function(y,k){m+=k,m+=":",m+=y,m+=`\r
`}),m}function Xh(u,m,y){e:{for(k in y){var k=!1;break e}k=!0}k||(y=T0(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):je(u,m,y))}function Ke(u){at.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Ke,at);var bN=/^https?$/i,CN=["POST","PUT"];t=Ke.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,m,y,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Wh.g(),this.v=this.o?J(this.o):J(Wh),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(O){E0(this,O);return}if(u=y||"",y=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var M in k)y.set(M,k[M]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const O of k.keys())y.set(O,k.get(O));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(y.keys()).find(O=>O.toLowerCase()=="content-type"),M=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(CN,m,void 0))||k||M||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,$]of y)this.g.setRequestHeader(O,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{b0(this),this.u=!0,this.g.send(u),this.u=!1}catch(O){E0(this,O)}};function E0(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,S0(u),jc(u)}function S0(u){u.A||(u.A=!0,ut(u,"complete"),ut(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ut(this,"complete"),ut(this,"abort"),jc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jc(this,!0)),Ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?I0(this):this.bb())},t.bb=function(){I0(this)};function I0(u){if(u.h&&typeof o<"u"&&(!u.v[1]||yr(u)!=4||u.Z()!=2)){if(u.u&&yr(u)==4)da(u.Ea,0,u);else if(ut(u,"readystatechange"),yr(u)==4){u.h=!1;try{const $=u.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var k;if(k=$===0){var M=String(u.D).match(m0)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),k=!bN.test(M?M.toLowerCase():"")}y=k}if(y)ut(u,"complete"),ut(u,"success");else{u.m=6;try{var O=2<yr(u)?u.g.statusText:""}catch{O=""}u.l=O+" ["+u.Z()+"]",S0(u)}}finally{jc(u)}}}}function jc(u,m){if(u.g){b0(u);const y=u.g,k=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||ut(u,"ready");try{y.onreadystatechange=k}catch{}}}function b0(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function yr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<yr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Tc(m)}};function C0(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function kN(u){const m={};u=(u.g&&2<=yr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<u.length;k++){if(v(u[k]))continue;var y=P(u[k]);const M=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const O=m[M]||[];m[M]=O,O.push(y)}S(m,function(k){return k.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xa(u,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||m}function k0(u){this.Aa=0,this.i=[],this.j=new Xn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xa("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xa("baseRetryDelayMs",5e3,u),this.cb=xa("retryDelaySeedMs",1e4,u),this.Wa=xa("forwardChannelMaxRetries",2,u),this.wa=xa("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new c0(u&&u.concurrentRequestLimit),this.Da=new SN,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=k0.prototype,t.la=8,t.G=1,t.connect=function(u,m,y,k){bt(0),this.W=u,this.H=m||{},y&&k!==void 0&&(this.H.OSID=y,this.H.OAID=k),this.F=this.X,this.I=O0(this,null,this.W),Mc(this)};function Jh(u){if(N0(u),u.G==3){var m=u.U++,y=gr(u.I);if(je(y,"SID",u.K),je(y,"RID",m),je(y,"TYPE","terminate"),_a(u,y),m=new Gr(u,u.j,m),m.L=2,m.v=Ac(gr(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(m.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=m.v,y=!0),y||(m.g=L0(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Cc(m)}V0(u)}function Dc(u){u.g&&(ef(u),u.g.cancel(),u.g=null)}function N0(u){Dc(u),u.u&&(a.clearTimeout(u.u),u.u=null),Vc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Mc(u){if(!u0(u.h)&&!u.s){u.s=!0;var m=u.Ga;Z||q(),U||(Z(),U=!0),W.add(m,u),u.B=0}}function NN(u,m){return d0(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Kt(p(u.Ga,u,m),M0(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new Gr(this,this.j,u);let O=this.o;if(this.S&&(O?(O=E(O),I(O,this.S)):O=this.S),this.m!==null||this.O||(M.H=O,O=null),this.P)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var k=this.i[y];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(m+=k,4096<m){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=P0(this,M,m),y=gr(this.I),je(y,"RID",u),je(y,"CVER",22),this.D&&je(y,"X-HTTP-Session-Id",this.D),_a(this,y),O&&(this.O?m="headers="+encodeURIComponent(String(T0(O)))+"&"+m:this.m&&Xh(y,this.m,O)),Yh(this.h,M),this.Ua&&je(y,"TYPE","init"),this.P?(je(y,"$req",m),je(y,"SID","null"),M.T=!0,qh(M,y,null)):qh(M,y,m),this.G=2}}else this.G==3&&(u?A0(this,u):this.i.length==0||u0(this.h)||A0(this))};function A0(u,m){var y;m?y=m.l:y=u.U++;const k=gr(u.I);je(k,"SID",u.K),je(k,"RID",y),je(k,"AID",u.T),_a(u,k),u.m&&u.o&&Xh(k,u.m,u.o),y=new Gr(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),m&&(u.i=m.D.concat(u.i)),m=P0(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Yh(u.h,y),qh(y,k,m)}function _a(u,m){u.H&&V(u.H,function(y,k){je(m,k,y)}),u.l&&p0({},function(y,k){je(m,k,y)})}function P0(u,m,y){y=Math.min(u.i.length,y);var k=u.l?p(u.l.Na,u.l,u):null;e:{var M=u.i;let O=-1;for(;;){const $=["count="+y];O==-1?0<y?(O=M[0].g,$.push("ofs="+O)):O=0:$.push("ofs="+O);let Pe=!0;for(let mt=0;mt<y;mt++){let xe=M[mt].g;const Ct=M[mt].map;if(xe-=O,0>xe)O=Math.max(0,M[mt].g-100),Pe=!1;else try{IN(Ct,$,"req"+xe+"_")}catch{k&&k(Ct)}}if(Pe){k=$.join("&");break e}}}return u=u.i.splice(0,y),m.D=u,k}function R0(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;Z||q(),U||(Z(),U=!0),W.add(m,u),u.v=0}}function Zh(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Kt(p(u.Fa,u),M0(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,j0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Kt(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),Dc(this),j0(this))};function ef(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function j0(u){u.g=new Gr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=gr(u.qa);je(m,"RID","rpc"),je(m,"SID",u.K),je(m,"AID",u.T),je(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&je(m,"TO",u.ja),je(m,"TYPE","xmlhttp"),_a(u,m),u.m&&u.o&&Xh(m,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=Ac(gr(m)),y.m=null,y.P=!0,o0(y,u)}t.Za=function(){this.C!=null&&(this.C=null,Dc(this),Zh(this),bt(19))};function Vc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function D0(u,m){var y=null;if(u.g==m){Vc(u),ef(u),u.g=null;var k=2}else if(Qh(u.h,m))y=m.D,h0(u.h,m),k=1;else return;if(u.G!=0){if(m.o)if(k==1){y=m.m?m.m.length:0,m=Date.now()-m.F;var M=u.B;k=be(),ut(k,new mr(k,y)),Mc(u)}else R0(u);else if(M=m.s,M==3||M==0&&0<m.X||!(k==1&&NN(u,m)||k==2&&Zh(u)))switch(y&&0<y.length&&(m=u.h,m.i=m.i.concat(y)),M){case 1:Ys(u,5);break;case 4:Ys(u,10);break;case 3:Ys(u,6);break;default:Ys(u,2)}}}function M0(u,m){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*m}function Ys(u,m){if(u.j.info("Error code "+m),m==2){var y=p(u.fb,u),k=u.Xa;const M=!k;k=new Qs(k||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||kc(k,"https"),Ac(k),M?TN(k.toString(),y):EN(k.toString(),y)}else bt(2);u.G=0,u.l&&u.l.sa(m),V0(u),N0(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function V0(u){if(u.G=0,u.ka=[],u.l){const m=f0(u.h);(m.length!=0||u.i.length!=0)&&(C(u.ka,m),C(u.ka,u.i),u.h.i.length=0,T(u.i),u.i.length=0),u.l.ra()}}function O0(u,m,y){var k=y instanceof Qs?gr(y):new Qs(y);if(k.g!="")m&&(k.g=m+"."+k.g),Nc(k,k.s);else{var M=a.location;k=M.protocol,m=m?m+"."+M.hostname:M.hostname,M=+M.port;var O=new Qs(null);k&&kc(O,k),m&&(O.g=m),M&&Nc(O,M),y&&(O.l=y),k=O}return y=u.D,m=u.ya,y&&m&&je(k,y,m),je(k,"VER",u.la),_a(u,k),k}function L0(u,m,y){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Ke(new Pc({eb:y})):new Ke(u.pa),m.Ha(u.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function F0(){}t=F0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Oc(){}Oc.prototype.g=function(u,m){return new sn(u,m)};function sn(u,m){at.call(this),this.g=new k0(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!v(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!v(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Hi(this)}w(sn,at),sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){Jh(this.g)},sn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=zi(u),u=y);m.i.push(new hN(m.Ya++,u)),m.G==3&&Mc(m)},sn.prototype.N=function(){this.g.l=null,delete this.j,Jh(this.g),delete this.g,sn.aa.N.call(this)};function U0(u){Q.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const y in m){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}w(U0,Q);function B0(){re.call(this),this.status=1}w(B0,re);function Hi(u){this.g=u}w(Hi,F0),Hi.prototype.ua=function(){ut(this.g,"a")},Hi.prototype.ta=function(u){ut(this.g,new U0(u))},Hi.prototype.sa=function(u){ut(this.g,new B0)},Hi.prototype.ra=function(){ut(this.g,"b")},Oc.prototype.createWebChannel=Oc.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,n2=function(){return new Oc},t2=function(){return be()},e2=oe,xm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ic.NO_ERROR=0,Ic.TIMEOUT=8,Ic.HTTP_ERROR=6,bu=Ic,r0.COMPLETE="complete",ZS=r0,F.EventType=K,K.OPEN="a",K.CLOSE="b",K.ERROR="c",K.MESSAGE="d",at.prototype.listen=at.prototype.K,La=F,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,JS=Ke}).apply(typeof nu<"u"?nu:typeof self<"u"?self:typeof window<"u"?window:{});const vx="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rt.UNAUTHENTICATED=new Rt(null),Rt.GOOGLE_CREDENTIALS=new Rt("google-credentials-uid"),Rt.FIRST_PARTY=new Rt("first-party-uid"),Rt.MOCK_USER=new Rt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ta="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=new sh("@firebase/firestore");function Aa(){return bi.logLevel}function X(t,...e){if(bi.logLevel<=ye.DEBUG){const n=e.map(yy);bi.debug(`Firestore (${ta}): ${t}`,...n)}}function Lr(t,...e){if(bi.logLevel<=ye.ERROR){const n=e.map(yy);bi.error(`Firestore (${ta}): ${t}`,...n)}}function Oo(t,...e){if(bi.logLevel<=ye.WARN){const n=e.map(yy);bi.warn(`Firestore (${ta}): ${t}`,...n)}}function yy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t="Unexpected state"){const e=`FIRESTORE (${ta}) INTERNAL ASSERTION FAILED: `+t;throw Lr(e),new Error(e)}function Ne(t,e){t||ae()}function de(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends Qn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Rt.UNAUTHENTICATED))}shutdown(){}}class nD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class rD{constructor(e){this.t=e,this.currentUser=Rt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ne(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Pr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Pr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},a=c=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Pr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ne(typeof r.accessToken=="string"),new r2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ne(e===null||typeof e=="string"),new Rt(e)}}class sD{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Rt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class iD{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new sD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Rt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aD{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ne(this.o===void 0);const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ne(typeof n.token=="string"),this.R=n.token,new oD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=lD(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function _e(t,e){return t<e?-1:t>e?1:0}function Lo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ye(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ue(e)}static min(){return new ue(new Ye(0,0))}static max(){return new ue(new Ye(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n,r){n===void 0?n=0:n>e.length&&ae(),r===void 0?r=e.length-n:r>e.length-n&&ae(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return jl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof jl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Me extends jl{construct(e,n,r){return new Me(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Me(n)}static emptyPath(){return new Me([])}}const cD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wt extends jl{construct(e,n,r){return new wt(e,n,r)}static isValidIdentifier(e){return cD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new wt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new G(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new G(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new G(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wt(n)}static emptyPath(){return new wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Me.fromString(e))}static fromName(e){return new te(Me.fromString(e).popFirst(5))}static empty(){return new te(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Me(e.slice()))}}function uD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ue.fromTimestamp(r===1e9?new Ye(n+1,0):new Ye(n,r));return new ks(s,te.empty(),e)}function dD(t){return new ks(t.readTime,t.key,-1)}class ks{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ks(ue.min(),te.empty(),-1)}static max(){return new ks(ue.max(),te.empty(),-1)}}function hD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:_e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rc(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==fD)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(s=>s?B.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new B((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(h=>{o[d]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new B((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function mD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}vy.oe=-1;function ah(t){return t==null}function pd(t){return t===0&&1/t==-1/0}function gD(t){return typeof t=="number"&&Number.isInteger(t)&&!pd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Vi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function i2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,n){this.comparator=e,this.root=n||vt.EMPTY}insert(e,n){return new qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vt.BLACK,null,null))}remove(e){return new qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ru(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ru(this.root,e,this.comparator,!1)}getReverseIterator(){return new ru(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ru(this.root,e,this.comparator,!0)}}class ru{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??vt.RED,this.left=s??vt.EMPTY,this.right=i??vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new vt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return vt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}}vt.EMPTY=null,vt.RED=!0,vt.BLACK=!1;vt.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,n,r,s,i){return this}insert(e,n,r){return new vt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new xx(this.data.getIterator())}getIteratorFrom(e){return new xx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new _t(this.comparator);return n.data=e,n}}class xx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.fields=e,e.sort(wt.comparator)}static empty(){return new cn([])}unionWith(e){let n=new _t(wt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Lo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new o2("Invalid base64 string: "+i):i}}(e);return new Et(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Et.EMPTY_BYTE_STRING=new Et("");const yD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ns(t){if(Ne(!!t),typeof t=="string"){let e=0;const n=yD.exec(t);if(Ne(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:et(t.seconds),nanos:et(t.nanos)}}function et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ci(t){return typeof t=="string"?Et.fromBase64String(t):Et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function xy(t){const e=t.mapValue.fields.__previous_value__;return wy(e)?xy(e):e}function Dl(t){const e=Ns(t.mapValue.fields.__local_write_time__.timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e,n,r,s,i,o,a,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d}}class Ml{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ml("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ml&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su={mapValue:{}};function ki(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wy(t)?4:xD(t)?9007199254740991:wD(t)?10:11:ae()}function dr(t,e){if(t===e)return!0;const n=ki(t);if(n!==ki(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Dl(t).isEqual(Dl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ns(s.timestampValue),a=Ns(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ci(s.bytesValue).isEqual(Ci(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return et(s.geoPointValue.latitude)===et(i.geoPointValue.latitude)&&et(s.geoPointValue.longitude)===et(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return et(s.integerValue)===et(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=et(s.doubleValue),a=et(i.doubleValue);return o===a?pd(o)===pd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Lo(t.arrayValue.values||[],e.arrayValue.values||[],dr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(wx(o)!==wx(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!dr(o[c],a[c])))return!1;return!0}(t,e);default:return ae()}}function Vl(t,e){return(t.values||[]).find(n=>dr(n,e))!==void 0}function Fo(t,e){if(t===e)return 0;const n=ki(t),r=ki(e);if(n!==r)return _e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _e(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=et(i.integerValue||i.doubleValue),c=et(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return _x(t.timestampValue,e.timestampValue);case 4:return _x(Dl(t),Dl(e));case 5:return _e(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Ci(i),c=Ci(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){const h=_e(a[d],c[d]);if(h!==0)return h}return _e(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=_e(et(i.latitude),et(o.latitude));return a!==0?a:_e(et(i.longitude),et(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Tx(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,c,d,h;const f=i.fields||{},p=o.fields||{},g=(a=f.value)===null||a===void 0?void 0:a.arrayValue,w=(c=p.value)===null||c===void 0?void 0:c.arrayValue,T=_e(((d=g==null?void 0:g.values)===null||d===void 0?void 0:d.length)||0,((h=w==null?void 0:w.values)===null||h===void 0?void 0:h.length)||0);return T!==0?T:Tx(g,w)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===su.mapValue&&o===su.mapValue)return 0;if(i===su.mapValue)return 1;if(o===su.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const p=_e(c[f],h[f]);if(p!==0)return p;const g=Fo(a[c[f]],d[h[f]]);if(g!==0)return g}return _e(c.length,h.length)}(t.mapValue,e.mapValue);default:throw ae()}}function _x(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _e(t,e);const n=Ns(t),r=Ns(e),s=_e(n.seconds,r.seconds);return s!==0?s:_e(n.nanos,r.nanos)}function Tx(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Fo(n[s],r[s]);if(i)return i}return _e(n.length,r.length)}function Uo(t){return _m(t)}function _m(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ns(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ci(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=_m(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${_m(n.fields[o])}`;return s+"}"}(t.mapValue):ae()}function Ex(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Tm(t){return!!t&&"integerValue"in t}function _y(t){return!!t&&"arrayValue"in t}function Sx(t){return!!t&&"nullValue"in t}function Ix(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Cu(t){return!!t&&"mapValue"in t}function wD(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Za(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Vi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Za(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Za(t.arrayValue.values[n]);return e}return Object.assign({},t)}function xD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.value=e}static empty(){return new Qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Cu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Za(n)}setAll(e){let n=wt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Za(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Cu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return dr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Cu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Vi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Qt(Za(this.value))}}function a2(t){const e=[];return Vi(t.fields,(n,r)=>{const s=new wt([n]);if(Cu(r)){const i=a2(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Dt(e,0,ue.min(),ue.min(),ue.min(),Qt.empty(),0)}static newFoundDocument(e,n,r,s){return new Dt(e,1,n,ue.min(),r,s,0)}static newNoDocument(e,n){return new Dt(e,2,n,ue.min(),ue.min(),Qt.empty(),0)}static newUnknownDocument(e,n){return new Dt(e,3,n,ue.min(),ue.min(),Qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,n){this.position=e,this.inclusive=n}}function bx(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=Fo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Cx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!dr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,n="asc"){this.field=e,this.dir=n}}function _D(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{}class it extends l2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ED(e,n,r):n==="array-contains"?new bD(e,r):n==="in"?new CD(e,r):n==="not-in"?new kD(e,r):n==="array-contains-any"?new ND(e,r):new it(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new SD(e,r):new ID(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Fo(n,this.value)):n!==null&&ki(this.value)===ki(n)&&this.matchesComparison(Fo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kn extends l2{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Kn(e,n)}matches(e){return c2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function c2(t){return t.op==="and"}function u2(t){return TD(t)&&c2(t)}function TD(t){for(const e of t.filters)if(e instanceof Kn)return!1;return!0}function Em(t){if(t instanceof it)return t.field.canonicalString()+t.op.toString()+Uo(t.value);if(u2(t))return t.filters.map(e=>Em(e)).join(",");{const e=t.filters.map(n=>Em(n)).join(",");return`${t.op}(${e})`}}function d2(t,e){return t instanceof it?function(r,s){return s instanceof it&&r.op===s.op&&r.field.isEqual(s.field)&&dr(r.value,s.value)}(t,e):t instanceof Kn?function(r,s){return s instanceof Kn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&d2(o,s.filters[a]),!0):!1}(t,e):void ae()}function h2(t){return t instanceof it?function(n){return`${n.field.canonicalString()} ${n.op} ${Uo(n.value)}`}(t):t instanceof Kn?function(n){return n.op.toString()+" {"+n.getFilters().map(h2).join(" ,")+"}"}(t):"Filter"}class ED extends it{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class SD extends it{constructor(e,n){super(e,"in",n),this.keys=f2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class ID extends it{constructor(e,n){super(e,"not-in",n),this.keys=f2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function f2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class bD extends it{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return _y(n)&&Vl(n.arrayValue,this.value)}}class CD extends it{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Vl(this.value.arrayValue,n)}}class kD extends it{constructor(e,n){super(e,"not-in",n)}matches(e){if(Vl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Vl(this.value.arrayValue,n)}}class ND extends it{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!_y(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Vl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function kx(t,e=null,n=[],r=[],s=null,i=null,o=null){return new AD(t,e,n,r,s,i,o)}function Ty(t){const e=de(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Em(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),ah(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Uo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Uo(r)).join(",")),e.ue=n}return e.ue}function Ey(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!_D(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!d2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Cx(t.startAt,e.startAt)&&Cx(t.endAt,e.endAt)}function Sm(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function PD(t,e,n,r,s,i,o,a){return new na(t,e,n,r,s,i,o,a)}function lh(t){return new na(t)}function Nx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function p2(t){return t.collectionGroup!==null}function el(t){const e=de(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new _t(wt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ol(i,r))}),n.has(wt.keyField().canonicalString())||e.ce.push(new Ol(wt.keyField(),r))}return e.ce}function sr(t){const e=de(t);return e.le||(e.le=RD(e,el(t))),e.le}function RD(t,e){if(t.limitType==="F")return kx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ol(s.field,i)});const n=t.endAt?new md(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new md(t.startAt.position,t.startAt.inclusive):null;return kx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Im(t,e){const n=t.filters.concat([e]);return new na(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function bm(t,e,n){return new na(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ch(t,e){return Ey(sr(t),sr(e))&&t.limitType===e.limitType}function m2(t){return`${Ty(sr(t))}|lt:${t.limitType}`}function Gi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>h2(s)).join(", ")}]`),ah(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Uo(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Uo(s)).join(",")),`Target(${r})`}(sr(t))}; limitType=${t.limitType})`}function uh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of el(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,c){const d=bx(o,a,c);return o.inclusive?d<=0:d<0}(r.startAt,el(r),s)||r.endAt&&!function(o,a,c){const d=bx(o,a,c);return o.inclusive?d>=0:d>0}(r.endAt,el(r),s))}(t,e)}function jD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function g2(t){return(e,n)=>{let r=!1;for(const s of el(t)){const i=DD(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function DD(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(i,o,a){const c=o.data.field(i),d=a.data.field(i);return c!==null&&d!==null?Fo(c,d):ae()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Vi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return i2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=new qe(te.comparator);function Fr(){return MD}const y2=new qe(te.comparator);function Fa(...t){let e=y2;for(const n of t)e=e.insert(n.key,n);return e}function v2(t){let e=y2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ai(){return tl()}function w2(){return tl()}function tl(){return new ra(t=>t.toString(),(t,e)=>t.isEqual(e))}const VD=new qe(te.comparator),OD=new _t(te.comparator);function ge(...t){let e=OD;for(const n of t)e=e.add(n);return e}const LD=new _t(_e);function FD(){return LD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pd(e)?"-0":e}}function x2(t){return{integerValue:""+t}}function UD(t,e){return gD(e)?x2(e):Sy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(){this._=void 0}}function BD(t,e,n){return t instanceof Ll?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&wy(i)&&(i=xy(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Bo?T2(t,e):t instanceof Fl?E2(t,e):function(s,i){const o=_2(s,i),a=Ax(o)+Ax(s.Pe);return Tm(o)&&Tm(s.Pe)?x2(a):Sy(s.serializer,a)}(t,e)}function zD(t,e,n){return t instanceof Bo?T2(t,e):t instanceof Fl?E2(t,e):n}function _2(t,e){return t instanceof gd?function(r){return Tm(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ll extends dh{}class Bo extends dh{constructor(e){super(),this.elements=e}}function T2(t,e){const n=S2(e);for(const r of t.elements)n.some(s=>dr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Fl extends dh{constructor(e){super(),this.elements=e}}function E2(t,e){let n=S2(e);for(const r of t.elements)n=n.filter(s=>!dr(s,r));return{arrayValue:{values:n}}}class gd extends dh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Ax(t){return et(t.integerValue||t.doubleValue)}function S2(t){return _y(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,n){this.field=e,this.transform=n}}function $D(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Bo&&s instanceof Bo||r instanceof Fl&&s instanceof Fl?Lo(r.elements,s.elements,dr):r instanceof gd&&s instanceof gd?dr(r.Pe,s.Pe):r instanceof Ll&&s instanceof Ll}(t.transform,e.transform)}class WD{constructor(e,n){this.version=e,this.transformResults=n}}class Hn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Hn}static exists(e){return new Hn(void 0,e)}static updateTime(e){return new Hn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ku(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class hh{}function b2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new k2(t.key,Hn.none()):new ic(t.key,t.data,Hn.none());{const n=t.data,r=Qt.empty();let s=new _t(wt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Us(t.key,r,new cn(s.toArray()),Hn.none())}}function HD(t,e,n){t instanceof ic?function(s,i,o){const a=s.value.clone(),c=Rx(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Us?function(s,i,o){if(!ku(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Rx(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(C2(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function nl(t,e,n,r){return t instanceof ic?function(i,o,a,c){if(!ku(i.precondition,o))return a;const d=i.value.clone(),h=jx(i.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Us?function(i,o,a,c){if(!ku(i.precondition,o))return a;const d=jx(i.fieldTransforms,c,o),h=o.data;return h.setAll(C2(i)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return ku(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function qD(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=_2(r.transform,s||null);i!=null&&(n===null&&(n=Qt.empty()),n.set(r.field,i))}return n||null}function Px(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Lo(r,s,(i,o)=>$D(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ic extends hh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Us extends hh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function C2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Rx(t,e,n){const r=new Map;Ne(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,zD(o,a,n[s]))}return r}function jx(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,BD(i,o,e))}return r}class k2 extends hh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KD extends hh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&HD(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=nl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=nl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=w2();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const c=b2(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&Lo(this.mutations,e.mutations,(n,r)=>Px(n,r))&&Lo(this.baseMutations,e.baseMutations,(n,r)=>Px(n,r))}}class Iy{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ne(e.mutations.length===r.length);let s=function(){return VD}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Iy(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt,ve;function XD(t){switch(t){default:return ae();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function N2(t){if(t===void 0)return Lr("GRPC error has no .code"),L.UNKNOWN;switch(t){case nt.OK:return L.OK;case nt.CANCELLED:return L.CANCELLED;case nt.UNKNOWN:return L.UNKNOWN;case nt.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case nt.INTERNAL:return L.INTERNAL;case nt.UNAVAILABLE:return L.UNAVAILABLE;case nt.UNAUTHENTICATED:return L.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case nt.NOT_FOUND:return L.NOT_FOUND;case nt.ALREADY_EXISTS:return L.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return L.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case nt.ABORTED:return L.ABORTED;case nt.OUT_OF_RANGE:return L.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return L.UNIMPLEMENTED;case nt.DATA_LOSS:return L.DATA_LOSS;default:return ae()}}(ve=nt||(nt={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=new mi([4294967295,4294967295],0);function Dx(t){const e=JD().encode(t),n=new XS;return n.update(e),new Uint8Array(n.digest())}function Mx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new mi([n,r],0),new mi([s,i],0)]}class by{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ua(`Invalid padding: ${n}`);if(r<0)throw new Ua(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ua(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ua(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=mi.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(mi.fromNumber(r)));return s.compare(ZD)===1&&(s=new mi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Dx(e),[r,s]=Mx(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new by(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=Dx(e),[r,s]=Mx(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ua extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,oc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new fh(ue.min(),s,new qe(_e),Fr(),ge())}}class oc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new oc(r,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class A2{constructor(e,n){this.targetId=e,this.me=n}}class P2{constructor(e,n,r=Et.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Vx{constructor(){this.fe=0,this.ge=Lx(),this.pe=Et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ge(),n=ge(),r=ge();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ae()}}),new oc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Lx()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ne(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class eM{constructor(e){this.Le=e,this.Be=new Map,this.ke=Fr(),this.qe=Ox(),this.Qe=new qe(_e)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Sm(i))if(r===0){const o=new te(i.path);this.Ue(n,o,Dt.newNoDocument(o,ue.min()))}else Ne(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Ci(r).toUint8Array()}catch(c){if(c instanceof o2)return Oo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new by(o,s,i)}catch(c){return Oo(c instanceof Ua?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&Sm(a.target)){const c=new te(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Dt.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ge();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new fh(e,n,this.Qe,this.ke,r);return this.ke=Fr(),this.qe=Ox(),this.Qe=new qe(_e),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Vx,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new _t(_e),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Vx),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Ox(){return new qe(te.comparator)}function Lx(){return new qe(te.comparator)}const tM={asc:"ASCENDING",desc:"DESCENDING"},nM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rM={and:"AND",or:"OR"};class sM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Cm(t,e){return t.useProto3Json||ah(e)?e:{value:e}}function yd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function R2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function iM(t,e){return yd(t,e.toTimestamp())}function ir(t){return Ne(!!t),ue.fromTimestamp(function(n){const r=Ns(n);return new Ye(r.seconds,r.nanos)}(t))}function Cy(t,e){return km(t,e).canonicalString()}function km(t,e){const n=function(s){return new Me(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function j2(t){const e=Me.fromString(t);return Ne(L2(e)),e}function Nm(t,e){return Cy(t.databaseId,e.path)}function Vf(t,e){const n=j2(e);if(n.get(1)!==t.databaseId.projectId)throw new G(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(M2(n))}function D2(t,e){return Cy(t.databaseId,e)}function oM(t){const e=j2(t);return e.length===4?Me.emptyPath():M2(e)}function Am(t){return new Me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function M2(t){return Ne(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Fx(t,e,n){return{name:Nm(t,e),fields:n.value.mapValue.fields}}function aM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(Ne(h===void 0||typeof h=="string"),Et.fromBase64String(h||"")):(Ne(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Et.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const h=d.code===void 0?L.UNKNOWN:N2(d.code);return new G(h,d.message||"")}(o);n=new P2(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Vf(t,r.document.name),i=ir(r.document.updateTime),o=r.document.createTime?ir(r.document.createTime):ue.min(),a=new Qt({mapValue:{fields:r.document.fields}}),c=Dt.newFoundDocument(s,i,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Nu(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Vf(t,r.document),i=r.readTime?ir(r.readTime):ue.min(),o=Dt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Nu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Vf(t,r.document),i=r.removedTargetIds||[];n=new Nu([],i,s,null)}else{if(!("filter"in e))return ae();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new YD(s,i),a=r.targetId;n=new A2(a,o)}}return n}function lM(t,e){let n;if(e instanceof ic)n={update:Fx(t,e.key,e.value)};else if(e instanceof k2)n={delete:Nm(t,e.key)};else if(e instanceof Us)n={update:Fx(t,e.key,e.data),updateMask:yM(e.fieldMask)};else{if(!(e instanceof KD))return ae();n={verify:Nm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Ll)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Bo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Fl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof gd)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ae()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:iM(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ae()}(t,e.precondition)),n}function cM(t,e){return t&&t.length>0?(Ne(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?ir(s.updateTime):ir(i);return o.isEqual(ue.min())&&(o=ir(i)),new WD(o,s.transformResults||[])}(n,e))):[]}function uM(t,e){return{documents:[D2(t,e.path)]}}function dM(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=D2(t,s);const i=function(d){if(d.length!==0)return O2(Kn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(h=>function(p){return{field:Qi(p.field),direction:pM(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Cm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function hM(t){let e=oM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ne(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const p=V2(f);return p instanceof Kn&&u2(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(w){return new Ol(Yi(w.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,ah(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(f){const p=!!f.before,g=f.values||[];return new md(g,p)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const p=!f.before,g=f.values||[];return new md(g,p)}(n.endAt)),PD(e,s,o,i,a,"F",c,d)}function fM(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function V2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Yi(n.unaryFilter.field);return it.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Yi(n.unaryFilter.field);return it.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Yi(n.unaryFilter.field);return it.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Yi(n.unaryFilter.field);return it.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(n){return it.create(Yi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Kn.create(n.compositeFilter.filters.map(r=>V2(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ae()}}(n.compositeFilter.op))}(t):ae()}function pM(t){return tM[t]}function mM(t){return nM[t]}function gM(t){return rM[t]}function Qi(t){return{fieldPath:t.canonicalString()}}function Yi(t){return wt.fromServerFormat(t.fieldPath)}function O2(t){return t instanceof it?function(n){if(n.op==="=="){if(Ix(n.value))return{unaryFilter:{field:Qi(n.field),op:"IS_NAN"}};if(Sx(n.value))return{unaryFilter:{field:Qi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ix(n.value))return{unaryFilter:{field:Qi(n.field),op:"IS_NOT_NAN"}};if(Sx(n.value))return{unaryFilter:{field:Qi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qi(n.field),op:mM(n.op),value:n.value}}}(t):t instanceof Kn?function(n){const r=n.getFilters().map(s=>O2(s));return r.length===1?r[0]:{compositeFilter:{op:gM(n.op),filters:r}}}(t):ae()}function yM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function L2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,n,r,s,i=ue.min(),o=ue.min(),a=Et.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e){this.ct=e}}function wM(t){const e=hM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?bm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(){this.un=new _M}addToCollectionParentIndex(e,n){return this.un.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(ks.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(ks.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class _M{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new _t(Me.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new _t(Me.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new zo(0)}static kn(){return new zo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(){this.changes=new ra(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&nl(r.mutation,s,cn.empty(),Ye.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){const s=ai();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Fa();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ai();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Fr();const o=tl(),a=function(){return tl()}();return n.forEach((c,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof Us)?i=i.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),nl(h.mutation,d,h.mutation.getFieldMask(),Ye.now())):o.set(d.key,cn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>{var f;return a.set(d,new EM(h,(f=o.get(d))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=tl();let s=new qe((o,a)=>o-a),i=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=r.get(c)||cn.empty();h=a.applyToLocalView(d,h),r.set(c,h);const f=(s.get(a.batchId)||ge()).add(c);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),d=c.key,h=c.value,f=w2();h.forEach(p=>{if(!i.has(p)){const g=b2(n.get(p),r.get(p));g!==null&&f.set(p,g),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,f))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):p2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):B.resolve(ai());let a=-1,c=i;return o.next(d=>B.forEach(d,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,ge())).next(h=>({batchId:a,changes:v2(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let s=Fa();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Fa();return this.indexManager.getCollectionParents(e,i).next(a=>B.forEach(a,c=>{const d=function(f,p){return new na(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,Dt.newInvalidDocument(h)))});let a=Fa();return o.forEach((c,d)=>{const h=i.get(c);h!==void 0&&nl(h.mutation,d,cn.empty(),Ye.now()),uh(n,d)&&(a=a.insert(c,d))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return B.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ir(s.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:wM(s.bundledQuery),readTime:ir(s.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(){this.overlays=new qe(te.comparator),this.Ir=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ai();return B.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const s=ai(),i=n.length+1,o=new te(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return B.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new qe((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=ai(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const a=ai(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=s)););return B.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new QD(n,r));let i=this.Ir.get(n);i===void 0&&(i=ge(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(){this.sessionToken=Et.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(){this.Tr=new _t(dt.Er),this.dr=new _t(dt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new dt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new dt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new te(new Me([])),r=new dt(n,e),s=new dt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new te(new Me([])),r=new dt(n,e),s=new dt(n,e+1);let i=ge();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new dt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class dt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return te.comparator(e.key,n.key)||_e(e.wr,n.wr)}static Ar(e,n){return _e(e.wr,n.wr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new _t(dt.Er)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new GD(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new dt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new dt(n,0),s=new dt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new _t(_e);return n.forEach(s=>{const i=new dt(s,0),o=new dt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),B.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const o=new dt(new te(i),0);let a=new _t(_e);return this.br.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(a=a.add(c.wr)),!0)},o),B.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ne(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return B.forEach(n.mutations,s=>{const i=new dt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new dt(n,0),s=this.br.firstAfterOrEqual(r);return B.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e){this.Mr=e,this.docs=function(){return new qe(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():Dt.newInvalidDocument(n))}getEntries(e,n){let r=Fr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Dt.newInvalidDocument(s))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Fr();const o=n.path,a=new te(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||hD(dD(h),r)<=0||(s.has(h.key)||uh(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ae()}Or(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new AM(this)}getSize(e){return B.resolve(this.size)}}class AM extends TM{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e){this.persistence=e,this.Nr=new ra(n=>Ty(n),Ey),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ky,this.targetCount=0,this.kr=zo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),B.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new zo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Kn(n),B.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),B.waitFor(i).next(()=>s)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),B.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e,n){this.qr={},this.overlays={},this.Qr=new vy(0),this.Kr=!1,this.Kr=!0,this.$r=new CM,this.referenceDelegate=e(this),this.Ur=new PM(this),this.indexManager=new xM,this.remoteDocumentCache=function(s){return new NM(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new vM(n),this.Gr=new IM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new bM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new kM(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new jM(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return B.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class jM extends pD{constructor(e){super(),this.currentSequenceNumber=e}}class Ny{constructor(e){this.persistence=e,this.Jr=new ky,this.Yr=null}static Zr(e){return new Ny(e)}get Xr(){if(this.Yr)return this.Yr;throw ae()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),B.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Xr,r=>{const s=te.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ue.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return B.or([()=>B.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ge(),s=ge();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ay(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return O4()?8:mD(Ut())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new DM;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Aa()<=ye.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",Gi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),B.resolve()):(Aa()<=ye.DEBUG&&X("QueryEngine","Query:",Gi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Aa()<=ye.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",Gi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sr(n))):B.resolve())}Yi(e,n){if(Nx(n))return B.resolve(null);let r=sr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=bm(n,null,"F"),r=sr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ge(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.ts(n,a);return this.ns(n,d,o,c.readTime)?this.Yi(e,bm(n,null,"F")):this.rs(e,d,n,c)}))})))}Zi(e,n,r,s){return Nx(n)||s.isEqual(ue.min())?B.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?B.resolve(null):(Aa()<=ye.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Gi(n)),this.rs(e,o,n,uD(s,-1)).next(a=>a))})}ts(e,n){let r=new _t(g2(e));return n.forEach((s,i)=>{uh(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Aa()<=ye.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",Gi(n)),this.Ji.getDocumentsMatchingQuery(e,n,ks.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new qe(_e),this._s=new ra(i=>Ty(i),Ey),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SM(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function OM(t,e,n,r){return new VM(t,e,n,r)}async function F2(t,e){const n=de(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let c=ge();for(const d of s){o.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of i){a.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:a}))})})}function LM(t,e){const n=de(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,d,h){const f=d.batch,p=f.keys();let g=B.resolve();return p.forEach(w=>{g=g.next(()=>h.getEntry(c,w)).next(T=>{const C=d.docVersions.get(w);Ne(C!==null),T.version.compareTo(C)<0&&(f.applyToRemoteDocument(T,d),T.isValidDocument()&&(T.setReadTime(d.commitVersion),h.addEntry(T)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ge();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function U2(t){const e=de(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function FM(t,e){const n=de(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;a.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(i,h.addedDocuments,f)));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(Et.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(f,g),function(T,C,_){return T.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,g,h)&&a.push(n.Ur.updateTargetData(i,g))});let c=Fr(),d=ge();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(UM(i,o,e.documentUpdates).next(h=>{c=h.Ps,d=h.Is})),!r.isEqual(ue.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next(f=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return B.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.os=s,i))}function UM(t,e,n){let r=ge(),s=ge();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Fr();return n.forEach((a,c)=>{const d=i.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(ue.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):X("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function BM(t,e){const n=de(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function zM(t,e){const n=de(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,B.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new fs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Pm(t,e,n){const r=de(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!sc(o))throw o;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Ux(t,e,n){const r=de(t);let s=ue.min(),i=ge();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,h){const f=de(c),p=f._s.get(h);return p!==void 0?B.resolve(f.os.get(p)):f.Ur.getTargetData(d,h)}(r,o,sr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ue.min(),n?i:ge())).next(a=>($M(r,jD(e),a),{documents:a,Ts:i})))}function $M(t,e,n){let r=t.us.get(e)||ue.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Bx{constructor(){this.activeTargetIds=FD()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WM{constructor(){this.so=new Bx,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Bx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iu=null;function Of(){return iu===null?iu=function(){return 268435456+Math.round(2147483648*Math.random())}():iu++,"0x"+iu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pt="WebChannelConnection";class GM extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=Of(),c=this.xo(n,r.toUriEncodedString());X("RestConnection",`Sending RPC '${n}' ${a}:`,c,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,c,d,s).then(h=>(X("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Oo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",c,"request:",s),h})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ta}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=qM[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Of();return new Promise((o,a)=>{const c=new JS;c.setWithCredentials(!0),c.listenOnce(ZS.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case bu.NO_ERROR:const h=c.getResponseJson();X(Pt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case bu.TIMEOUT:X(Pt,`RPC '${e}' ${i} timed out`),a(new G(L.DEADLINE_EXCEEDED,"Request time out"));break;case bu.HTTP_ERROR:const f=c.getStatus();if(X(Pt,`RPC '${e}' ${i} failed with status:`,f,"response text:",c.getResponseText()),f>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const w=function(C){const _=C.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(_)>=0?_:L.UNKNOWN}(g.status);a(new G(w,g.message))}else a(new G(L.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new G(L.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{X(Pt,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);X(Pt,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Of(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=n2(),a=t2(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");X(Pt,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);let p=!1,g=!1;const w=new KM({Io:C=>{g?X(Pt,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(p||(X(Pt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),X(Pt,`RPC '${e}' stream ${s} sending:`,C),f.send(C))},To:()=>f.close()}),T=(C,_,v)=>{C.listen(_,x=>{try{v(x)}catch(R){setTimeout(()=>{throw R},0)}})};return T(f,La.EventType.OPEN,()=>{g||(X(Pt,`RPC '${e}' stream ${s} transport opened.`),w.yo())}),T(f,La.EventType.CLOSE,()=>{g||(g=!0,X(Pt,`RPC '${e}' stream ${s} transport closed`),w.So())}),T(f,La.EventType.ERROR,C=>{g||(g=!0,Oo(Pt,`RPC '${e}' stream ${s} transport errored:`,C),w.So(new G(L.UNAVAILABLE,"The operation could not be completed")))}),T(f,La.EventType.MESSAGE,C=>{var _;if(!g){const v=C.data[0];Ne(!!v);const x=v,R=x.error||((_=x[0])===null||_===void 0?void 0:_.error);if(R){X(Pt,`RPC '${e}' stream ${s} received error:`,R);const D=R.status;let V=function(N){const I=nt[N];if(I!==void 0)return N2(I)}(D),S=R.message;V===void 0&&(V=L.INTERNAL,S="Unknown error status: "+D+" with message "+R.message),g=!0,w.So(new G(V,S)),f.close()}else X(Pt,`RPC '${e}' stream ${s} received:`,v),w.bo(v)}}),T(a,e2.STAT_EVENT,C=>{C.stat===xm.PROXY?X(Pt,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===xm.NOPROXY&&X(Pt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}function Lf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(t){return new sM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,n,r,s,i,o,a,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new B2(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(Lr(n.toString()),Lr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new G(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QM extends z2{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=aM(this.serializer,e),r=function(i){if(!("targetChange"in i))return ue.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?ir(o.readTime):ue.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Am(this.serializer),n.addTarget=function(i,o){let a;const c=o.target;if(a=Sm(c)?{documents:uM(i,c)}:{query:dM(i,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=R2(i,o.resumeToken);const d=Cm(i,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(ue.min())>0){a.readTime=yd(i,o.snapshotVersion.toTimestamp());const d=Cm(i,o.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);const r=fM(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Am(this.serializer),n.removeTarget=e,this.a_(n)}}class YM extends z2{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ne(!!e.streamToken),this.lastStreamToken=e.streamToken,Ne(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ne(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=cM(e.writeResults,e.commitTime),r=ir(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Am(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>lM(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new G(L.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,km(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(L.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,km(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(L.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class JM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Lr(n),this.D_=!1):X("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Oi(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=de(c);d.L_.add(4),await ac(d),d.q_.set("Unknown"),d.L_.delete(4),await mh(d)}(this))})}),this.q_=new JM(r,s)}}async function mh(t){if(Oi(t))for(const e of t.B_)await e(!0)}async function ac(t){for(const e of t.B_)await e(!1)}function $2(t,e){const n=de(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Dy(n)?jy(n):sa(n).r_()&&Ry(n,e))}function Py(t,e){const n=de(t),r=sa(n);n.N_.delete(e),r.r_()&&W2(n,e),n.N_.size===0&&(r.r_()?r.o_():Oi(n)&&n.q_.set("Unknown"))}function Ry(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}sa(t).A_(e)}function W2(t,e){t.Q_.xe(e),sa(t).R_(e)}function jy(t){t.Q_=new eM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),sa(t).start(),t.q_.v_()}function Dy(t){return Oi(t)&&!sa(t).n_()&&t.N_.size>0}function Oi(t){return de(t).L_.size===0}function H2(t){t.Q_=void 0}async function eV(t){t.q_.set("Online")}async function tV(t){t.N_.forEach((e,n)=>{Ry(t,e)})}async function nV(t,e){H2(t),Dy(t)?(t.q_.M_(e),jy(t)):t.q_.set("Unknown")}async function rV(t,e,n){if(t.q_.set("Online"),e instanceof P2&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await vd(t,r)}else if(e instanceof Nu?t.Q_.Ke(e):e instanceof A2?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ue.min()))try{const r=await U2(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.N_.get(d);h&&i.N_.set(d,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{const h=i.N_.get(c);if(!h)return;i.N_.set(c,h.withResumeToken(Et.EMPTY_BYTE_STRING,h.snapshotVersion)),W2(i,c);const f=new fs(h.target,c,d,h.sequenceNumber);Ry(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){X("RemoteStore","Failed to raise snapshot:",r),await vd(t,r)}}async function vd(t,e,n){if(!sc(e))throw e;t.L_.add(1),await ac(t),t.q_.set("Offline"),n||(n=()=>U2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await mh(t)})}function q2(t,e){return e().catch(n=>vd(t,n,e))}async function gh(t){const e=de(t),n=As(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;sV(e);)try{const s=await BM(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,iV(e,s)}catch(s){await vd(e,s)}K2(e)&&G2(e)}function sV(t){return Oi(t)&&t.O_.length<10}function iV(t,e){t.O_.push(e);const n=As(t);n.r_()&&n.V_&&n.m_(e.mutations)}function K2(t){return Oi(t)&&!As(t).n_()&&t.O_.length>0}function G2(t){As(t).start()}async function oV(t){As(t).p_()}async function aV(t){const e=As(t);for(const n of t.O_)e.m_(n.mutations)}async function lV(t,e,n){const r=t.O_.shift(),s=Iy.from(r,e,n);await q2(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await gh(t)}async function cV(t,e){e&&As(t).V_&&await async function(r,s){if(function(o){return XD(o)&&o!==L.ABORTED}(s.code)){const i=r.O_.shift();As(r).s_(),await q2(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await gh(r)}}(t,e),K2(t)&&G2(t)}async function $x(t,e){const n=de(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const r=Oi(n);n.L_.add(3),await ac(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await mh(n)}async function uV(t,e){const n=de(t);e?(n.L_.delete(2),await mh(n)):e||(n.L_.add(2),await ac(n),n.q_.set("Unknown"))}function sa(t){return t.K_||(t.K_=function(n,r,s){const i=de(n);return i.w_(),new QM(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:eV.bind(null,t),Ro:tV.bind(null,t),mo:nV.bind(null,t),d_:rV.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Dy(t)?jy(t):t.q_.set("Unknown")):(await t.K_.stop(),H2(t))})),t.K_}function As(t){return t.U_||(t.U_=function(n,r,s){const i=de(n);return i.w_(),new YM(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:oV.bind(null,t),mo:cV.bind(null,t),f_:aV.bind(null,t),g_:lV.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await gh(t)):(await t.U_.stop(),t.O_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new My(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vy(t,e){if(Lr("AsyncQueue",`${e}: ${t}`),sc(t))return new G(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=Fa(),this.sortedSet=new qe(this.comparator)}static emptySet(e){return new Eo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Eo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Eo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(){this.W_=new qe(te.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ae():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class $o{constructor(e,n,r,s,i,o,a,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new $o(e,n,Eo.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ch(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class hV{constructor(){this.queries=Hx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=de(n),i=s.queries;s.queries=Hx(),i.forEach((o,a)=>{for(const c of a.j_)c.onError(r)})})(this,new G(L.ABORTED,"Firestore shutting down"))}}function Hx(){return new ra(t=>m2(t),ch)}async function Oy(t,e){const n=de(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new dV,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Vy(o,`Initialization of query '${Gi(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Fy(n)}async function Ly(t,e){const n=de(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function fV(t,e){const n=de(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&Fy(n)}function pV(t,e,n){const r=de(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Fy(t){t.Y_.forEach(e=>{e.next()})}var Rm,qx;(qx=Rm||(Rm={})).ea="default",qx.Cache="cache";class Uy{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new $o(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=$o.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Rm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e){this.key=e}}class Y2{constructor(e){this.key=e}}class mV{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ge(),this.mutatedKeys=ge(),this.Aa=g2(e),this.Ra=new Eo(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Wx,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),g=uh(this.query,f)?f:null,w=!!p&&this.mutatedKeys.has(p.key),T=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let C=!1;p&&g?p.data.isEqual(g.data)?w!==T&&(r.track({type:3,doc:g}),C=!0):this.ga(p,g)||(r.track({type:2,doc:g}),C=!0,(c&&this.Aa(g,c)>0||d&&this.Aa(g,d)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),C=!0):p&&!g&&(r.track({type:1,doc:p}),C=!0,(c||d)&&(a=!0)),C&&(g?(o=o.add(g),i=T?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,f)=>function(g,w){const T=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return T(g)-T(w)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,d=c!==this.Ea;return this.Ea=c,o.length!==0||d?{snapshot:new $o(this.query,e.Ra,i,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Wx,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ge(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Y2(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Q2(r))}),n}ba(e){this.Ta=e.Ts,this.da=ge();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return $o.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class gV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class yV{constructor(e){this.key=e,this.va=!1}}class vV{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ra(a=>m2(a),ch),this.Ma=new Map,this.xa=new Set,this.Oa=new qe(te.comparator),this.Na=new Map,this.La=new ky,this.Ba={},this.ka=new Map,this.qa=zo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function wV(t,e,n=!0){const r=nI(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await X2(r,e,n,!0),s}async function xV(t,e){const n=nI(t);await X2(n,e,!0,!1)}async function X2(t,e,n,r){const s=await zM(t.localStore,sr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await _V(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&$2(t.remoteStore,s),a}async function _V(t,e,n,r,s){t.Ka=(f,p,g)=>async function(T,C,_,v){let x=C.view.ma(_);x.ns&&(x=await Ux(T.localStore,C.query,!1).then(({documents:S})=>C.view.ma(S,x)));const R=v&&v.targetChanges.get(C.targetId),D=v&&v.targetMismatches.get(C.targetId)!=null,V=C.view.applyChanges(x,T.isPrimaryClient,R,D);return Gx(T,C.targetId,V.wa),V.snapshot}(t,f,p,g);const i=await Ux(t.localStore,e,!0),o=new mV(e,i.Ts),a=o.ma(i.documents),c=oc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(a,t.isPrimaryClient,c);Gx(t,n,d.wa);const h=new gV(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function TV(t,e,n){const r=de(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!ch(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Pm(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Py(r.remoteStore,s.targetId),jm(r,s.targetId)}).catch(rc)):(jm(r,s.targetId),await Pm(r.localStore,s.targetId,!0))}async function EV(t,e){const n=de(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Py(n.remoteStore,r.targetId))}async function SV(t,e,n){const r=PV(t);try{const s=await function(o,a){const c=de(o),d=Ye.now(),h=a.reduce((g,w)=>g.add(w.key),ge());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let w=Fr(),T=ge();return c.cs.getEntries(g,h).next(C=>{w=C,w.forEach((_,v)=>{v.isValidDocument()||(T=T.add(_))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,w)).next(C=>{f=C;const _=[];for(const v of a){const x=qD(v,f.get(v.key).overlayedDocument);x!=null&&_.push(new Us(v.key,x,a2(x.value.mapValue),Hn.exists(!0)))}return c.mutationQueue.addMutationBatch(g,d,_,a)}).next(C=>{p=C;const _=C.applyToLocalDocumentSet(f,T);return c.documentOverlayCache.saveOverlays(g,C.batchId,_)})}).then(()=>({batchId:p.batchId,changes:v2(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,c){let d=o.Ba[o.currentUser.toKey()];d||(d=new qe(_e)),d=d.insert(a,c),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await lc(r,s.changes),await gh(r.remoteStore)}catch(s){const i=Vy(s,"Failed to persist write");n.reject(i)}}async function J2(t,e){const n=de(t);try{const r=await FM(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Ne(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Ne(o.va):s.removedDocuments.size>0&&(Ne(o.va),o.va=!1))}),await lc(n,r,e)}catch(r){await rc(r)}}function Kx(t,e,n){const r=de(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const c=de(o);c.onlineState=a;let d=!1;c.queries.forEach((h,f)=>{for(const p of f.j_)p.Z_(a)&&(d=!0)}),d&&Fy(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function IV(t,e,n){const r=de(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new qe(te.comparator);o=o.insert(i,Dt.newNoDocument(i,ue.min()));const a=ge().add(i),c=new fh(ue.min(),new Map,new qe(_e),o,a);await J2(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),By(r)}else await Pm(r.localStore,e,!1).then(()=>jm(r,e,n)).catch(rc)}async function bV(t,e){const n=de(t),r=e.batch.batchId;try{const s=await LM(n.localStore,e);eI(n,r,null),Z2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await lc(n,s)}catch(s){await rc(s)}}async function CV(t,e,n){const r=de(t);try{const s=await function(o,a){const c=de(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,a).next(f=>(Ne(f!==null),h=f.keys(),c.mutationQueue.removeMutationBatch(d,f))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);eI(r,e,n),Z2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await lc(r,s)}catch(s){await rc(s)}}function Z2(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function eI(t,e,n){const r=de(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function jm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||tI(t,r)})}function tI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Py(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),By(t))}function Gx(t,e,n){for(const r of n)r instanceof Q2?(t.La.addReference(r.key,e),kV(t,r)):r instanceof Y2?(X("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||tI(t,r.key)):ae()}function kV(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(X("SyncEngine","New document in limbo: "+n),t.xa.add(r),By(t))}function By(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new te(Me.fromString(e)),r=t.qa.next();t.Na.set(r,new yV(n)),t.Oa=t.Oa.insert(n,r),$2(t.remoteStore,new fs(sr(lh(n.path)),r,"TargetPurposeLimboResolution",vy.oe))}}async function lc(t,e,n){const r=de(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const f=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(d){s.push(d);const f=Ay.Wi(c.targetId,d);i.push(f)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,d){const h=de(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>B.forEach(d,p=>B.forEach(p.$i,g=>h.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>B.forEach(p.Ui,g=>h.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!sc(f))throw f;X("LocalStore","Failed to update sequence numbers: "+f)}for(const f of d){const p=f.targetId;if(!f.fromCache){const g=h.os.get(p),w=g.snapshotVersion,T=g.withLastLimboFreeSnapshotVersion(w);h.os=h.os.insert(p,T)}}}(r.localStore,i))}async function NV(t,e){const n=de(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const r=await F2(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(c=>{c.reject(new G(L.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await lc(n,r.hs)}}function AV(t,e){const n=de(t),r=n.Na.get(e);if(r&&r.va)return ge().add(r.key);{let s=ge();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function nI(t){const e=de(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=J2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=IV.bind(null,e),e.Ca.d_=fV.bind(null,e.eventManager),e.Ca.$a=pV.bind(null,e.eventManager),e}function PV(t){const e=de(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CV.bind(null,e),e}class wd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ph(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return OM(this.persistence,new MM,e.initialUser,this.serializer)}Ga(e){return new RM(Ny.Zr,this.serializer)}Wa(e){return new WM}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wd.provider={build:()=>new wd};class Dm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Kx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=NV.bind(null,this.syncEngine),await uV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new hV}()}createDatastore(e){const n=ph(e.databaseInfo.databaseId),r=function(i){return new GM(i)}(e.databaseInfo);return function(i,o,a,c){return new XM(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new ZM(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Kx(this.syncEngine,n,0),function(){return zx.D()?new zx:new HM}())}createSyncEngine(e,n){return function(s,i,o,a,c,d,h){const f=new vV(s,i,o,a,c,d);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=de(s);X("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await ac(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Dm.provider={build:()=>new Dm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Lr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Rt.UNAUTHENTICATED,this.clientId=s2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{X("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(X("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Vy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ff(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await F2(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Qx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await jV(t);X("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>$x(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>$x(e.remoteStore,s)),t._onlineComponents=e}async function jV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ff(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===L.FAILED_PRECONDITION||s.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Oo("Error using user provided cache. Falling back to memory cache: "+n),await Ff(t,new wd)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await Ff(t,new wd);return t._offlineComponents}async function rI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await Qx(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await Qx(t,new Dm))),t._onlineComponents}function DV(t){return rI(t).then(e=>e.syncEngine)}async function xd(t){const e=await rI(t),n=e.eventManager;return n.onListen=wV.bind(null,e.syncEngine),n.onUnlisten=TV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=xV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=EV.bind(null,e.syncEngine),n}function MV(t,e,n={}){const r=new Pr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,d){const h=new zy({next:p=>{h.Za(),o.enqueueAndForget(()=>Ly(i,f));const g=p.docs.has(a);!g&&p.fromCache?d.reject(new G(L.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&c&&c.source==="server"?d.reject(new G(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),f=new Uy(lh(a.path),h,{includeMetadataChanges:!0,_a:!0});return Oy(i,f)}(await xd(t),t.asyncQueue,e,n,r)),r.promise}function VV(t,e,n={}){const r=new Pr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,d){const h=new zy({next:p=>{h.Za(),o.enqueueAndForget(()=>Ly(i,f)),p.fromCache&&c.source==="server"?d.reject(new G(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),f=new Uy(a,h,{includeMetadataChanges:!0,_a:!0});return Oy(i,f)}(await xd(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(t,e,n){if(!n)throw new G(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function OV(t,e,n,r){if(e===!0&&r===!0)throw new G(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Xx(t){if(!te.isDocumentKey(t))throw new G(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Jx(t){if(te.isDocumentKey(t))throw new G(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function yh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function dn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yh(t);throw new G(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}OV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new G(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new G(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new G(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zx(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new tD;switch(r.type){case"firstParty":return new iD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Yx.get(n);r&&(X("ComponentProvider","Removing Datastore"),Yx.delete(n),r.terminate())}(this),Promise.resolve()}}function LV(t,e,n,r={}){var s;const i=(t=dn(t,vh))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Rt.MOCK_USER;else{a=P4(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new G(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Rt(d)}t._authCredentials=new nD(new r2(a,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bs(this.firestore,e,this._query)}}class Vt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ss(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vt(this.firestore,e,this._key)}}class Ss extends Bs{constructor(e,n,r){super(e,n,lh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new te(e))}withConverter(e){return new Ss(this.firestore,e,this._path)}}function Ps(t,e,...n){if(t=Oe(t),iI("collection","path",e),t instanceof vh){const r=Me.fromString(e,...n);return Jx(r),new Ss(t,null,r)}{if(!(t instanceof Vt||t instanceof Ss))throw new G(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Me.fromString(e,...n));return Jx(r),new Ss(t.firestore,null,r)}}function Yn(t,e,...n){if(t=Oe(t),arguments.length===1&&(e=s2.newId()),iI("doc","path",e),t instanceof vh){const r=Me.fromString(e,...n);return Xx(r),new Vt(t,null,new te(r))}{if(!(t instanceof Vt||t instanceof Ss))throw new G(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Me.fromString(e,...n));return Xx(r),new Vt(t.firestore,t instanceof Ss?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new B2(this,"async_queue_retry"),this.Vu=()=>{const r=Lf();r&&X("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Lf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Lf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Pr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!sc(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Lr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=My.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ae()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function t_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Rs extends vh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new e_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new e_(e),this._firestoreClient=void 0,await e}}}function oI(t,e){const n=typeof t=="object"?t:oh(),r=typeof t=="string"?t:"(default)",s=Fs(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=N4("firestore");i&&LV(s,...i)}return s}function wh(t){if(t._terminated)throw new G(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||FV(t),t._firestoreClient}function FV(t){var e,n,r;const s=t._freezeSettings(),i=function(a,c,d,h){return new vD(a,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,sI(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new RV(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wo(Et.fromBase64String(e))}catch(n){throw new G(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Wo(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV=/^__.*__$/;class BV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Us(e,this.data,this.fieldMask,n,this.fieldTransforms):new ic(e,this.data,n,this.fieldTransforms)}}class aI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Us(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function lI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class _h{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new _h(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return _d(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(lI(this.Cu)&&UV.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class zV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ph(e)}Qu(e,n,r,s=!1){return new _h({Cu:e,methodName:n,qu:r,path:wt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Th(t){const e=t._freezeSettings(),n=ph(t._databaseId);return new zV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function cI(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Ky("Data must be an object, but it was:",o,r);const a=uI(r,o);let c,d;if(i.merge)c=new cn(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=Mm(e,f,n);if(!o.contains(p))throw new G(L.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);hI(h,p)||h.push(p)}c=new cn(h),d=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,d=o.fieldTransforms;return new BV(new Qt(a),c,d)}class Eh extends cc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Eh}}function $V(t,e,n){return new _h({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Hy extends cc{_toFieldTransform(e){return new I2(e.path,new Ll)}isEqual(e){return e instanceof Hy}}class qy extends cc{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=$V(this,e,!0),r=this.Ku.map(i=>ia(i,n)),s=new Bo(r);return new I2(e.path,s)}isEqual(e){return e instanceof qy&&Vo(this.Ku,e.Ku)}}function WV(t,e,n,r){const s=t.Qu(1,e,n);Ky("Data must be an object, but it was:",s,r);const i=[],o=Qt.empty();Vi(r,(c,d)=>{const h=Gy(e,c,n);d=Oe(d);const f=s.Nu(h);if(d instanceof Eh)i.push(h);else{const p=ia(d,f);p!=null&&(i.push(h),o.set(h,p))}});const a=new cn(i);return new aI(o,a,s.fieldTransforms)}function HV(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[Mm(e,r,n)],c=[s];if(i.length%2!=0)throw new G(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(Mm(e,i[p])),c.push(i[p+1]);const d=[],h=Qt.empty();for(let p=a.length-1;p>=0;--p)if(!hI(d,a[p])){const g=a[p];let w=c[p];w=Oe(w);const T=o.Nu(g);if(w instanceof Eh)d.push(g);else{const C=ia(w,T);C!=null&&(d.push(g),h.set(g,C))}}const f=new cn(d);return new aI(h,f,o.fieldTransforms)}function qV(t,e,n,r=!1){return ia(n,t.Qu(r?4:3,e))}function ia(t,e){if(dI(t=Oe(t)))return Ky("Unsupported field value:",e,t),uI(t,e);if(t instanceof cc)return function(r,s){if(!lI(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let c=ia(a,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Oe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return UD(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ye.fromDate(r);return{timestampValue:yd(s.serializer,i)}}if(r instanceof Ye){const i=new Ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:yd(s.serializer,i)}}if(r instanceof $y)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wo)return{bytesValue:R2(s.serializer,r._byteString)};if(r instanceof Vt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Cy(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Wy)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return Sy(a.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${yh(r)}`)}(t,e)}function uI(t,e){const n={};return i2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vi(t,(r,s)=>{const i=ia(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function dI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ye||t instanceof $y||t instanceof Wo||t instanceof Vt||t instanceof cc||t instanceof Wy)}function Ky(t,e,n){if(!dI(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=yh(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Mm(t,e,n){if((e=Oe(e))instanceof xh)return e._internalPath;if(typeof e=="string")return Gy(t,e);throw _d("Field path arguments must be of type string or ",t,!1,void 0,n)}const KV=new RegExp("[~\\*/\\[\\]]");function Gy(t,e,n){if(e.search(KV)>=0)throw _d(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new xh(...e.split("."))._internalPath}catch{throw _d(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function _d(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new G(L.INVALID_ARGUMENT,a+t+c)}function hI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new GV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Sh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class GV extends fI{data(){return super.data()}}function Sh(t,e){return typeof e=="string"?Gy(t,e):e instanceof xh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qy{}class mI extends Qy{}function uc(t,e,...n){let r=[];e instanceof Qy&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof Yy).length,a=i.filter(c=>c instanceof Ih).length;if(o>1||o>0&&a>0)throw new G(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Ih extends mI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ih(e,n,r)}_apply(e){const n=this._parse(e);return yI(e._query,n),new Bs(e.firestore,e.converter,Im(e._query,n))}_parse(e){const n=Th(e.firestore);return function(i,o,a,c,d,h,f){let p;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new G(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){r_(f,h);const g=[];for(const w of f)g.push(n_(c,i,w));p={arrayValue:{values:g}}}else p=n_(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||r_(f,h),p=qV(a,o,f,h==="in"||h==="not-in");return it.create(d,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ul(t,e,n){const r=e,s=Sh("where",t);return Ih._create(s,r,n)}class Yy extends Qy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Yy(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Kn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const c of a)yI(o,c),o=Im(o,c)}(e._query,n),new Bs(e.firestore,e.converter,Im(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Xy extends mI{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Xy(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new G(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new G(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ol(i,o)}(e._query,this._field,this._direction);return new Bs(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new na(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function gI(t,e="asc"){const n=e,r=Sh("orderBy",t);return Xy._create(r,n)}function n_(t,e,n){if(typeof(n=Oe(n))=="string"){if(n==="")throw new G(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!p2(e)&&n.indexOf("/")!==-1)throw new G(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Me.fromString(n));if(!te.isDocumentKey(r))throw new G(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ex(t,new te(r))}if(n instanceof Vt)return Ex(t,n._key);throw new G(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yh(n)}.`)}function r_(t,e){if(!Array.isArray(t)||t.length===0)throw new G(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yI(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class QV{convertValue(e,n="none"){switch(ki(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ci(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Vi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>et(o.doubleValue));return new Wy(i)}convertGeoPoint(e){return new $y(et(e.latitude),et(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=xy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Dl(e));default:return null}}convertTimestamp(e){const n=Ns(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Me.fromString(e);Ne(L2(r));const s=new Ml(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||Lr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wI extends fI{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Au(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Sh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Au extends wI{data(e={}){return super.data(e)}}class xI{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ba(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Au(this._firestore,this._userDataWriter,r.key,r,new Ba(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const c=new Au(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ba(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const c=new Au(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ba(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:YV(a.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function YV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(t){t=dn(t,Vt);const e=dn(t.firestore,Rs);return MV(wh(e),t._key).then(n=>SI(e,t,n))}class Zy extends QV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,n)}}function bh(t){t=dn(t,Bs);const e=dn(t.firestore,Rs),n=wh(e),r=new Zy(e);return pI(t._query),VV(n,t._query).then(s=>new xI(e,r,t,s))}function _I(t,e,n){t=dn(t,Vt);const r=dn(t.firestore,Rs),s=vI(t.converter,e,n);return ev(r,[cI(Th(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Hn.none())])}function dc(t,e,n,...r){t=dn(t,Vt);const s=dn(t.firestore,Rs),i=Th(s);let o;return o=typeof(e=Oe(e))=="string"||e instanceof xh?HV(i,"updateDoc",t._key,e,n,r):WV(i,"updateDoc",t._key,e),ev(s,[o.toMutation(t._key,Hn.exists(!0))])}function TI(t,e){const n=dn(t.firestore,Rs),r=Yn(t),s=vI(t.converter,e);return ev(n,[cI(Th(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Hn.exists(!1))]).then(()=>r)}function EI(t,...e){var n,r,s;t=Oe(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||t_(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(t_(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let c,d,h;if(t instanceof Vt)d=dn(t.firestore,Rs),h=lh(t._key.path),c={next:f=>{e[o]&&e[o](SI(d,t,f))},error:e[o+1],complete:e[o+2]};else{const f=dn(t,Bs);d=dn(f.firestore,Rs),h=f._query;const p=new Zy(d);c={next:g=>{e[o]&&e[o](new xI(d,p,f,g))},error:e[o+1],complete:e[o+2]},pI(t._query)}return function(p,g,w,T){const C=new zy(T),_=new Uy(g,C,w);return p.asyncQueue.enqueueAndForget(async()=>Oy(await xd(p),_)),()=>{C.Za(),p.asyncQueue.enqueueAndForget(async()=>Ly(await xd(p),_))}}(wh(d),h,a,c)}function ev(t,e){return function(r,s){const i=new Pr;return r.asyncQueue.enqueueAndForget(async()=>SV(await DV(r),s,i)),i.promise}(wh(t),e)}function SI(t,e,n){const r=n.docs.get(e._key),s=new Zy(t);return new wI(t,s,e._key,r,new Ba(n.hasPendingWrites,n.fromCache),e.converter)}function Td(){return new Hy("serverTimestamp")}function XV(...t){return new qy("arrayUnion",t)}(function(e,n=!0){(function(s){ta=s})(ea),Rn(new pn("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Rs(new rD(r.getProvider("auth-internal")),new aD(r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new G(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ml(d.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),tn(vx,"4.7.3",e),tn(vx,"4.7.3","esm2017")})();var JV="firebase",ZV="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tn(JV,ZV,"app");function tv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function II(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eO=II,bI=new Ls("auth","Firebase",II());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed=new sh("@firebase/auth");function tO(t,...e){Ed.logLevel<=ye.WARN&&Ed.warn(`Auth (${ea}): ${t}`,...e)}function Pu(t,...e){Ed.logLevel<=ye.ERROR&&Ed.error(`Auth (${ea}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(t,...e){throw nv(t,...e)}function or(t,...e){return nv(t,...e)}function CI(t,e,n){const r=Object.assign(Object.assign({},eO()),{[e]:n});return new Ls("auth","Firebase",r).create(e,{appName:t.name})}function Rr(t){return CI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return bI.create(t,...e)}function ie(t,e,...n){if(!t)throw nv(e,...n)}function Ir(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Pu(e),new Error(e)}function Ur(t,e){t||Ir(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function nO(){return s_()==="http:"||s_()==="https:"}function s_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nO()||HS()||"connection"in navigator)?navigator.onLine:!0}function sO(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ur(n>e,"Short delay should be less than long delay!"),this.isMobile=R4()||M4()}get(){return rO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(t,e){Ur(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO=new hc(3e4,6e4);function zs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function qr(t,e,n,r,s={}){return NI(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=nc(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},i);return D4()||(d.referrerPolicy="no-referrer"),kI.fetch()(AI(t,t.config.apiHost,n,a),d)})}async function NI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},iO),e);try{const s=new lO(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ou(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ou(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw ou(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw ou(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw CI(t,h,d);Gn(t,h)}}catch(s){if(s instanceof Qn)throw s;Gn(t,"network-request-failed",{message:String(s)})}}async function fc(t,e,n,r,s={}){const i=await qr(t,e,n,r,s);return"mfaPendingCredential"in i&&Gn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function AI(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?rv(t.config,s):`${t.config.apiScheme}://${s}`}function aO(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lO{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(or(this.auth,"network-request-failed")),oO.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ou(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=or(t,e,r);return s.customData._tokenResponse=n,s}function i_(t){return t!==void 0&&t.enterprise!==void 0}class cO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return aO(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function uO(t,e){return qr(t,"GET","/v2/recaptchaConfig",zs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dO(t,e){return qr(t,"POST","/v1/accounts:delete",e)}async function PI(t,e){return qr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hO(t,e=!1){const n=Oe(t),r=await n.getIdToken(e),s=sv(r);ie(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:rl(Uf(s.auth_time)),issuedAtTime:rl(Uf(s.iat)),expirationTime:rl(Uf(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Uf(t){return Number(t)*1e3}function sv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Pu("JWT malformed, contained fewer than 3 sections"),null;try{const s=BS(n);return s?JSON.parse(s):(Pu("Failed to decode base64 JWT payload"),null)}catch(s){return Pu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function o_(t){const e=sv(t);return ie(e,"internal-error"),ie(typeof e.exp<"u","internal-error"),ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ho(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Qn&&fO(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function fO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=rl(this.lastLoginAt),this.creationTime=rl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sd(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ho(t,PI(n,{idToken:r}));ie(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?RI(i.providerUserInfo):[],a=gO(t.providerData,o),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=c?d:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Om(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function mO(t){const e=Oe(t);await Sd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gO(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function RI(t){return t.map(e=>{var{providerId:n}=e,r=tv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yO(t,e){const n=await NI(t,{},async()=>{const r=nc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=AI(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",kI.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function vO(t,e){return qr(t,"POST","/v2/accounts:revokeToken",zs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ie(e.idToken,"internal-error"),ie(typeof e.idToken<"u","internal-error"),ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):o_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ie(e.length!==0,"internal-error");const n=o_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await yO(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new So;return r&&(ie(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ie(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ie(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new So,this.toJSON())}_performRefresh(){return Ir("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(t,e){ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class br{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=tv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Om(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ho(this,this.stsTokenManager.getToken(this.auth,e));return ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return hO(this,e)}reload(){return mO(this)}_assign(e){this!==e&&(ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new br(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Sd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tr(this.auth.app))return Promise.reject(Rr(this.auth));const e=await this.getIdToken();return await Ho(this,dO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,c,d,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,g=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,T=(a=n.tenantId)!==null&&a!==void 0?a:void 0,C=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,_=(d=n.createdAt)!==null&&d!==void 0?d:void 0,v=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:x,emailVerified:R,isAnonymous:D,providerData:V,stsTokenManager:S}=n;ie(x&&S,e,"internal-error");const E=So.fromJSON(this.name,S);ie(typeof x=="string",e,"internal-error"),Jr(f,e.name),Jr(p,e.name),ie(typeof R=="boolean",e,"internal-error"),ie(typeof D=="boolean",e,"internal-error"),Jr(g,e.name),Jr(w,e.name),Jr(T,e.name),Jr(C,e.name),Jr(_,e.name),Jr(v,e.name);const N=new br({uid:x,auth:e,email:p,emailVerified:R,displayName:f,isAnonymous:D,photoURL:w,phoneNumber:g,tenantId:T,stsTokenManager:E,createdAt:_,lastLoginAt:v});return V&&Array.isArray(V)&&(N.providerData=V.map(I=>Object.assign({},I))),C&&(N._redirectEventId=C),N}static async _fromIdTokenResponse(e,n,r=!1){const s=new So;s.updateFromServerResponse(n);const i=new br({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Sd(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ie(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?RI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new So;a.updateFromIdToken(r);const c=new br({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Om(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_=new Map;function Cr(t){Ur(t instanceof Function,"Expected a class definition");let e=a_.get(t);return e?(Ur(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,a_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}jI.type="NONE";const l_=jI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(t,e,n){return`firebase:${t}:${e}:${n}`}class Io{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ru(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ru("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?br._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Io(Cr(l_),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Cr(l_);const o=Ru(r,e.config.apiKey,e.name);let a=null;for(const d of n)try{const h=await d._get(o);if(h){const f=br._fromJSON(e,h);d!==i&&(a=f),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Io(i,e,r):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Io(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(OI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(FI(e))return"Blackberry";if(UI(e))return"Webos";if(MI(e))return"Safari";if((e.includes("chrome/")||VI(e))&&!e.includes("edge/"))return"Chrome";if(LI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function DI(t=Ut()){return/firefox\//i.test(t)}function MI(t=Ut()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function VI(t=Ut()){return/crios\//i.test(t)}function OI(t=Ut()){return/iemobile/i.test(t)}function LI(t=Ut()){return/android/i.test(t)}function FI(t=Ut()){return/blackberry/i.test(t)}function UI(t=Ut()){return/webos/i.test(t)}function iv(t=Ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function wO(t=Ut()){var e;return iv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function xO(){return V4()&&document.documentMode===10}function BI(t=Ut()){return iv(t)||LI(t)||UI(t)||FI(t)||/windows phone/i.test(t)||OI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(t,e=[]){let n;switch(t){case"Browser":n=c_(Ut());break;case"Worker":n=`${c_(Ut())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ea}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const c=e(i);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TO(t,e={}){return qr(t,"GET","/v2/passwordPolicy",zs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=6;class SO{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:EO,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new u_(this),this.idTokenSubscription=new u_(this),this.beforeStateQueue=new _O(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Cr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Io.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await PI(this,{idToken:e}),r=await br._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(tr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tr(this.app))return Promise.reject(Rr(this));const n=e?Oe(e):null;return n&&ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tr(this.app)?Promise.reject(Rr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tr(this.app)?Promise.reject(Rr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await TO(this),n=new SO(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ls("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await vO(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Cr(e)||this._popupRedirectResolver;ie(n,this,"argument-error"),this.redirectPersistenceManager=await Io.create(this,[Cr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&tO(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Li(t){return Oe(t)}class u_{constructor(e){this.auth=e,this.observer=null,this.addObserver=z4(n=>this.observer=n)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ch={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bO(t){Ch=t}function $I(t){return Ch.loadJS(t)}function CO(){return Ch.recaptchaEnterpriseScript}function kO(){return Ch.gapiScript}function NO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const AO="recaptcha-enterprise",PO="NO_RECAPTCHA";class RO{constructor(e){this.type=AO,this.auth=Li(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{uO(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const d=new cO(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(c=>{a(c)})})}function s(i,o,a){const c=window.grecaptcha;i_(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(PO)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&i_(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=CO();c.length!==0&&(c+=a),$I(c).then(()=>{s(a,i,o)}).catch(d=>{o(d)})}}).catch(a=>{o(a)})})}}async function d_(t,e,n,r=!1){const s=new RO(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Lm(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await d_(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await d_(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(t,e){const n=Fs(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Vo(i,e??{}))return s;Gn(s,"already-initialized")}return n.initialize({options:e})}function DO(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Cr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function MO(t,e,n){const r=Li(t);ie(r._canInitEmulator,r,"emulator-config-failed"),ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=WI(e),{host:o,port:a}=VO(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),OO()}function WI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function VO(t){const e=WI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:h_(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:h_(o)}}}function h_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function OO(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ir("not implemented")}_getIdTokenResponse(e){return Ir("not implemented")}_linkToIdToken(e,n){return Ir("not implemented")}_getReauthenticationResolver(e){return Ir("not implemented")}}async function LO(t,e){return qr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FO(t,e){return fc(t,"POST","/v1/accounts:signInWithPassword",zs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UO(t,e){return fc(t,"POST","/v1/accounts:signInWithEmailLink",zs(t,e))}async function BO(t,e){return fc(t,"POST","/v1/accounts:signInWithEmailLink",zs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl extends ov{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Bl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Bl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lm(e,n,"signInWithPassword",FO);case"emailLink":return UO(e,{email:this._email,oobCode:this._password});default:Gn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lm(e,r,"signUpPassword",LO);case"emailLink":return BO(e,{idToken:n,email:this._email,oobCode:this._password});default:Gn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bo(t,e){return fc(t,"POST","/v1/accounts:signInWithIdp",zs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO="http://localhost";class Ni extends ov{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ni(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Gn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=tv(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ni(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return bo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,bo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,bo(e,n)}buildRequest(){const e={requestUri:zO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=nc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $O(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function WO(t){const e=Va(Oa(t)).link,n=e?Va(Oa(e)).deep_link_id:null,r=Va(Oa(t)).deep_link_id;return(r?Va(Oa(r)).link:null)||r||n||e||t}class av{constructor(e){var n,r,s,i,o,a;const c=Va(Oa(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,f=$O((s=c.mode)!==null&&s!==void 0?s:null);ie(d&&h&&f,"argument-error"),this.apiKey=d,this.operation=f,this.code=h,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=WO(e);try{return new av(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(){this.providerId=oa.PROVIDER_ID}static credential(e,n){return Bl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=av.parseLink(n);return ie(r,"argument-error"),Bl._fromEmailAndCode(e,r.code,r.tenantId)}}oa.PROVIDER_ID="password";oa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";oa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc extends HI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends pc{constructor(){super("facebook.com")}static credential(e){return Ni._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return is.credential(e.oauthAccessToken)}catch{return null}}}is.FACEBOOK_SIGN_IN_METHOD="facebook.com";is.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends pc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ni._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return os.credential(n,r)}catch{return null}}}os.GOOGLE_SIGN_IN_METHOD="google.com";os.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends pc{constructor(){super("github.com")}static credential(e){return Ni._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return as.credential(e.oauthAccessToken)}catch{return null}}}as.GITHUB_SIGN_IN_METHOD="github.com";as.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends pc{constructor(){super("twitter.com")}static credential(e,n){return Ni._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ls.credential(n,r)}catch{return null}}}ls.TWITTER_SIGN_IN_METHOD="twitter.com";ls.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HO(t,e){return fc(t,"POST","/v1/accounts:signUp",zs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await br._fromIdTokenResponse(e,r,s),o=f_(r);return new Ai({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=f_(r);return new Ai({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function f_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id extends Qn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Id.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Id(e,n,r,s)}}function qI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Id._fromErrorAndOperation(t,i,e,r):i})}async function qO(t,e,n=!1){const r=await Ho(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ai._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KO(t,e,n=!1){const{auth:r}=t;if(tr(r.app))return Promise.reject(Rr(r));const s="reauthenticate";try{const i=await Ho(t,qI(r,s,e,t),n);ie(i.idToken,r,"internal-error");const o=sv(i.idToken);ie(o,r,"internal-error");const{sub:a}=o;return ie(t.uid===a,r,"user-mismatch"),Ai._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Gn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KI(t,e,n=!1){if(tr(t.app))return Promise.reject(Rr(t));const r="signIn",s=await qI(t,r,e),i=await Ai._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function GO(t,e){return KI(Li(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GI(t){const e=Li(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function QO(t,e,n){if(tr(t.app))return Promise.reject(Rr(t));const r=Li(t),o=await Lm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",HO).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&GI(t),c}),a=await Ai._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function YO(t,e,n){return tr(t.app)?Promise.reject(Rr(t)):GO(Oe(t),oa.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&GI(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XO(t,e){return qr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JO(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Oe(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ho(r,XO(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:c})=>c==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function ZO(t,e,n,r){return Oe(t).onIdTokenChanged(e,n,r)}function eL(t,e,n){return Oe(t).beforeAuthStateChanged(e,n)}function tL(t,e,n,r){return Oe(t).onAuthStateChanged(e,n,r)}function nL(t){return Oe(t).signOut()}const bd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bd,"1"),this.storage.removeItem(bd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=1e3,sL=10;class YI extends QI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);xO()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,sL):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},rL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}YI.type="LOCAL";const iL=YI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI extends QI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}XI.type="SESSION";const JI=XI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new kh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async d=>d(n.origin,i)),c=await oL(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,c)=>{const d=lv("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(){return window}function lL(t){ar().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(){return typeof ar().WorkerGlobalScope<"u"&&typeof ar().importScripts=="function"}async function cL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function dL(){return ZI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="firebaseLocalStorageDb",hL=1,Cd="firebaseLocalStorage",tb="fbase_key";class mc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Nh(t,e){return t.transaction([Cd],e?"readwrite":"readonly").objectStore(Cd)}function fL(){const t=indexedDB.deleteDatabase(eb);return new mc(t).toPromise()}function Fm(){const t=indexedDB.open(eb,hL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Cd,{keyPath:tb})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Cd)?e(r):(r.close(),await fL(),e(await Fm()))})})}async function p_(t,e,n){const r=Nh(t,!0).put({[tb]:e,value:n});return new mc(r).toPromise()}async function pL(t,e){const n=Nh(t,!1).get(e),r=await new mc(n).toPromise();return r===void 0?null:r.value}function m_(t,e){const n=Nh(t,!0).delete(e);return new mc(n).toPromise()}const mL=800,gL=3;class nb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>gL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kh._getInstance(dL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await cL(),!this.activeServiceWorker)return;this.sender=new aL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fm();return await p_(e,bd,"1"),await m_(e,bd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>p_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>pL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>m_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Nh(s,!1).getAll();return new mc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nb.type="LOCAL";const yL=nb;new hc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL(t,e){return e?Cr(e):(ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv extends ov{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return bo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function wL(t){return KI(t.auth,new cv(t),t.bypassAuthState)}function xL(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),KO(n,new cv(t),t.bypassAuthState)}async function _L(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),qO(n,new cv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wL;case"linkViaPopup":case"linkViaRedirect":return _L;case"reauthViaPopup":case"reauthViaRedirect":return xL;default:Gn(this.auth,"internal-error")}}resolve(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=new hc(2e3,1e4);class co extends rb{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,co.currentPopupAction&&co.currentPopupAction.cancel(),co.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ie(e,this.auth,"internal-error"),e}async onExecution(){Ur(this.filter.length===1,"Popup operations only handle one event");const e=lv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(or(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(or(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,co.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(or(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,TL.get())};e()}}co.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL="pendingRedirect",ju=new Map;class SL extends rb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ju.get(this.auth._key());if(!e){try{const r=await IL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ju.set(this.auth._key(),e)}return this.bypassAuthState||ju.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IL(t,e){const n=kL(e),r=CL(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function bL(t,e){ju.set(t._key(),e)}function CL(t){return Cr(t._redirectPersistence)}function kL(t){return Ru(EL,t.config.apiKey,t.name)}async function NL(t,e,n=!1){if(tr(t.app))return Promise.reject(Rr(t));const r=Li(t),s=vL(r,e),o=await new SL(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL=10*60*1e3;class PL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!RL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!sb(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(or(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=AL&&this.cachedEventUids.clear(),this.cachedEventUids.has(g_(e))}saveEventToCache(e){this.cachedEventUids.add(g_(e)),this.lastProcessedEventTime=Date.now()}}function g_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function sb({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function RL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sb(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jL(t,e={}){return qr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ML=/^https?/;async function VL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await jL(t);for(const n of e)try{if(OL(n))return}catch{}Gn(t,"unauthorized-domain")}function OL(t){const e=Vm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!ML.test(n))return!1;if(DL.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL=new hc(3e4,6e4);function y_(){const t=ar().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function FL(t){return new Promise((e,n)=>{var r,s,i;function o(){y_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{y_(),n(or(t,"network-request-failed"))},timeout:LL.get()})}if(!((s=(r=ar().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=ar().gapi)===null||i===void 0)&&i.load)o();else{const a=NO("iframefcb");return ar()[a]=()=>{gapi.load?o():n(or(t,"network-request-failed"))},$I(`${kO()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Du=null,e})}let Du=null;function UL(t){return Du=Du||FL(t),Du}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL=new hc(5e3,15e3),zL="__/auth/iframe",$L="emulator/auth/iframe",WL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qL(t){const e=t.config;ie(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?rv(e,$L):`https://${t.config.authDomain}/${zL}`,r={apiKey:e.apiKey,appName:t.name,v:ea},s=HL.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${nc(r).slice(1)}`}async function KL(t){const e=await UL(t),n=ar().gapi;return ie(n,t,"internal-error"),e.open({where:document.body,url:qL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:WL,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=or(t,"network-request-failed"),a=ar().setTimeout(()=>{i(o)},BL.get());function c(){ar().clearTimeout(a),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QL=500,YL=600,XL="_blank",JL="http://localhost";class v_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZL(t,e,n,r=QL,s=YL){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},GL),{width:r.toString(),height:s.toString(),top:i,left:o}),d=Ut().toLowerCase();n&&(a=VI(d)?XL:n),DI(d)&&(e=e||JL,c.scrollbars="yes");const h=Object.entries(c).reduce((p,[g,w])=>`${p}${g}=${w},`,"");if(wO(d)&&a!=="_self")return e3(e||"",a),new v_(null);const f=window.open(e||"",a,h);ie(f,t,"popup-blocked");try{f.focus()}catch{}return new v_(f)}function e3(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3="__/auth/handler",n3="emulator/auth/handler",r3=encodeURIComponent("fac");async function w_(t,e,n,r,s,i){ie(t.config.authDomain,t,"auth-domain-config-required"),ie(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ea,eventId:s};if(e instanceof HI){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",B4(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof pc){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const c=await t._getAppCheckToken(),d=c?`#${r3}=${encodeURIComponent(c)}`:"";return`${s3(t)}?${nc(a).slice(1)}${d}`}function s3({config:t}){return t.emulator?rv(t,n3):`https://${t.authDomain}/${t3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf="webStorageSupport";class i3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=JI,this._completeRedirectFn=NL,this._overrideRedirectResult=bL}async _openPopup(e,n,r,s){var i;Ur((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await w_(e,n,r,Vm(),s);return ZL(e,o,lv())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await w_(e,n,r,Vm(),s);return lL(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Ur(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await KL(e),r=new PL(e);return n.register("authEvent",s=>(ie(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bf,{type:Bf},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Bf];o!==void 0&&n(!!o),Gn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=VL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return BI()||MI()||iv()}}const o3=i3;var x_="@firebase/auth",__="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function c3(t){Rn(new pn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ie(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zI(t)},d=new IO(r,s,i,c);return DO(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Rn(new pn("auth-internal",e=>{const n=Li(e.getProvider("auth").getImmediate());return(r=>new a3(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),tn(x_,__,l3(t)),tn(x_,__,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3=5*60,d3=WS("authIdTokenMaxAge")||u3;let T_=null;const h3=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>d3)return;const s=n==null?void 0:n.token;T_!==s&&(T_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function ib(t=oh()){const e=Fs(t,"auth");if(e.isInitialized())return e.getImmediate();const n=jO(t,{popupRedirectResolver:o3,persistence:[yL,iL,JI]}),r=WS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=h3(i.toString());eL(n,o,()=>o(n.currentUser)),ZO(n,a=>o(a))}}const s=zS("auth");return s&&MO(n,`http://${s}`),n}function f3(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}bO({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=or("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",f3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});c3("Browser");const ob="@firebase/installations",uv="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=1e4,lb=`w:${uv}`,cb="FIS_v2",p3="https://firebaseinstallations.googleapis.com/v1",m3=60*60*1e3,g3="installations",y3="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Pi=new Ls(g3,y3,v3);function ub(t){return t instanceof Qn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db({projectId:t}){return`${p3}/projects/${t}/installations`}function hb(t){return{token:t.token,requestStatus:2,expiresIn:x3(t.expiresIn),creationTime:Date.now()}}async function fb(t,e){const r=(await e.json()).error;return Pi.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function pb({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function w3(t,{refreshToken:e}){const n=pb(t);return n.append("Authorization",_3(e)),n}async function mb(t){const e=await t();return e.status>=500&&e.status<600?t():e}function x3(t){return Number(t.replace("s","000"))}function _3(t){return`${cb} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T3({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=db(t),s=pb(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={fid:n,authVersion:cb,appId:t.appId,sdkVersion:lb},a={method:"POST",headers:s,body:JSON.stringify(o)},c=await mb(()=>fetch(r,a));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:hb(d.authToken)}}else throw await fb("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E3(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3=/^[cdef][\w-]{21}$/,Um="";function I3(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=b3(t);return S3.test(n)?n:Um}catch{return Um}}function b3(t){return E3(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb=new Map;function vb(t,e){const n=Ah(t);wb(n,e),C3(n,e)}function wb(t,e){const n=yb.get(t);if(n)for(const r of n)r(e)}function C3(t,e){const n=k3();n&&n.postMessage({key:t,fid:e}),N3()}let li=null;function k3(){return!li&&"BroadcastChannel"in self&&(li=new BroadcastChannel("[Firebase] FID Change"),li.onmessage=t=>{wb(t.data.key,t.data.fid)}),li}function N3(){yb.size===0&&li&&(li.close(),li=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3="firebase-installations-database",P3=1,Ri="firebase-installations-store";let zf=null;function dv(){return zf||(zf=ih(A3,P3,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ri)}}})),zf}async function kd(t,e){const n=Ah(t),s=(await dv()).transaction(Ri,"readwrite"),i=s.objectStore(Ri),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&vb(t,e.fid),e}async function xb(t){const e=Ah(t),r=(await dv()).transaction(Ri,"readwrite");await r.objectStore(Ri).delete(e),await r.done}async function Ph(t,e){const n=Ah(t),s=(await dv()).transaction(Ri,"readwrite"),i=s.objectStore(Ri),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&vb(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hv(t){let e;const n=await Ph(t.appConfig,r=>{const s=R3(r),i=j3(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Um?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function R3(t){const e=t||{fid:I3(),registrationStatus:0};return _b(e)}function j3(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Pi.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=D3(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:M3(t)}:{installationEntry:e}}async function D3(t,e){try{const n=await T3(t,e);return kd(t.appConfig,n)}catch(n){throw ub(n)&&n.customData.serverCode===409?await xb(t.appConfig):await kd(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function M3(t){let e=await E_(t.appConfig);for(;e.registrationStatus===1;)await gb(100),e=await E_(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await hv(t);return r||n}return e}function E_(t){return Ph(t,e=>{if(!e)throw Pi.create("installation-not-found");return _b(e)})}function _b(t){return V3(t)?{fid:t.fid,registrationStatus:0}:t}function V3(t){return t.registrationStatus===1&&t.registrationTime+ab<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O3({appConfig:t,heartbeatServiceProvider:e},n){const r=L3(t,n),s=w3(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={installation:{sdkVersion:lb,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},c=await mb(()=>fetch(r,a));if(c.ok){const d=await c.json();return hb(d)}else throw await fb("Generate Auth Token",c)}function L3(t,{fid:e}){return`${db(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fv(t,e=!1){let n;const r=await Ph(t.appConfig,i=>{if(!Tb(i))throw Pi.create("not-registered");const o=i.authToken;if(!e&&B3(o))return i;if(o.requestStatus===1)return n=F3(t,e),i;{if(!navigator.onLine)throw Pi.create("app-offline");const a=$3(i);return n=U3(t,a),a}});return n?await n:r.authToken}async function F3(t,e){let n=await S_(t.appConfig);for(;n.authToken.requestStatus===1;)await gb(100),n=await S_(t.appConfig);const r=n.authToken;return r.requestStatus===0?fv(t,e):r}function S_(t){return Ph(t,e=>{if(!Tb(e))throw Pi.create("not-registered");const n=e.authToken;return W3(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function U3(t,e){try{const n=await O3(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await kd(t.appConfig,r),n}catch(n){if(ub(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await xb(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await kd(t.appConfig,r)}throw n}}function Tb(t){return t!==void 0&&t.registrationStatus===2}function B3(t){return t.requestStatus===2&&!z3(t)}function z3(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+m3}function $3(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function W3(t){return t.requestStatus===1&&t.requestTime+ab<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H3(t){const e=t,{installationEntry:n,registrationPromise:r}=await hv(e);return r?r.catch(console.error):fv(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q3(t,e=!1){const n=t;return await K3(n),(await fv(n,e)).token}async function K3(t){const{registrationPromise:e}=await hv(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G3(t){if(!t||!t.options)throw $f("App Configuration");if(!t.name)throw $f("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw $f(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function $f(t){return Pi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb="installations",Q3="installations-internal",Y3=t=>{const e=t.getProvider("app").getImmediate(),n=G3(e),r=Fs(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},X3=t=>{const e=t.getProvider("app").getImmediate(),n=Fs(e,Eb).getImmediate();return{getId:()=>H3(n),getToken:s=>q3(n,s)}};function J3(){Rn(new pn(Eb,Y3,"PUBLIC")),Rn(new pn(Q3,X3,"PRIVATE"))}J3();tn(ob,uv);tn(ob,uv,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3="/firebase-messaging-sw.js",e5="/firebase-cloud-messaging-push-scope",Sb="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",t5="https://fcmregistrations.googleapis.com/v1",Ib="google.c.a.c_id",n5="google.c.a.c_l",r5="google.c.a.ts",s5="google.c.a.e";var I_;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(I_||(I_={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var zl;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(zl||(zl={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function i5(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),s=new Uint8Array(r.length);for(let i=0;i<r.length;++i)s[i]=r.charCodeAt(i);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf="fcm_token_details_db",o5=5,b_="fcm_token_object_Store";async function a5(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(i=>i.name).includes(Wf))return null;let e=null;return(await ih(Wf,o5,{upgrade:async(r,s,i,o)=>{var a;if(s<2||!r.objectStoreNames.contains(b_))return;const c=o.objectStore(b_),d=await c.index("fcmSenderId").get(t);if(await c.clear(),!!d){if(s===2){const h=d;if(!h.auth||!h.p256dh||!h.endpoint)return;e={token:h.fcmToken,createTime:(a=h.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:h.auth,p256dh:h.p256dh,endpoint:h.endpoint,swScope:h.swScope,vapidKey:typeof h.vapidKey=="string"?h.vapidKey:_r(h.vapidKey)}}}else if(s===3){const h=d;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:_r(h.auth),p256dh:_r(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:_r(h.vapidKey)}}}else if(s===4){const h=d;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:_r(h.auth),p256dh:_r(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:_r(h.vapidKey)}}}}}})).close(),await jf(Wf),await jf("fcm_vapid_details_db"),await jf("undefined"),l5(e)?e:null}function l5(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5="firebase-messaging-database",u5=1,$l="firebase-messaging-store";let Hf=null;function bb(){return Hf||(Hf=ih(c5,u5,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore($l)}}})),Hf}async function d5(t){const e=Cb(t),r=await(await bb()).transaction($l).objectStore($l).get(e);if(r)return r;{const s=await a5(t.appConfig.senderId);if(s)return await pv(t,s),s}}async function pv(t,e){const n=Cb(t),s=(await bb()).transaction($l,"readwrite");return await s.objectStore($l).put(e,n),await s.done,e}function Cb({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Ot=new Ls("messaging","Messaging",h5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f5(t,e){const n=await gv(t),r=kb(e),s={method:"POST",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(mv(t.appConfig),s)).json()}catch(o){throw Ot.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw Ot.create("token-subscribe-failed",{errorInfo:o})}if(!i.token)throw Ot.create("token-subscribe-no-token");return i.token}async function p5(t,e){const n=await gv(t),r=kb(e.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(`${mv(t.appConfig)}/${e.token}`,s)).json()}catch(o){throw Ot.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw Ot.create("token-update-failed",{errorInfo:o})}if(!i.token)throw Ot.create("token-update-no-token");return i.token}async function m5(t,e){const r={method:"DELETE",headers:await gv(t)};try{const i=await(await fetch(`${mv(t.appConfig)}/${e}`,r)).json();if(i.error){const o=i.error.message;throw Ot.create("token-unsubscribe-failed",{errorInfo:o})}}catch(s){throw Ot.create("token-unsubscribe-failed",{errorInfo:s==null?void 0:s.toString()})}}function mv({projectId:t}){return`${t5}/projects/${t}/registrations`}async function gv({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function kb({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const s={web:{endpoint:n,auth:e,p256dh:t}};return r!==Sb&&(s.web.applicationPubKey=r),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g5=7*24*60*60*1e3;async function y5(t){const e=await w5(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:_r(e.getKey("auth")),p256dh:_r(e.getKey("p256dh"))},r=await d5(t.firebaseDependencies);if(r){if(x5(r.subscriptionOptions,n))return Date.now()>=r.createTime+g5?v5(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await m5(t.firebaseDependencies,r.token)}catch(s){console.warn(s)}return C_(t.firebaseDependencies,n)}else return C_(t.firebaseDependencies,n)}async function v5(t,e){try{const n=await p5(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await pv(t.firebaseDependencies,r),n}catch(n){throw n}}async function C_(t,e){const r={token:await f5(t,e),createTime:Date.now(),subscriptionOptions:e};return await pv(t,r),r.token}async function w5(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:i5(e)})}function x5(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,s=e.auth===t.auth,i=e.p256dh===t.p256dh;return n&&r&&s&&i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return _5(e,t),T5(e,t),E5(e,t),e}function _5(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const s=e.notification.image;s&&(t.notification.image=s);const i=e.notification.icon;i&&(t.notification.icon=i)}function T5(t,e){e.data&&(t.data=e.data)}function E5(t,e){var n,r,s,i,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const a=(s=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&s!==void 0?s:(i=e.notification)===null||i===void 0?void 0:i.click_action;a&&(t.fcmOptions.link=a);const c=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;c&&(t.fcmOptions.analyticsLabel=c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S5(t){return typeof t=="object"&&!!t&&Ib in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(t){if(!t||!t.options)throw qf("App Configuration Object");if(!t.name)throw qf("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw qf(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function qf(t){return Ot.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=I5(e);this.firebaseDependencies={app:e,appConfig:s,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C5(t){try{t.swRegistration=await navigator.serviceWorker.register(Z3,{scope:e5}),t.swRegistration.update().catch(()=>{})}catch(e){throw Ot.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k5(t,e){if(!e&&!t.swRegistration&&await C5(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Ot.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N5(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=Sb)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nb(t,e){if(!navigator)throw Ot.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Ot.create("permission-blocked");return await N5(t,e==null?void 0:e.vapidKey),await k5(t,e==null?void 0:e.serviceWorkerRegistration),y5(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A5(t,e,n){const r=P5(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[Ib],message_name:n[n5],message_time:n[r5],message_device_time:Math.floor(Date.now()/1e3)})}function P5(t){switch(t){case zl.NOTIFICATION_CLICKED:return"notification_open";case zl.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R5(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===zl.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(k_(n)):t.onMessageHandler.next(k_(n)));const r=n.data;S5(r)&&r[s5]==="1"&&await A5(t,n.messageType,r)}const N_="@firebase/messaging",A_="0.12.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5=t=>{const e=new b5(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>R5(e,n)),e},D5=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>Nb(e,r)}};function M5(){Rn(new pn("messaging",j5,"PUBLIC")),Rn(new pn("messaging-internal",D5,"PRIVATE")),tn(N_,A_),tn(N_,A_,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V5(){try{await py()}catch{return!1}return typeof window<"u"&&fy()&&qS()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5(t,e){if(!navigator)throw Ot.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(t=oh()){return V5().then(e=>{if(!e)throw Ot.create("unsupported-browser")},e=>{throw Ot.create("indexed-db-unsupported")}),Fs(Oe(t),"messaging").getImmediate()}async function L5(t,e){return t=Oe(t),Nb(t,e)}function F5(t,e){return t=Oe(t),O5(t,e)}M5();const U5={apiKey:"AIzaSyD9ocLNrnpib27e56QTqFf3pr2HW9I4bnk",authDomain:"whatsapp-d94fc.firebaseapp.com",projectId:"whatsapp-d94fc",storageBucket:"whatsapp-d94fc.firebasestorage.app",messagingSenderId:"621741910548",appId:"1:621741910548:web:52789e56178dad6c545501",measurementId:"G-QR8EZ2P3NE"},yv=gy(U5),Rh=ib(yv),mn=oI(yv),Pb=Ab(yv),Lt={USERS:"users",CHATS:"chats",MESSAGES:"messages"},Rb=async t=>{const e=Yn(mn,Lt.USERS,t),n=await Jy(e);return n.exists()?n.data():null},B5=async t=>{const e=Ps(mn,Lt.USERS),n=uc(e,Ul("name",">=",t),Ul("name","<=",t+"")),r=await bh(n),s=[];return r.forEach(i=>{s.push(i.data())}),s},z5=async()=>{const t=Ps(mn,Lt.USERS),e=await bh(t),n=[];return e.forEach(r=>{n.push(r.data())}),n},$5=async(t,e)=>{const n=Yn(mn,Lt.USERS,t);await dc(n,e)},jb=async(t,e,n,r="text",s)=>{const i=Ps(mn,Lt.CHATS,t,Lt.MESSAGES),o={senderId:e,content:n,messageType:r,timestamp:new Date().toISOString(),status:"sent",fileInfo:s||null,reactions:{}};await TI(i,o);const a=Yn(mn,Lt.CHATS,t);await dc(a,{lastMessage:n,lastMessageAt:Td(),lastMessageType:r,lastMessageSentById:e,updatedAt:Td()})},W5=(t,e)=>{const n=Ps(mn,Lt.CHATS,t,Lt.MESSAGES),r=uc(n,gI("timestamp","asc"));return EI(r,s=>{const i=[];s.forEach(o=>{i.push({id:o.id,...o.data()})}),e(i)})},H5=(t,e)=>{const n=Ps(mn,Lt.CHATS),r=uc(n,Ul("participants","array-contains",t),gI("updatedAt","desc"));return EI(r,async s=>{var o,a,c;const i=[];for(const d of s.docs){const h=d.data(),f=h.participants.find(w=>w!==t);let p=h.name||"Chat",g=h.avatar||"";if(h.type==="individual"&&f){const w=await Jy(Yn(mn,Lt.USERS,f));if(w.exists()){const T=w.data();p=T.name,g=T.avatar}}i.push({id:d.id,conversationType:h.type==="individual"?"INDIVIDUAL":"GROUP",name:p,profileImage:g,lastMessage:h.lastMessage||"",lastMessageAt:((c=(a=(o=h.lastMessageAt)==null?void 0:o.toDate)==null?void 0:a.call(o))==null?void 0:c.toISOString())||new Date().toISOString(),lastMessageType:h.lastMessageType||"text",lastMessageSentById:h.lastMessageSentById||"",lastMessageSentByName:"",unreadCount:h.unreadCount||0,participants:h.participants,isOnline:!1})}e(i)})},q5=async(t,e)=>{const n=Yn(mn,Lt.CHATS,t,Lt.MESSAGES,e);await dc(n,{status:"read"})},Db=async()=>{throw new Error("Use useAuth() hook to get current user")},vv=async()=>await z5(),Mb=async t=>await B5(t),Vb=async t=>!0,Ob=async t=>!0,Lb=async t=>[],Bm=async t=>[],Fb=async t=>[],Ub=async t=>[],Bb=async(t,e)=>[],wv=async(t,e)=>({id:t,name:"Group",description:"Group Description",createdBy:"",createdAt:new Date().toISOString(),profileImage:"",members:{},memberCount:0,isActive:!0}),jh=async t=>await Rb(t),zb=async(t,e,n,r,s={})=>(await jb(t,e,n,s.messageType||"text"),{id:"temp",senderId:e,content:n,timestamp:new Date().toISOString(),messageType:s.messageType||"text"}),Dh=async t=>[],$b=async(t,e)=>{},Wb=async(t,e)=>{},Hb=async(t,e)=>{},qb=async t=>!0,Kb=async t=>!0,Gb=async t=>!0,Qb=async(t,e,n)=>!0,Yb=async(t,e,n)=>!0,Xb=async(t,e)=>!0,Jb=async(t,e)=>!0,K5=Object.freeze(Object.defineProperty({__proto__:null,clearChatMessages:Gb,deleteMessageForEveryone:Wb,deleteMessageForMe:$b,editMessage:Hb,followUser:Vb,getCalls:Fb,getCurrentUser:Db,getFollowers:Lb,getFollowing:Bm,getGroupInfo:wv,getGroupMessages:Bb,getNotifications:Dh,getStatuses:Ub,getUserInfo:jh,getUsers:vv,reactToMessage:Qb,searchUsers:Mb,sendMessage:zb,toggleChatLock:qb,toggleVanishMode:Kb,unfollowUser:Ob,updateChatReceivedTheme:Jb,updateChatTheme:Xb,voteOnPoll:Yb},Symbol.toStringTag,{value:"Module"})),G5={},P_=t=>{let e;const n=new Set,r=(h,f)=>{const p=typeof h=="function"?h(e):h;if(!Object.is(p,e)){const g=e;e=f??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(w=>w(e,g))}},s=()=>e,c={setState:r,getState:s,getInitialState:()=>d,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{(G5?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=e=t(r,s,c);return c},Q5=t=>t?P_(t):P_;var Zb={exports:{}},eC={},tC={exports:{}},nC={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qo=b;function Y5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var X5=typeof Object.is=="function"?Object.is:Y5,J5=qo.useState,Z5=qo.useEffect,e6=qo.useLayoutEffect,t6=qo.useDebugValue;function n6(t,e){var n=e(),r=J5({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return e6(function(){s.value=n,s.getSnapshot=e,Kf(s)&&i({inst:s})},[t,n,e]),Z5(function(){return Kf(s)&&i({inst:s}),t(function(){Kf(s)&&i({inst:s})})},[t]),t6(n),n}function Kf(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!X5(t,n)}catch{return!0}}function r6(t,e){return e()}var s6=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?r6:n6;nC.useSyncExternalStore=qo.useSyncExternalStore!==void 0?qo.useSyncExternalStore:s6;tC.exports=nC;var i6=tC.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mh=b,o6=i6;function a6(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var l6=typeof Object.is=="function"?Object.is:a6,c6=o6.useSyncExternalStore,u6=Mh.useRef,d6=Mh.useEffect,h6=Mh.useMemo,f6=Mh.useDebugValue;eC.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=u6(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=h6(function(){function c(g){if(!d){if(d=!0,h=g,g=r(g),s!==void 0&&o.hasValue){var w=o.value;if(s(w,g))return f=w}return f=g}if(w=f,l6(h,g))return w;var T=r(g);return s!==void 0&&s(w,T)?(h=g,w):(h=g,f=T)}var d=!1,h,f,p=n===void 0?null:n;return[function(){return c(e())},p===null?void 0:function(){return c(p())}]},[e,n,r,s]);var a=c6(t,i[0],i[1]);return d6(function(){o.hasValue=!0,o.value=a},[a]),f6(a),a};Zb.exports=eC;var p6=Zb.exports;const m6=iT(p6),rC={},{useDebugValue:g6}=Vd,{useSyncExternalStoreWithSelector:y6}=m6;let R_=!1;const v6=t=>t;function w6(t,e=v6,n){(rC?"production":void 0)!=="production"&&n&&!R_&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),R_=!0);const r=y6(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return g6(r),r}const x6=t=>{(rC?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?Q5(t):t,n=(r,s)=>w6(e,r,s);return Object.assign(n,e),n},_6=t=>x6,Mu={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"http://localhost:8080/api",VITE_FCM_VAPID_KEY:"BElmQ12ntB5hskv1uY8lpgO4Niz6kicJ96UrJ-6KnmGR0xl8hEkc67FASTwKyUtVHw2pD0jsuQMPcX3wP_pyQXE",VITE_FIREBASE_API_KEY:"AIzaSyD9ocLNrnpib27e56QTqFf3pr2HW9I4bnk",VITE_FIREBASE_APP_ID:"1:621741910548:web:52789e56178dad6c545501",VITE_FIREBASE_AUTH_DOMAIN:"whatsapp-d94fc.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-QR8EZ2P3NE",VITE_FIREBASE_MESSAGING_SENDER_ID:"621741910548",VITE_FIREBASE_PROJECT_ID:"whatsapp-d94fc",VITE_FIREBASE_STORAGE_BUCKET:"whatsapp-d94fc.firebasestorage.app"},zm=new Map,au=t=>{const e=zm.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},T6=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=zm.get(n.name);if(r)return{type:"tracked",store:t,...r};const s={connection:e.connect(n),stores:{}};return zm.set(n.name,s),{type:"tracked",store:t,...s}},E6=(t,e={})=>(n,r,s)=>{const{enabled:i,anonymousActionType:o,store:a,...c}=e;let d;try{d=(i??(Mu?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!d)return(Mu?"production":void 0)!=="production"&&i&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),t(n,r,s);const{connection:h,...f}=T6(a,d,c);let p=!0;s.setState=(T,C,_)=>{const v=n(T,C);if(!p)return v;const x=_===void 0?{type:o||"anonymous"}:typeof _=="string"?{type:_}:_;return a===void 0?(h==null||h.send(x,r()),v):(h==null||h.send({...x,type:`${a}/${x.type}`},{...au(c.name),[a]:s.getState()}),v)};const g=(...T)=>{const C=p;p=!1,n(...T),p=C},w=t(s.setState,r,s);if(f.type==="untracked"?h==null||h.init(w):(f.stores[f.store]=s,h==null||h.init(Object.fromEntries(Object.entries(f.stores).map(([T,C])=>[T,T===f.store?w:C.getState()])))),s.dispatchFromDevtools&&typeof s.dispatch=="function"){let T=!1;const C=s.dispatch;s.dispatch=(..._)=>{(Mu?"production":void 0)!=="production"&&_[0].type==="__setState"&&!T&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),T=!0),C(..._)}}return h.subscribe(T=>{var C;switch(T.type){case"ACTION":if(typeof T.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Gf(T.payload,_=>{if(_.type==="__setState"){if(a===void 0){g(_.state);return}Object.keys(_.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const v=_.state[a];if(v==null)return;JSON.stringify(s.getState())!==JSON.stringify(v)&&g(v);return}s.dispatchFromDevtools&&typeof s.dispatch=="function"&&s.dispatch(_)});case"DISPATCH":switch(T.payload.type){case"RESET":return g(w),a===void 0?h==null?void 0:h.init(s.getState()):h==null?void 0:h.init(au(c.name));case"COMMIT":if(a===void 0){h==null||h.init(s.getState());return}return h==null?void 0:h.init(au(c.name));case"ROLLBACK":return Gf(T.state,_=>{if(a===void 0){g(_),h==null||h.init(s.getState());return}g(_[a]),h==null||h.init(au(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Gf(T.state,_=>{if(a===void 0){g(_);return}JSON.stringify(s.getState())!==JSON.stringify(_[a])&&g(_[a])});case"IMPORT_STATE":{const{nextLiftedState:_}=T.payload,v=(C=_.computedStates.slice(-1)[0])==null?void 0:C.state;if(!v)return;g(a===void 0?v:v[a]),h==null||h.send(null,_);return}case"PAUSE_RECORDING":return p=!p}return}}),w},S6=E6,Gf=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)};function I6(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const Wl=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Wl(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Wl(r)(n)}}}},b6=(t,e)=>(n,r,s)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:C=>C,version:0,merge:(C,_)=>({..._,...C}),...e},o=!1;const a=new Set,c=new Set;let d;try{d=i.getStorage()}catch{}if(!d)return t((...C)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...C)},r,s);const h=Wl(i.serialize),f=()=>{const C=i.partialize({...r()});let _;const v=h({state:C,version:i.version}).then(x=>d.setItem(i.name,x)).catch(x=>{_=x});if(_)throw _;return v},p=s.setState;s.setState=(C,_)=>{p(C,_),f()};const g=t((...C)=>{n(...C),f()},r,s);let w;const T=()=>{var C;if(!d)return;o=!1,a.forEach(v=>v(r()));const _=((C=i.onRehydrateStorage)==null?void 0:C.call(i,r()))||void 0;return Wl(d.getItem.bind(d))(i.name).then(v=>{if(v)return i.deserialize(v)}).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==i.version){if(i.migrate)return i.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var x;return w=i.merge(v,(x=r())!=null?x:g),n(w,!0),f()}).then(()=>{_==null||_(w,void 0),o=!0,c.forEach(v=>v(w))}).catch(v=>{_==null||_(void 0,v)})};return s.persist={setOptions:C=>{i={...i,...C},C.getStorage&&(d=C.getStorage())},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>T(),hasHydrated:()=>o,onHydrate:C=>(a.add(C),()=>{a.delete(C)}),onFinishHydration:C=>(c.add(C),()=>{c.delete(C)})},T(),w||g},C6=(t,e)=>(n,r,s)=>{let i={storage:I6(()=>localStorage),partialize:T=>T,version:0,merge:(T,C)=>({...C,...T}),...e},o=!1;const a=new Set,c=new Set;let d=i.storage;if(!d)return t((...T)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...T)},r,s);const h=()=>{const T=i.partialize({...r()});return d.setItem(i.name,{state:T,version:i.version})},f=s.setState;s.setState=(T,C)=>{f(T,C),h()};const p=t((...T)=>{n(...T),h()},r,s);s.getInitialState=()=>p;let g;const w=()=>{var T,C;if(!d)return;o=!1,a.forEach(v=>{var x;return v((x=r())!=null?x:p)});const _=((C=i.onRehydrateStorage)==null?void 0:C.call(i,(T=r())!=null?T:p))||void 0;return Wl(d.getItem.bind(d))(i.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==i.version){if(i.migrate)return[!0,i.migrate(v.state,v.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var x;const[R,D]=v;if(g=i.merge(D,(x=r())!=null?x:p),n(g,!0),R)return h()}).then(()=>{_==null||_(g,void 0),g=r(),o=!0,c.forEach(v=>v(g))}).catch(v=>{_==null||_(void 0,v)})};return s.persist={setOptions:T=>{i={...i,...T},T.storage&&(d=T.storage)},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>w(),hasHydrated:()=>o,onHydrate:T=>(a.add(T),()=>{a.delete(T)}),onFinishHydration:T=>(c.add(T),()=>{c.delete(T)})},i.skipHydration||w(),g||p},k6=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((Mu?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),b6(t,e)):C6(t,e),N6=k6;class za extends Error{}za.prototype.name="InvalidTokenError";function A6(t){return decodeURIComponent(atob(t).replace(/(.)/g,(e,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function P6(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return A6(e)}catch{return atob(e)}}function R6(t,e){if(typeof t!="string")throw new za("Invalid token specified: must be a string");e||(e={});const n=e.header===!0?0:1,r=t.split(".")[n];if(typeof r!="string")throw new za(`Invalid token specified: missing part #${n+1}`);let s;try{s=P6(r)}catch(i){throw new za(`Invalid token specified: invalid base64 for part #${n+1} (${i.message})`)}try{return JSON.parse(s)}catch(i){throw new za(`Invalid token specified: invalid json for part #${n+1} (${i.message})`)}}/*! js-cookie v3.0.5 | MIT */function lu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}var j6={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function $m(t,e){function n(s,i,o){if(!(typeof document>"u")){o=lu({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var c in o)o[c]&&(a+="; "+c,o[c]!==!0&&(a+="="+o[c].split(";")[0]));return document.cookie=s+"="+t.write(i,s)+a}}function r(s){if(!(typeof document>"u"||arguments.length&&!s)){for(var i=document.cookie?document.cookie.split("; "):[],o={},a=0;a<i.length;a++){var c=i[a].split("="),d=c.slice(1).join("=");try{var h=decodeURIComponent(c[0]);if(o[h]=t.read(d,h),s===h)break}catch{}}return s?o[s]:o}}return Object.create({set:n,get:r,remove:function(s,i){n(s,"",lu({},i,{expires:-1}))},withAttributes:function(s){return $m(this.converter,lu({},this.attributes,s))},withConverter:function(s){return $m(lu({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var Xs=$m(j6,{path:"/"});const Qf="whatsapp_",Zr={ACCESS_TOKEN:`${Qf}access_token`,REFRESH_TOKEN:`${Qf}refresh_token`,USER:`${Qf}user`};class D6{setTokens(e,n){Xs.set(Zr.ACCESS_TOKEN,e,{expires:7,secure:window.location.protocol==="https:",sameSite:"Strict"}),Xs.set(Zr.REFRESH_TOKEN,n,{expires:30,secure:window.location.protocol==="https:",sameSite:"Strict"}),console.log(" Tokens stored in cookies successfully")}getAccessToken(){return Xs.get(Zr.ACCESS_TOKEN)||null}getRefreshToken(){return Xs.get(Zr.REFRESH_TOKEN)||null}setAccessToken(e){Xs.set(Zr.ACCESS_TOKEN,e,{expires:7,secure:window.location.protocol==="https:",sameSite:"Strict"}),console.log(" Access token updated in cookies")}clearTokens(){Xs.remove(Zr.ACCESS_TOKEN),Xs.remove(Zr.REFRESH_TOKEN),console.log(" Tokens cleared from cookies")}decodeToken(e){try{return R6(e)}catch{return null}}isTokenExpired(e){if(!e)return!0;try{const n=this.decodeToken(e);if(!n||!n.exp)return!0;const r=Date.now()/1e3;return n.exp<r+30}catch{return!0}}getTokenExpiration(e){try{const n=this.decodeToken(e);return!n||!n.exp?null:new Date(n.exp*1e3)}catch{return null}}getUserIdFromToken(e){try{const n=this.decodeToken(e);return(n==null?void 0:n.sub)||null}catch{return null}}isValidTokenStructure(e){try{return e.split(".").length!==3?!1:(this.decodeToken(e),!0)}catch{return!1}}getTimeUntilExpiration(e){try{const n=this.decodeToken(e);if(!n||!n.exp)return null;const r=Date.now()/1e3,s=n.exp-r;return Math.max(0,s)}catch{return null}}hasValidTokens(){const e=this.getAccessToken(),n=this.getRefreshToken();return!e||!n?!1:this.isValidTokenStructure(e)&&this.isValidTokenStructure(n)}}const wr=new D6,ci=t=>{const e=btoa(JSON.stringify({alg:"HS256",typ:"JWT"})),n=btoa(JSON.stringify({sub:t,exp:Math.floor(Date.now()/1e3)+86400}));return`${e}.${n}.dummy_signature`},M6=async t=>{if(await new Promise(n=>setTimeout(n,500)),t.email==="test@example.com"&&t.password==="password"){const n="user1";return{user:{id:n,name:"Test User",email:"test@example.com",avatar:"https://i.pravatar.cc/150?u=user1",isOnline:!0},accessToken:ci(n),refreshToken:ci(n)}}const e="user1";return{user:{id:e,name:"Test User",email:t.email,avatar:"https://i.pravatar.cc/150?u=user1",isOnline:!0},accessToken:ci(e),refreshToken:ci(e)}},V6=async t=>{await new Promise(n=>setTimeout(n,500));const e="user_"+Date.now();return{user:{id:e,name:t.name,email:t.email,avatar:"https://i.pravatar.cc/150?u="+Date.now(),isOnline:!0},accessToken:ci(e),refreshToken:ci(e)}},O6=async()=>{await new Promise(t=>setTimeout(t,200))},L6=async()=>(await new Promise(t=>setTimeout(t,200)),{accessToken:ci("user1")}),j_=_6()(S6(N6((t,e)=>({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,isLoading:!1,error:null,login:async n=>{t({isLoading:!0,error:null});try{const r=await M6(n);wr.setTokens(r.accessToken,r.refreshToken),t({user:r.user,accessToken:r.accessToken,refreshToken:r.refreshToken,isAuthenticated:!0,isLoading:!1,error:null}),console.log(" Auth state updated after login")}catch(r){throw console.error(" Login error in store:",r),t({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,isLoading:!1,error:r.message||"Login failed"}),r}},signup:async n=>{t({isLoading:!0,error:null});try{const r=await V6(n);wr.setTokens(r.accessToken,r.refreshToken),t({user:r.user,accessToken:r.accessToken,refreshToken:r.refreshToken,isAuthenticated:!0,isLoading:!1,error:null}),console.log(" Auth state updated after signup")}catch(r){throw console.error(" Signup error in store:",r),t({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,isLoading:!1,error:r.message||"Signup failed"}),r}},logout:async()=>{t({isLoading:!0,error:null});try{await O6(),t({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,isLoading:!1,error:null}),console.log(" Auth state cleared after logout")}catch(n){console.error(" Logout error in store:",n),t({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,isLoading:!1,error:n.message||"Logout failed"})}},refreshAccessToken:async()=>{try{const n=await L6();wr.setAccessToken(n.accessToken),t({accessToken:n.accessToken}),console.log(" Access token refreshed in store")}catch(n){throw console.error(" Token refresh error in store:",n),e().logout(),n}},setUser:n=>{t({user:n})},setTokens:(n,r)=>{wr.setTokens(n,r),t({accessToken:n,refreshToken:r,isAuthenticated:!0})},clearAuth:()=>{wr.clearTokens(),t({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,error:null})},checkAuth:async()=>{t({isLoading:!0});try{const n=wr.getAccessToken(),r=wr.getRefreshToken();if(!n||!r){t({isAuthenticated:!1,isLoading:!1});return}wr.isTokenExpired(n)&&await e().refreshAccessToken();const s=await Db();s?t({user:s,accessToken:n,refreshToken:r,isAuthenticated:!0,isLoading:!1}):(e().clearAuth(),t({isLoading:!1}))}catch(n){console.error(" Auth check failed:",n),e().clearAuth(),t({isLoading:!1})}finally{console.log(" Auth check completed, loading:",e().isLoading)}},clearError:()=>{t({error:null})}}),{name:Zr.USER,partialize:t=>({user:t.user,accessToken:t.accessToken,refreshToken:t.refreshToken,isAuthenticated:t.isAuthenticated})}),{name:"AuthStore"})),F6=async(t,e,n)=>{const s=(await QO(Rh,t,e)).user;await JO(s,{displayName:n});const i={id:s.uid,name:n,email:t,avatar:"/assets/images/default-avatar.png",about:"Hey there! I am using WhatsApp.",isOnline:!0,lastSeen:new Date().toISOString(),phone:"",statusText:"Available"};return await _I(Yn(mn,Lt.USERS,s.uid),{...i,createdAt:Td(),updatedAt:Td()}),i},U6=async(t,e)=>{const r=(await YO(Rh,t,e)).user,s=await Jy(Yn(mn,Lt.USERS,r.uid));if(s.exists())return await sC(r.uid,!0),s.data();throw new Error("User profile not found")},B6=async t=>{await sC(t,!1),await nL(Rh)},sC=async(t,e)=>{const n=Yn(mn,Lt.USERS,t);await _I(n,{isOnline:e,lastSeen:new Date().toISOString()},{merge:!0})},iC=b.createContext(void 0),$s=()=>{const t=b.useContext(iC);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},z6=({children:t})=>{const[e,n]=b.useState(null),[r,s]=b.useState(!0),i=j_(p=>p.setUser),o=j_(p=>p.logout);b.useEffect(()=>{const p=tL(Rh,async g=>{if(g)try{const w=await Rb(g.uid);w&&(n(w),i(w))}catch(w){console.error("Error fetching user profile:",w)}else n(null),o();s(!1)});return()=>p()},[i,o]);const f={currentUser:e,userProfile:e,loading:r,signup:async(p,g,w)=>{const T=await F6(p,g,w);n(T),i(T)},login:async(p,g)=>{const w=await U6(p,g);n(w),i(w)},logout:async()=>{e&&await B6(e.id),n(null),o()},updateUserProfile:async p=>{e&&(n({...e,...p}),i({...e,...p}))}};return l.jsx(iC.Provider,{value:f,children:t})},oC=b.createContext(void 0),Vh=()=>{const t=b.useContext(oC);if(!t)throw new Error("useToast must be used within ToastProvider");return t},$6=({children:t})=>{const[e,n]=b.useState([]),r=b.useCallback((i,o="info")=>{const a=Date.now().toString(),c={id:a,message:i,type:o};n(d=>[...d,c]),setTimeout(()=>{n(d=>d.filter(h=>h.id!==a))},3e3)},[]),s=i=>{n(o=>o.filter(a=>a.id!==i))};return l.jsxs(oC.Provider,{value:{showToast:r},children:[t,l.jsx("div",{className:"fixed top-4 right-4 z-50 flex flex-col gap-2 max-w-sm",children:e.map(i=>l.jsxs("div",{className:`
              animate-slide-down px-4 py-3 rounded-lg shadow-lg flex items-center gap-3
              ${i.type==="success"?"bg-green-600 text-white":""}
              ${i.type==="error"?"bg-red-600 text-white":""}
              ${i.type==="warning"?"bg-yellow-600 text-white":""}
              ${i.type==="info"?"bg-blue-600 text-white":""}
            `,children:[l.jsx("div",{className:"flex-1",children:i.message}),l.jsx("button",{onClick:()=>s(i.id),className:"text-white hover:text-gray-200 transition-colors",children:""})]},i.id))})]})},W6=t=>[...t].sort((e,n)=>{if(e.isPinned&&!n.isPinned)return-1;if(!e.isPinned&&n.isPinned)return 1;const r=new Date(e.lastMessageAt).getTime();return new Date(n.lastMessageAt).getTime()-r});/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd="analytics",H6="firebase_id",q6="origin",K6=60*1e3,G6="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",xv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn=new sh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},hn=new Ls("analytics","Analytics",Q6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y6(t){if(!t.startsWith(xv)){const e=hn.create("invalid-gtag-resource",{gtagURL:t});return nn.warn(e.message),""}return t}function aC(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function X6(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function J6(t,e){const n=X6("firebase-js-sdk-policy",{createScriptURL:Y6}),r=document.createElement("script"),s=`${xv}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function Z6(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function eF(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const c=(await aC(n)).find(d=>d.measurementId===s);c&&await e[c.appId]}}catch(a){nn.error(a)}t("config",s,i)}async function tF(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await aC(n);for(const c of o){const d=a.find(f=>f.measurementId===c),h=d&&e[d.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){nn.error(i)}}function nF(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,c]=o;await tF(t,e,n,a,c)}else if(i==="config"){const[a,c]=o;await eF(t,e,n,r,a,c)}else if(i==="consent"){const[a,c]=o;t("consent",a,c)}else if(i==="get"){const[a,c,d]=o;t("get",a,c,d)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){nn.error(a)}}return s}function rF(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=nF(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function sF(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(xv)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iF=30,oF=1e3;class aF{constructor(e={},n=oF){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const lC=new aF;function lF(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function cF(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:lF(r)},i=G6.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw hn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function uF(t,e=lC,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw hn.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw hn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new fF;return setTimeout(async()=>{a.abort()},K6),cC({appId:r,apiKey:s,measurementId:i},o,a,e)}async function cC(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=lC){var i;const{appId:o,measurementId:a}=t;try{await dF(r,e)}catch(c){if(a)return nn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw c}try{const c=await cF(t);return s.deleteThrottleMetadata(o),c}catch(c){const d=c;if(!hF(d)){if(s.deleteThrottleMetadata(o),a)return nn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:a};throw c}const h=Number((i=d==null?void 0:d.customData)===null||i===void 0?void 0:i.httpStatus)===503?lx(n,s.intervalMillis,iF):lx(n,s.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return s.setThrottleMetadata(o,f),nn.debug(`Calling attemptFetch again in ${h} millis`),cC(t,f,r,s)}}function dF(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(hn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function hF(t){if(!(t instanceof Qn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class fF{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function pF(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mF(){if(fy())try{await py()}catch(t){return nn.warn(hn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return nn.warn(hn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function gF(t,e,n,r,s,i,o){var a;const c=uF(t);c.then(g=>{n[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&nn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>nn.error(g)),e.push(c);const d=mF().then(g=>{if(g)return r.getId()}),[h,f]=await Promise.all([c,d]);sF(i)||J6(i,h.measurementId),s("js",new Date);const p=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return p[q6]="firebase",p.update=!0,f!=null&&(p[H6]=f),s("config",h.measurementId,p),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(e){this.app=e}_delete(){return delete sl[this.app.options.appId],Promise.resolve()}}let sl={},D_=[];const M_={};let Yf="dataLayer",vF="gtag",V_,uC,O_=!1;function wF(){const t=[];if(HS()&&t.push("This is a browser extension environment."),qS()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=hn.create("invalid-analytics-context",{errorInfo:e});nn.warn(n.message)}}function xF(t,e,n){wF();const r=t.options.appId;if(!r)throw hn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)nn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw hn.create("no-api-key");if(sl[r]!=null)throw hn.create("already-exists",{id:r});if(!O_){Z6(Yf);const{wrappedGtag:i,gtagCore:o}=rF(sl,D_,M_,Yf,vF);uC=i,V_=o,O_=!0}return sl[r]=gF(t,D_,M_,e,V_,Yf,n),new yF(t)}function _F(t=oh()){t=Oe(t);const e=Fs(t,Nd);return e.isInitialized()?e.getImmediate():TF(t)}function TF(t,e={}){const n=Fs(t,Nd);if(n.isInitialized()){const s=n.getImmediate();if(Vo(e,n.getOptions()))return s;throw hn.create("already-initialized")}return n.initialize({options:e})}function EF(t,e,n,r){t=Oe(t),pF(uC,sl[t.app.options.appId],e,n,r).catch(s=>nn.error(s))}const L_="@firebase/analytics",F_="0.10.8";function SF(){Rn(new pn(Nd,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return xF(r,s,n)},"PUBLIC")),Rn(new pn("analytics-internal",t,"PRIVATE")),tn(L_,F_),tn(L_,F_,"esm2017");function t(e){try{const n=e.getProvider(Nd).getImmediate();return{logEvent:(r,s,i)=>EF(n,r,s,i)}}catch(n){throw hn.create("interop-component-reg-failed",{reason:n})}}}SF();const IF={apiKey:"AIzaSyD9ocLNrnpib27e56QTqFf3pr2HW9I4bnk",authDomain:"whatsapp-d94fc.firebaseapp.com",projectId:"whatsapp-d94fc",storageBucket:"whatsapp-d94fc.firebasestorage.app",messagingSenderId:"621741910548",appId:"1:621741910548:web:52789e56178dad6c545501",measurementId:"G-QR8EZ2P3NE"},Oh=gy(IF);typeof window<"u"&&_F(Oh);const il=oI(Oh);ib(Oh);typeof window<"u"&&"serviceWorker"in navigator&&Ab(Oh);const ol="statuses",bF=async(t,e)=>{try{const n=Ps(il,ol),r=uc(n,Ul("userId","==",t)),s=await bh(r),i=new Date,o=new Date(i.getTime()+24*60*60*1e3);if(s.empty)await TI(Ps(il,ol),{userId:t,updates:[e],createdAt:Ye.fromDate(i),expiresAt:Ye.fromDate(o)});else{const a=s.docs[0];await dc(Yn(il,ol,a.id),{updates:XV(e),expiresAt:Ye.fromDate(o)})}}catch(n){throw console.error("Error creating status:",n),new Error("Failed to create status")}},CF=async(t,e,n)=>{try{const r=Ps(il,ol),s=uc(r,Ul("userId","==",t)),i=await bh(s);if(!i.empty){const o=i.docs[0],d=(o.data().updates||[]).map(h=>{if(h.id===e){const f=h.reactions||[];if(!f.includes(n))return{...h,reactions:[n,...f]}}return h});await dc(Yn(il,ol,o.id),{updates:d})}}catch(r){throw console.error("Error adding reaction:",r),new Error("Failed to add reaction")}},kF=async()=>{try{const t=await L5(Pb,{vapidKey:void 0});return t||(console.log("No registration token available. Request permission to generate one."),null)}catch(t){return console.log("An error occurred while retrieving token. ",t),null}},NF=()=>new Promise(t=>{F5(Pb,e=>{t(e)})}),AF=()=>{const[t,e]=b.useState(Notification.permission),[n,r]=b.useState(null),[s,i]=b.useState(!1),{showToast:o}=Vh();return b.useEffect(()=>("Notification"in window?e(Notification.permission):console.log("This browser does not support desktop notification"),NF().then(d=>{var p,g,w,T;console.log("Received foreground message:",d);const h=((p=d.notification)==null?void 0:p.title)||"New Message",f={body:((g=d.notification)==null?void 0:g.body)||"You have a new notification",icon:((w=d.notification)==null?void 0:w.icon)||"/icon-192x192.png",badge:"/badge-72x72.png",tag:((T=d.data)==null?void 0:T.type)==="call"?"incoming-call":"new-message",data:d.data};t==="granted"&&new Notification(h,f),o(`${h}: ${f.body}`,"info")}),()=>{}),[t,o]),{requestPermission:b.useCallback(async()=>{i(!0);try{const d=await kF();return d?(r(d),e("granted"),console.log("FCM Token obtained:",d),d):(e(Notification.permission),null)}catch(d){return console.error("Error requesting notification permission:",d),null}finally{i(!1)}},[]),showNotification:(d,h,f)=>{if(t!=="granted"){console.log("Notification permission not granted.");return}const p={body:f,icon:d==="call"?"https://cdn-icons-png.flaticon.com/512/3059/3059446.png":"https://cdn-icons-png.flaticon.com/512/5968/5968841.png",badge:"https://cdn-icons-png.flaticon.com/512/5968/5968841.png",tag:d==="call"?"incoming-call":`new-message-${Date.now()}`};"serviceWorker"in navigator?navigator.serviceWorker.ready.then(g=>{g.showNotification(h,p)}).catch(g=>{new Notification(h,p)}):new Notification(h,p)},permission:t,subscription:n,loading:s}},PF=({isOpen:t,onClose:e,onSubmit:n,title:r,placeholder:s="Enter password"})=>{const[i,o]=b.useState("");b.useEffect(()=>{t&&o("")},[t]);const a=c=>{c.preventDefault(),n(i)};return t?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",onClick:e,children:l.jsxs("div",{className:"bg-[#2a3942] rounded-lg shadow-xl w-full max-w-sm mx-4 text-white flex flex-col",onClick:c=>c.stopPropagation(),children:[l.jsxs("div",{className:"flex flex-col items-center justify-center p-6 border-b border-gray-700",children:[l.jsx("div",{className:"p-4 bg-primary rounded-full mb-4",children:l.jsx(Ii,{className:"h-8 w-8 text-white"})}),l.jsx("h2",{className:"text-xl font-semibold text-center",children:r})]}),l.jsxs("form",{onSubmit:a,children:[l.jsx("div",{className:"p-6",children:l.jsx("input",{type:"password",value:i,onChange:c=>o(c.target.value),className:"w-full bg-[#202c33] border-2 border-gray-600 rounded-lg px-4 py-3 text-white text-center tracking-widest text-lg focus:outline-none focus:ring-2 ring-primary",placeholder:s,autoFocus:!0})}),l.jsxs("div",{className:"px-6 py-4 bg-[#202c33] rounded-b-lg flex justify-end space-x-4",children:[l.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 rounded-md text-white bg-gray-600 hover:bg-gray-500 glossy-button",children:"Cancel"}),l.jsx("button",{type:"submit",className:"px-4 py-2 rounded-md text-white bg-primary hover:bg-primary-hover glossy-button",children:"Unlock"})]})]})]})}):null},Xf={themeColor:{name:"green",from:"#00a884",to:"#008a69"},toggleOnColor:{name:"green",from:"#00a884",to:"#008a69"},toggleOffColor:{name:"gray",color:"#374151"},chatBackground:"https://i.redd.it/qwd83nc4xxf41.jpg",uiStyle:"normal",animationsEnabled:!0,fontSize:"medium",headerAnimation:"none",swipeSensitivity:50,wallpaperQuality:"medium"},RF={lockedChats:{enabled:!0,passcode:"1234"},vanishMode:{enabled:!0,passcode:"5678"},dailyChatLock:{enabled:!0,passcode:"0000"}},dC=b.createContext(void 0),jF=({children:t})=>{const[e,n]=b.useState(null),[r,s]=b.useState([]),[i,o]=b.useState([]),[a,c]=b.useState([]),[d,h]=b.useState([]),[f,p]=b.useState(null),[g,w]=b.useState(!0),[T,C]=b.useState(null),{requestPermission:_,showNotification:v}=AF(),{showToast:x}=Vh(),[R,D]=b.useState(null),[V,S]=b.useState(null),E=Ue(),[N,I]=b.useState(!1),[P,j]=b.useState(()=>{const F=localStorage.getItem("whatsapp-locked-dates");return F?JSON.parse(F):{}}),[A,ee]=b.useState({}),[H,Ee]=b.useState({isOpen:!1,title:"",placeholder:"",onSubmit:()=>{}}),[Z,U]=b.useState(()=>{const F=localStorage.getItem("whatsapp-passcode-settings");return F?JSON.parse(F):RF}),[W,q]=b.useState(null),ce=F=>{U(K=>{const Q={...K,...F};return localStorage.setItem("whatsapp-passcode-settings",JSON.stringify(Q)),Q})},[he,Ce]=b.useState(()=>{const F=localStorage.getItem("security-notifications-enabled");return F?JSON.parse(F):!0}),ne=F=>{n(K=>{if(!K)return null;const Q={...K,...F};return localStorage.setItem("whatsapp-current-user",JSON.stringify(Q)),Q})};b.useEffect(()=>{localStorage.setItem("security-notifications-enabled",JSON.stringify(he))},[he]),b.useEffect(()=>{localStorage.setItem("whatsapp-locked-dates",JSON.stringify(P))},[P]);const[Se,pe]=b.useState(()=>{try{const F=localStorage.getItem("whatsapp-theme-settings");return F?{...Xf,...JSON.parse(F)}:Xf}catch{return Xf}}),{userProfile:Ie,currentUser:jn}=$s();b.useEffect(()=>{(async()=>{if(!Ie)return;const K=await _();if(K)try{await $5(Ie.id,{fcmToken:K}),console.log("FCM Token saved for user:",Ie.id)}catch(Q){console.error("Failed to save FCM token:",Q)}})()},[Ie]),b.useEffect(()=>{let F;return(async()=>{if(!Ie){w(!1);return}w(!0);try{n(Ie);const Q=await vv();s(Q),F=H5(Ie.id,le=>{c(le)});const re=await Ub(Ie.id);h(re);const oe=await Fb(Ie.id);o(oe),C(null)}catch(Q){C("Failed to load application data. Please refresh the page."),console.error(Q)}finally{w(!1)}})(),()=>{F&&F()}},[Ie]);const St=(F,K,Q)=>{S({id:Date.now(),type:F,title:K,body:Q})},vn=()=>{S(null)},It=async(F,K,Q,re)=>{if(!e)return!1;try{return Q==="me"?await $b(K,e.id):await Wb(K,e.id),!0}catch(oe){return console.error("Failed to delete message:",oe),!1}},fe=async F=>{await qb()&&c(Q=>Q.map(re=>re.id===F?{...re,isLocked:!re.isLocked}:re))},Ae=async F=>{await Gb()&&c(Q=>Q.map(re=>re.id===F?{...re,lastMessage:"",lastMessageAt:new Date().toISOString(),lastMessageType:"TEXT",lastMessageSentById:"",lastMessageSentByName:"",unreadCount:0}:re))},pt=async(F,K)=>{if(await Xb()){const re=K===null?void 0:K;c(oe=>oe.map(le=>le.id===F?{...le,theme:re}:le)),(f==null?void 0:f.id)===F&&p(oe=>oe?{...oe,theme:re}:null)}},Bt=async(F,K)=>{if(await Jb()){const re=K===null?void 0:K;c(oe=>oe.map(le=>le.id===F?{...le,receivedTheme:re}:le)),(f==null?void 0:f.id)===F&&p(oe=>oe?{...oe,receivedTheme:re}:null)}},ot=(F,K,Q)=>{Ee({isOpen:!0,title:F,placeholder:K,onSubmit:Q})},Xe=()=>Ee(F=>({...F,isOpen:!1})),J={currentUser:e,users:r,calls:i,updateCurrentUser:ne,conversations:a,setConversations:c,addConversation:F=>{c(K=>{if(K.some(oe=>oe.id===F.id))return K;const re=[...K,F];return W6(re)})},selectedChat:f,setSelectedChat:p,loading:g,error:T,deleteMessage:It,themeSettings:Se,setThemeSettings:pe,showBrowserNotification:v,securityNotificationsEnabled:he,setSecurityNotificationsEnabled:Ce,toggleChatLock:fe,clearChat:Ae,updateChatTheme:pt,updateChatReceivedTheme:Bt,activeCall:R,initiateCall:async(F,K)=>{const Q=r.find(re=>re.id===F);if(Q)try{const re={audio:!0,video:K==="video"};await navigator.mediaDevices.getUserMedia(re).then(oe=>oe.getTracks().forEach(le=>le.stop())),D({contact:Q,type:K,status:"calling",isMuted:!1,isVideoOff:K==="voice",isSpeaker:K==="video",isFrontCamera:!0,startTime:null}),E(`/call/${F}`)}catch(re){console.error("Failed to get media permissions",re),x(`Could not start ${K} call. Please allow access to your camera and microphone.`,"error")}},answerCall:()=>{R&&(D({...R,status:"active",startTime:Date.now()}),E(`/call/${R.contact.id}`))},rejectCall:()=>{D(null)},hangUp:()=>{D(null),E("/")},toggleMute:()=>D(F=>F?{...F,isMuted:!F.isMuted}:null),toggleVideo:()=>D(F=>F?{...F,isVideoOff:!F.isVideoOff}:null),toggleSpeaker:()=>D(F=>F?{...F,isSpeaker:!F.isSpeaker}:null),switchCamera:()=>D(F=>F?{...F,isFrontCamera:!F.isFrontCamera}:null),inAppNotification:V,showInAppNotification:St,clearInAppNotification:vn,isLockedViewActive:N,promptAndToggleLockView:()=>{if(!Z.lockedChats.enabled){x("Locked Chats feature is disabled. Enable it in Settings > Passcode Manager.","warning");return}if(N){I(!1);return}ot("Enter Password to View Locked Content",`Locked Chats Password (${Z.lockedChats.passcode})`,F=>{F===Z.lockedChats.passcode?(I(!0),x("Locked view activated","success")):x("Incorrect password","error"),Xe()})},lockedDates:P,unlockedDatesForSession:A,toggleDailyLock:(F,K,Q)=>{if(!Z.dailyChatLock.enabled){x("Daily Chat Lock feature is disabled. Enable it in Settings > Passcode Manager.","warning");return}ot(Q?"Unlock messages for this day?":"Lock messages for this day?",`Daily Lock Password (${Z.dailyChatLock.passcode})`,oe=>{oe===Z.dailyChatLock.passcode?(j(le=>{const be=le[F]||[],Mn=Q?be.filter(Vn=>Vn!==K):[...be,K];return{...le,[F]:Mn}}),Q&&ee(le=>({...le,[F]:[...le[F]||[],K]})),x(Q?"Day unlocked":"Day locked","success")):x("Incorrect password","error"),Xe()})},promptAndToggleVanishMode:F=>{if(!Z.vanishMode.enabled){x("Vanish Mode feature is disabled. Enable it in Settings > Passcode Manager.","warning");return}ot("Vanish Mode",`Vanish Mode Password (${Z.vanishMode.passcode})`,async K=>{if(K===Z.vanishMode.passcode){if(await Kb()){const re=a.find(le=>le.id===F),oe=!(re!=null&&re.isVanishMode);c(le=>le.map(be=>be.id===F?{...be,isVanishMode:oe}:be)),x(`Vanish Mode ${oe?"enabled":"disabled"}`,"success")}}else x("Incorrect password","error");Xe()})},clearUnlockedDatesForSession:F=>{ee(K=>{const{[F]:Q,...re}=K;return re})},passcodeSettings:Z,updatePasscodeSettings:ce,activeStatusUser:W,openStatusViewer:F=>{const K=r.find(Q=>Q.id===F);K&&q(K)},closeStatusViewer:()=>q(null),nextStatusUser:()=>{},prevStatusUser:()=>{},statuses:d,reactToStatus:async(F,K,Q)=>{try{await CF(F,K,Q),h(re=>re.map(oe=>oe.userId===F?{...oe,updates:oe.updates.map(le=>{if(le.id===K){const be=le.reactions||[];if(!be.includes(Q))return{...le,reactions:[Q,...be]}}return le})}:oe)),x("Reaction added!","success")}catch(re){console.error("Error adding reaction:",re),x("Failed to add reaction","error")}},reactToMessage:async(F,K,Q)=>{e&&await Qb(K,e.id)},voteOnPoll:async(F,K,Q)=>{e&&await Yb(K,e.id)},createPoll:async(F,K)=>{if(!f||!e)return null;const Q={pollInfo:K,messageType:"poll",content:K.question};try{const re=F||f.id,oe=Q.content||K.question;return await zb(re,e.id,oe,f.conversationType.toLowerCase(),Q)}catch(re){return console.error("Failed to create poll",re),null}}};return l.jsxs(dC.Provider,{value:J,children:[t,l.jsx(PF,{isOpen:H.isOpen,onClose:Xe,onSubmit:H.onSubmit,title:H.title,placeholder:H.placeholder})]})},Te=()=>{const t=b.useContext(dC);if(t===void 0)throw new Error("useAppContext must be used within an AppProvider");return t},DF=()=>{const{currentUser:t}=Te(),[e,n]=b.useState(0);return b.useEffect(()=>{if(!t){n(0);return}n(0)},[t]),e===0?null:l.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1",children:e>99?"99+":e})},MF=()=>{const{currentUser:t,themeSettings:e,promptAndToggleLockView:n,passcodeSettings:r}=Te(),s=e.headerAnimation||"none",i=()=>{if(!r.lockedChats.enabled){alert("Locked Chats feature is disabled. Enable it in Settings > Passcode Manager.");return}n()},o=()=>{if(!t)return l.jsx(l.Fragment,{children:"WhatsApp"});if(s==="none")return l.jsx(l.Fragment,{children:t.name});const a=t.name,c=`header-title-animated ${s}`;return l.jsx("div",{className:c,children:a.split("").map((d,h)=>l.jsx("span",{style:{animationDelay:`${h*.1}s`},children:d===" "?"":d},h))})};return l.jsx("h1",{className:"text-xl font-semibold text-gray-200 cursor-pointer",onDoubleClick:i,children:l.jsx(o,{})})},VF=()=>{const t="border-b-2 border-primary text-primary",e="text-gray-400 hover:text-gray-200",n="flex items-center space-x-2 px-4 py-3 transition-colors relative";return l.jsxs("div",{className:"hidden lg:flex bg-[#202c33] border-b border-gray-700",children:[l.jsxs(To,{to:"/",end:!0,className:({isActive:r})=>`${n} ${r?t:e}`,children:[l.jsx(nh,{className:"h-5 w-5"}),l.jsx("span",{className:"text-sm font-medium",children:"Chats"})]}),l.jsxs(To,{to:"/status",className:({isActive:r})=>`${n} ${r?t:e}`,children:[l.jsx(jS,{className:"h-5 w-5"}),l.jsx("span",{className:"text-sm font-medium",children:"Status"})]}),l.jsxs(To,{to:"/calls",className:({isActive:r})=>`${n} ${r?t:e}`,children:[l.jsx(ur,{className:"h-5 w-5"}),l.jsx("span",{className:"text-sm font-medium",children:"Calls"})]})]})},hC=()=>{const t=Zo(),[e,n]=b.useState(!1),r=b.useRef(null),{logout:s}=$s();Ue(),b.useEffect(()=>{const o=a=>{r.current&&!r.current.contains(a.target)&&n(!1)};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[]);const i=async()=>{if(window.confirm("Are you sure you want to log out?"))try{console.log(" Logging out from header menu..."),await s(),console.log(" Logout successful, redirecting to login..."),n(!1)}catch(o){console.error(" Logout error:",o),alert("Failed to logout. Please try again.")}};return l.jsxs(l.Fragment,{children:[l.jsxs("header",{className:"flex-shrink-0 bg-[#202c33] p-3 flex justify-between items-center",children:[l.jsx(MF,{}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs(hs,{to:"/activity",className:"text-gray-400 hover:text-gray-200 relative",children:[l.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),l.jsx(DF,{})]}),t&&l.jsx(hs,{to:"/new-chat",className:"text-gray-400 hover:text-gray-200",children:l.jsx(VS,{className:"h-6 w-6"})}),!t&&l.jsx("button",{className:"text-gray-400 hover:text-gray-200",children:l.jsx(Si,{className:"h-6 w-6"})}),l.jsxs("div",{className:"relative",ref:r,children:[l.jsx("button",{onClick:()=>n(!e),className:"text-gray-400 hover:text-gray-200",children:l.jsx(kS,{className:"h-6 w-6"})}),e&&l.jsxs("div",{className:"absolute top-full right-0 mt-2 w-48 bg-[#233138] rounded-md shadow-lg z-20 py-1",children:[l.jsx("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-[#111b21]",children:"New group"}),l.jsx("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-[#111b21]",children:"Starred messages"}),l.jsx(hs,{to:"/settings",className:"block w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-[#111b21]",onClick:()=>n(!1),children:"Settings"}),l.jsx(hs,{to:"/settings/chats",className:"block w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-[#111b21]",onClick:()=>n(!1),children:"Chats Settings"}),l.jsx("button",{onClick:i,className:"w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-[#111b21] font-medium",children:"Log out"})]})]})]})]}),l.jsx(VF,{})]})},_v=b.createContext({});function Lh(t){const e=b.useRef(null);return e.current===null&&(e.current=t()),e.current}const Tv=typeof window<"u",fC=Tv?b.useLayoutEffect:b.useEffect,Fh=b.createContext(null);function Ev(t,e){t.indexOf(e)===-1&&t.push(e)}function Sv(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Br=(t,e,n)=>n>e?e:n<t?t:n;let Iv=()=>{};const zr={},pC=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function mC(t){return typeof t=="object"&&t!==null}const gC=t=>/^0[^.\s]+$/u.test(t);function bv(t){let e;return()=>(e===void 0&&(e=t()),e)}const kn=t=>t,OF=(t,e)=>n=>e(t(n)),gc=(...t)=>t.reduce(OF),Hl=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Cv{constructor(){this.subscriptions=[]}add(e){return Ev(this.subscriptions,e),()=>Sv(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const lr=t=>t*1e3,bn=t=>t/1e3;function yC(t,e){return e?t*(1e3/e):0}const vC=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,LF=1e-7,FF=12;function UF(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=vC(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>LF&&++a<FF);return o}function yc(t,e,n,r){if(t===e&&n===r)return kn;const s=i=>UF(i,0,1,t,n);return i=>i===0||i===1?i:vC(s(i),e,r)}const wC=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,xC=t=>e=>1-t(1-e),_C=yc(.33,1.53,.69,.99),kv=xC(_C),TC=wC(kv),EC=t=>(t*=2)<1?.5*kv(t):.5*(2-Math.pow(2,-10*(t-1))),Nv=t=>1-Math.sin(Math.acos(t)),SC=xC(Nv),IC=wC(Nv),BF=yc(.42,0,1,1),zF=yc(0,0,.58,1),bC=yc(.42,0,.58,1),$F=t=>Array.isArray(t)&&typeof t[0]!="number",CC=t=>Array.isArray(t)&&typeof t[0]=="number",WF={linear:kn,easeIn:BF,easeInOut:bC,easeOut:zF,circIn:Nv,circInOut:IC,circOut:SC,backIn:kv,backInOut:TC,backOut:_C,anticipate:EC},HF=t=>typeof t=="string",U_=t=>{if(CC(t)){Iv(t.length===4);const[e,n,r,s]=t;return yc(e,n,r,s)}else if(HF(t))return WF[t];return t},cu=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function qF(t,e){let n=new Set,r=new Set,s=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function c(h){o.has(h)&&(d.schedule(h),t()),h(a)}const d={schedule:(h,f=!1,p=!1)=>{const w=p&&s?n:r;return f&&o.add(h),w.has(h)||w.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(a=h,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(c),n.clear(),s=!1,i&&(i=!1,d.process(h))}};return d}const KF=40;function kC(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=cu.reduce((x,R)=>(x[R]=qF(i),x),{}),{setup:a,read:c,resolveKeyframes:d,preUpdate:h,update:f,preRender:p,render:g,postRender:w}=o,T=()=>{const x=zr.useManualTiming?s.timestamp:performance.now();n=!1,zr.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(x-s.timestamp,KF),1)),s.timestamp=x,s.isProcessing=!0,a.process(s),c.process(s),d.process(s),h.process(s),f.process(s),p.process(s),g.process(s),w.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(T))},C=()=>{n=!0,r=!0,s.isProcessing||t(T)};return{schedule:cu.reduce((x,R)=>{const D=o[R];return x[R]=(V,S=!1,E=!1)=>(n||C(),D.schedule(V,S,E)),x},{}),cancel:x=>{for(let R=0;R<cu.length;R++)o[cu[R]].cancel(x)},state:s,steps:o}}const{schedule:Fe,cancel:js,state:yt,steps:Jf}=kC(typeof requestAnimationFrame<"u"?requestAnimationFrame:kn,!0);let Vu;function GF(){Vu=void 0}const Xt={now:()=>(Vu===void 0&&Xt.set(yt.isProcessing||zr.useManualTiming?yt.timestamp:performance.now()),Vu),set:t=>{Vu=t,queueMicrotask(GF)}},NC=t=>e=>typeof e=="string"&&e.startsWith(t),Av=NC("--"),QF=NC("var(--"),Pv=t=>QF(t)?YF.test(t.split("/*")[0].trim()):!1,YF=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,aa={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ql={...aa,transform:t=>Br(0,1,t)},uu={...aa,default:1},al=t=>Math.round(t*1e5)/1e5,Rv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function XF(t){return t==null}const JF=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,jv=(t,e)=>n=>!!(typeof n=="string"&&JF.test(n)&&n.startsWith(t)||e&&!XF(n)&&Object.prototype.hasOwnProperty.call(n,e)),AC=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(Rv);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},ZF=t=>Br(0,255,t),Zf={...aa,transform:t=>Math.round(ZF(t))},ui={test:jv("rgb","red"),parse:AC("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Zf.transform(t)+", "+Zf.transform(e)+", "+Zf.transform(n)+", "+al(ql.transform(r))+")"};function e9(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Wm={test:jv("#"),parse:e9,transform:ui.transform},vc=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),es=vc("deg"),cr=vc("%"),se=vc("px"),t9=vc("vh"),n9=vc("vw"),B_={...cr,parse:t=>cr.parse(t)/100,transform:t=>cr.transform(t*100)},uo={test:jv("hsl","hue"),parse:AC("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+cr.transform(al(e))+", "+cr.transform(al(n))+", "+al(ql.transform(r))+")"},rt={test:t=>ui.test(t)||Wm.test(t)||uo.test(t),parse:t=>ui.test(t)?ui.parse(t):uo.test(t)?uo.parse(t):Wm.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ui.transform(t):uo.transform(t),getAnimatableNone:t=>{const e=rt.parse(t);return e.alpha=0,rt.transform(e)}},r9=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function s9(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Rv))==null?void 0:e.length)||0)+(((n=t.match(r9))==null?void 0:n.length)||0)>0}const PC="number",RC="color",i9="var",o9="var(",z_="${}",a9=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Kl(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=e.replace(a9,c=>(rt.test(c)?(r.color.push(i),s.push(RC),n.push(rt.parse(c))):c.startsWith(o9)?(r.var.push(i),s.push(i9),n.push(c)):(r.number.push(i),s.push(PC),n.push(parseFloat(c))),++i,z_)).split(z_);return{values:n,split:a,indexes:r,types:s}}function jC(t){return Kl(t).values}function DC(t){const{split:e,types:n}=Kl(t),r=e.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],s[o]!==void 0){const a=n[o];a===PC?i+=al(s[o]):a===RC?i+=rt.transform(s[o]):i+=s[o]}return i}}const l9=t=>typeof t=="number"?0:rt.test(t)?rt.getAnimatableNone(t):t;function c9(t){const e=jC(t);return DC(t)(e.map(l9))}const Ds={test:s9,parse:jC,createTransformer:DC,getAnimatableNone:c9};function ep(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function u9({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,c=2*n-a;s=ep(c,a,t+1/3),i=ep(c,a,t),o=ep(c,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function Ad(t,e){return n=>n>0?e:t}const ze=(t,e,n)=>t+(e-t)*n,tp=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},d9=[Wm,ui,uo],h9=t=>d9.find(e=>e.test(t));function $_(t){const e=h9(t);if(!e)return!1;let n=e.parse(t);return e===uo&&(n=u9(n)),n}const W_=(t,e)=>{const n=$_(t),r=$_(e);if(!n||!r)return Ad(t,e);const s={...n};return i=>(s.red=tp(n.red,r.red,i),s.green=tp(n.green,r.green,i),s.blue=tp(n.blue,r.blue,i),s.alpha=ze(n.alpha,r.alpha,i),ui.transform(s))},Hm=new Set(["none","hidden"]);function f9(t,e){return Hm.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function p9(t,e){return n=>ze(t,e,n)}function Dv(t){return typeof t=="number"?p9:typeof t=="string"?Pv(t)?Ad:rt.test(t)?W_:y9:Array.isArray(t)?MC:typeof t=="object"?rt.test(t)?W_:m9:Ad}function MC(t,e){const n=[...t],r=n.length,s=t.map((i,o)=>Dv(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function m9(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Dv(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function g9(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const i=e.types[s],o=t.indexes[i][r[i]],a=t.values[o]??0;n[s]=a,r[i]++}return n}const y9=(t,e)=>{const n=Ds.createTransformer(e),r=Kl(t),s=Kl(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Hm.has(t)&&!s.values.length||Hm.has(e)&&!r.values.length?f9(t,e):gc(MC(g9(r,s),s.values),n):Ad(t,e)};function VC(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ze(t,e,n):Dv(t)(t,e)}const v9=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Fe.update(e,n),stop:()=>js(e),now:()=>yt.isProcessing?yt.timestamp:Xt.now()}},OC=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=Math.round(t(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Pd=2e4;function Mv(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Pd;)e+=n,r=t.next(e);return e>=Pd?1/0:e}function w9(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(Mv(r),Pd);return{type:"keyframes",ease:i=>r.next(s*i).value/e,duration:bn(s)}}const x9=5;function LC(t,e,n){const r=Math.max(e-x9,0);return yC(n-t(r),e-r)}const Ge={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},np=.001;function _9({duration:t=Ge.duration,bounce:e=Ge.bounce,velocity:n=Ge.velocity,mass:r=Ge.mass}){let s,i,o=1-e;o=Br(Ge.minDamping,Ge.maxDamping,o),t=Br(Ge.minDuration,Ge.maxDuration,bn(t)),o<1?(s=d=>{const h=d*o,f=h*t,p=h-n,g=qm(d,o),w=Math.exp(-f);return np-p/g*w},i=d=>{const f=d*o*t,p=f*n+n,g=Math.pow(o,2)*Math.pow(d,2)*t,w=Math.exp(-f),T=qm(Math.pow(d,2),o);return(-s(d)+np>0?-1:1)*((p-g)*w)/T}):(s=d=>{const h=Math.exp(-d*t),f=(d-n)*t+1;return-np+h*f},i=d=>{const h=Math.exp(-d*t),f=(n-d)*(t*t);return h*f});const a=5/t,c=E9(s,i,a);if(t=lr(t),isNaN(c))return{stiffness:Ge.stiffness,damping:Ge.damping,duration:t};{const d=Math.pow(c,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:t}}}const T9=12;function E9(t,e,n){let r=n;for(let s=1;s<T9;s++)r=r-t(r)/e(r);return r}function qm(t,e){return t*Math.sqrt(1-e*e)}const S9=["duration","bounce"],I9=["stiffness","damping","mass"];function H_(t,e){return e.some(n=>t[n]!==void 0)}function b9(t){let e={velocity:Ge.velocity,stiffness:Ge.stiffness,damping:Ge.damping,mass:Ge.mass,isResolvedFromDuration:!1,...t};if(!H_(t,I9)&&H_(t,S9))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*Br(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Ge.mass,stiffness:s,damping:i}}else{const n=_9(t);e={...e,...n,mass:Ge.mass},e.isResolvedFromDuration=!0}return e}function Rd(t=Ge.visualDuration,e=Ge.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:c,damping:d,mass:h,duration:f,velocity:p,isResolvedFromDuration:g}=b9({...n,velocity:-bn(n.velocity||0)}),w=p||0,T=d/(2*Math.sqrt(c*h)),C=o-i,_=bn(Math.sqrt(c/h)),v=Math.abs(C)<5;r||(r=v?Ge.restSpeed.granular:Ge.restSpeed.default),s||(s=v?Ge.restDelta.granular:Ge.restDelta.default);let x;if(T<1){const D=qm(_,T);x=V=>{const S=Math.exp(-T*_*V);return o-S*((w+T*_*C)/D*Math.sin(D*V)+C*Math.cos(D*V))}}else if(T===1)x=D=>o-Math.exp(-_*D)*(C+(w+_*C)*D);else{const D=_*Math.sqrt(T*T-1);x=V=>{const S=Math.exp(-T*_*V),E=Math.min(D*V,300);return o-S*((w+T*_*C)*Math.sinh(E)+D*C*Math.cosh(E))/D}}const R={calculatedDuration:g&&f||null,next:D=>{const V=x(D);if(g)a.done=D>=f;else{let S=D===0?w:0;T<1&&(S=D===0?lr(w):LC(x,D,V));const E=Math.abs(S)<=r,N=Math.abs(o-V)<=s;a.done=E&&N}return a.value=a.done?o:V,a},toString:()=>{const D=Math.min(Mv(R),Pd),V=OC(S=>R.next(D*S).value,D,30);return D+"ms "+V},toTransition:()=>{}};return R}Rd.applyToOptions=t=>{const e=w9(t,100,Rd);return t.ease=e.ease,t.duration=lr(e.duration),t.type="keyframes",t};function Km({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:c,restDelta:d=.5,restSpeed:h}){const f=t[0],p={done:!1,value:f},g=E=>a!==void 0&&E<a||c!==void 0&&E>c,w=E=>a===void 0?c:c===void 0||Math.abs(a-E)<Math.abs(c-E)?a:c;let T=n*e;const C=f+T,_=o===void 0?C:o(C);_!==C&&(T=_-f);const v=E=>-T*Math.exp(-E/r),x=E=>_+v(E),R=E=>{const N=v(E),I=x(E);p.done=Math.abs(N)<=d,p.value=p.done?_:I};let D,V;const S=E=>{g(p.value)&&(D=E,V=Rd({keyframes:[p.value,w(p.value)],velocity:LC(x,E,p.value),damping:s,stiffness:i,restDelta:d,restSpeed:h}))};return S(0),{calculatedDuration:null,next:E=>{let N=!1;return!V&&D===void 0&&(N=!0,R(E),S(E)),D!==void 0&&E>=D?V.next(E-D):(!N&&R(E),p)}}}function C9(t,e,n){const r=[],s=n||zr.mix||VC,i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||kn:e;a=gc(c,a)}r.push(a)}return r}function k9(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(Iv(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=C9(e,r,s),c=a.length,d=h=>{if(o&&h<t[0])return e[0];let f=0;if(c>1)for(;f<t.length-2&&!(h<t[f+1]);f++);const p=Hl(t[f],t[f+1],h);return a[f](p)};return n?h=>d(Br(t[0],t[i-1],h)):d}function N9(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Hl(0,e,r);t.push(ze(n,1,s))}}function A9(t){const e=[0];return N9(e,t.length-1),e}function P9(t,e){return t.map(n=>n*e)}function R9(t,e){return t.map(()=>e||bC).splice(0,t.length-1)}function ll({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=$F(r)?r.map(U_):U_(r),i={done:!1,value:e[0]},o=P9(n&&n.length===e.length?n:A9(e),t),a=k9(o,e,{ease:Array.isArray(s)?s:R9(e,s)});return{calculatedDuration:t,next:c=>(i.value=a(c),i.done=c>=t,i)}}const j9=t=>t!==null;function Vv(t,{repeat:e,repeatType:n="loop"},r,s=1){const i=t.filter(j9),a=s<0||e&&n!=="loop"&&e%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const D9={decay:Km,inertia:Km,tween:ll,keyframes:ll,spring:Rd};function FC(t){typeof t.type=="string"&&(t.type=D9[t.type])}class Ov{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const M9=t=>t/100;class Lv extends Ov{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==Xt.now()&&this.tick(Xt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;FC(e);const{type:n=ll,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=e;let{keyframes:a}=e;const c=n||ll;c!==ll&&typeof a[0]!="number"&&(this.mixKeyframes=gc(M9,VC(a[0],a[1])),a=[0,100]);const d=c({...e,keyframes:a});i==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...a].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=Mv(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:h,repeat:f,repeatType:p,repeatDelay:g,type:w,onUpdate:T,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const _=this.currentTime-d*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?_<0:_>s;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let x=this.currentTime,R=r;if(f){const E=Math.min(this.currentTime,s)/a;let N=Math.floor(E),I=E%1;!I&&E>=1&&(I=1),I===1&&N--,N=Math.min(N,f+1),!!(N%2)&&(p==="reverse"?(I=1-I,g&&(I-=g/a)):p==="mirror"&&(R=o)),x=Br(0,1,I)*a}const D=v?{done:!1,value:h[0]}:R.next(x);i&&(D.value=i(D.value));let{done:V}=D;!v&&c!==null&&(V=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&V);return S&&w!==Km&&(D.value=Vv(h,this.options,C,this.speed)),T&&T(D.value),S&&this.finish(),D}then(e,n){return this.finished.then(e,n)}get duration(){return bn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+bn(e)}get time(){return bn(this.currentTime)}set time(e){var n;e=lr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Xt.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=bn(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:e=v9,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(i=(s=this.options).onPlay)==null||i.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Xt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function V9(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const di=t=>t*180/Math.PI,Gm=t=>{const e=di(Math.atan2(t[1],t[0]));return Qm(e)},O9={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Gm,rotateZ:Gm,skewX:t=>di(Math.atan(t[1])),skewY:t=>di(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Qm=t=>(t=t%360,t<0&&(t+=360),t),q_=Gm,K_=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),G_=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),L9={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:K_,scaleY:G_,scale:t=>(K_(t)+G_(t))/2,rotateX:t=>Qm(di(Math.atan2(t[6],t[5]))),rotateY:t=>Qm(di(Math.atan2(-t[2],t[0]))),rotateZ:q_,rotate:q_,skewX:t=>di(Math.atan(t[4])),skewY:t=>di(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Ym(t){return t.includes("scale")?1:0}function Xm(t,e){if(!t||t==="none")return Ym(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=L9,s=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=O9,s=a}if(!s)return Ym(e);const i=r[e],o=s[1].split(",").map(U9);return typeof i=="function"?i(o):o[i]}const F9=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Xm(n,e)};function U9(t){return parseFloat(t.trim())}const la=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ca=new Set(la),Q_=t=>t===aa||t===se,B9=new Set(["x","y","z"]),z9=la.filter(t=>!B9.has(t));function $9(t){const e=[];return z9.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const gi={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Xm(e,"x"),y:(t,{transform:e})=>Xm(e,"y")};gi.translateX=gi.x;gi.translateY=gi.y;const yi=new Set;let Jm=!1,Zm=!1,eg=!1;function UC(){if(Zm){const t=Array.from(yi).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=$9(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Zm=!1,Jm=!1,yi.forEach(t=>t.complete(eg)),yi.clear()}function BC(){yi.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Zm=!0)})}function W9(){eg=!0,BC(),UC(),eg=!1}class Fv{constructor(e,n,r,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(yi.add(this),Jm||(Jm=!0,Fe.read(BC),Fe.resolveKeyframes(UC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const i=s==null?void 0:s.get(),o=e[e.length-1];if(i!==void 0)e[0]=i;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),s&&i===void 0&&s.set(e[0])}V9(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),yi.delete(this)}cancel(){this.state==="scheduled"&&(yi.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const H9=t=>t.startsWith("--");function q9(t,e,n){H9(e)?t.style.setProperty(e,n):t.style[e]=n}const K9=bv(()=>window.ScrollTimeline!==void 0),G9={};function Q9(t,e){const n=bv(t);return()=>G9[e]??n()}const zC=Q9(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),$a=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Y_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:$a([0,.65,.55,1]),circOut:$a([.55,0,1,.45]),backIn:$a([.31,.01,.66,-.59]),backOut:$a([.33,1.53,.69,.99])};function $C(t,e){if(t)return typeof t=="function"?zC()?OC(t,e):"ease-out":CC(t)?$a(t):Array.isArray(t)?t.map(n=>$C(n,e)||Y_.easeOut):Y_[t]}function Y9(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeOut",times:c}={},d=void 0){const h={[e]:n};c&&(h.offset=c);const f=$C(a,s);Array.isArray(f)&&(h.easing=f);const p={delay:r,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return d&&(p.pseudoElement=d),t.animate(h,p)}function WC(t){return typeof t=="function"&&"applyToOptions"in t}function X9({type:t,...e}){return WC(t)&&zC()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class J9 extends Ov{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:a,onComplete:c}=e;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=e,Iv(typeof e.type!="string");const d=X9(e);this.animation=Y9(n,r,s,d,i),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const h=Vv(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(h):q9(n,r,h),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return bn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+bn(e)}get time(){return bn(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=lr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&K9()?(this.animation.timeline=e,kn):n(this)}}const HC={anticipate:EC,backInOut:TC,circInOut:IC};function Z9(t){return t in HC}function eU(t){typeof t.ease=="string"&&Z9(t.ease)&&(t.ease=HC[t.ease])}const X_=10;class tU extends J9{constructor(e){eU(e),FC(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new Lv({...o,autoplay:!1}),c=lr(this.finishedTime??this.time);n.setWithVelocity(a.sample(c-X_).value,a.sample(c).value,X_),a.stop()}}const J_=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ds.test(t)||t==="0")&&!t.startsWith("url("));function nU(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function rU(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=J_(s,e),a=J_(i,e);return!o||!a?!1:nU(t)||(n==="spring"||WC(n))&&r}function tg(t){t.duration=0,t.type="keyframes"}const sU=new Set(["opacity","clipPath","filter","transform"]),iU=bv(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function oU(t){var h;const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:i,type:o}=t;if(!(((h=e==null?void 0:e.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=e.owner.getProps();return iU()&&n&&sU.has(n)&&(n!=="transform"||!d)&&!c&&!r&&s!=="mirror"&&i!==0&&o!=="inertia"}const aU=40;class lU extends Ov{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:a,name:c,motionValue:d,element:h,...f}){var w;super(),this.stop=()=>{var T,C;this._animation&&(this._animation.stop(),(T=this.stopTimeline)==null||T.call(this)),(C=this.keyframeResolver)==null||C.cancel()},this.createdAt=Xt.now();const p={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,name:c,motionValue:d,element:h,...f},g=(h==null?void 0:h.KeyframeResolver)||Fv;this.keyframeResolver=new g(a,(T,C,_)=>this.onKeyframesResolved(T,C,p,!_),c,d,h),(w=this.keyframeResolver)==null||w.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:a,delay:c,isHandoff:d,onUpdate:h}=r;this.resolvedAt=Xt.now(),rU(e,i,o,a)||((zr.instantAnimations||!c)&&(h==null||h(Vv(e,r,n))),e[0]=e[e.length-1],tg(r),r.repeat=0);const p={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>aU?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},g=!d&&oU(p)?new tU({...p,element:p.motionValue.owner.current}):new Lv(p);g.finished.then(()=>this.notifyFinished()).catch(kn),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),W9()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const cU=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function uU(t){const e=cU.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function qC(t,e,n=1){const[r,s]=uU(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return pC(o)?parseFloat(o):o}return Pv(s)?qC(s,e,n+1):s}function Uv(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const KC=new Set(["width","height","top","left","right","bottom",...la]),dU={test:t=>t==="auto",parse:t=>t},GC=t=>e=>e.test(t),QC=[aa,se,cr,es,n9,t9,dU],Z_=t=>QC.find(GC(t));function hU(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||gC(t):!0}const fU=new Set(["brightness","contrast","saturate","opacity"]);function pU(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Rv)||[];if(!r)return t;const s=n.replace(r,"");let i=fU.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const mU=/\b([a-z-]*)\(.*?\)/gu,ng={...Ds,getAnimatableNone:t=>{const e=t.match(mU);return e?e.map(pU).join(" "):t}},e1={...aa,transform:Math.round},gU={rotate:es,rotateX:es,rotateY:es,rotateZ:es,scale:uu,scaleX:uu,scaleY:uu,scaleZ:uu,skew:es,skewX:es,skewY:es,distance:se,translateX:se,translateY:se,translateZ:se,x:se,y:se,z:se,perspective:se,transformPerspective:se,opacity:ql,originX:B_,originY:B_,originZ:se},Bv={borderWidth:se,borderTopWidth:se,borderRightWidth:se,borderBottomWidth:se,borderLeftWidth:se,borderRadius:se,radius:se,borderTopLeftRadius:se,borderTopRightRadius:se,borderBottomRightRadius:se,borderBottomLeftRadius:se,width:se,maxWidth:se,height:se,maxHeight:se,top:se,right:se,bottom:se,left:se,padding:se,paddingTop:se,paddingRight:se,paddingBottom:se,paddingLeft:se,margin:se,marginTop:se,marginRight:se,marginBottom:se,marginLeft:se,backgroundPositionX:se,backgroundPositionY:se,...gU,zIndex:e1,fillOpacity:ql,strokeOpacity:ql,numOctaves:e1},yU={...Bv,color:rt,backgroundColor:rt,outlineColor:rt,fill:rt,stroke:rt,borderColor:rt,borderTopColor:rt,borderRightColor:rt,borderBottomColor:rt,borderLeftColor:rt,filter:ng,WebkitFilter:ng},YC=t=>yU[t];function XC(t,e){let n=YC(t);return n!==ng&&(n=Ds),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const vU=new Set(["auto","none","0"]);function wU(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!vU.has(i)&&Kl(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=XC(n,s)}class xU extends Fv{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),Pv(d))){const h=qC(d,n.current);h!==void 0&&(e[c]=h),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!KC.has(r)||e.length!==2)return;const[s,i]=e,o=Z_(s),a=Z_(i);if(o!==a)if(Q_(o)&&Q_(a))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else gi[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||hU(e[s]))&&r.push(s);r.length&&wU(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=gi[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=gi[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([c,d])=>{e.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function _U(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=(n==null?void 0:n[t])??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const JC=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function ZC(t){return mC(t)&&"offsetHeight"in t}const t1=30,TU=t=>!isNaN(parseFloat(t));class EU{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const s=Xt.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Xt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=TU(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Cv);const r=this.events[e].add(n);return e==="change"?()=>{r(),Fe.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Xt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>t1)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,t1);return yC(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ko(t,e){return new EU(t,e)}const{schedule:zv}=kC(queueMicrotask,!1),Fn={x:!1,y:!1};function ek(){return Fn.x||Fn.y}function SU(t){return t==="x"||t==="y"?Fn[t]?null:(Fn[t]=!0,()=>{Fn[t]=!1}):Fn.x||Fn.y?null:(Fn.x=Fn.y=!0,()=>{Fn.x=Fn.y=!1})}function tk(t,e){const n=_U(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function n1(t){return!(t.pointerType==="touch"||ek())}function IU(t,e,n={}){const[r,s,i]=tk(t,n),o=a=>{if(!n1(a))return;const{target:c}=a,d=e(c,a);if(typeof d!="function"||!c)return;const h=f=>{n1(f)&&(d(f),c.removeEventListener("pointerleave",h))};c.addEventListener("pointerleave",h,s)};return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const nk=(t,e)=>e?t===e?!0:nk(t,e.parentElement):!1,$v=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,bU=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function CU(t){return bU.has(t.tagName)||t.tabIndex!==-1}const Ou=new WeakSet;function r1(t){return e=>{e.key==="Enter"&&t(e)}}function rp(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const kU=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=r1(()=>{if(Ou.has(n))return;rp(n,"down");const s=r1(()=>{rp(n,"up")}),i=()=>rp(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function s1(t){return $v(t)&&!ek()}function NU(t,e,n={}){const[r,s,i]=tk(t,n),o=a=>{const c=a.currentTarget;if(!s1(a))return;Ou.add(c);const d=e(c,a),h=(g,w)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),Ou.has(c)&&Ou.delete(c),s1(g)&&typeof d=="function"&&d(g,{success:w})},f=g=>{h(g,c===window||c===document||n.useGlobalTarget||nk(c,g.target))},p=g=>{h(g,!1)};window.addEventListener("pointerup",f,s),window.addEventListener("pointercancel",p,s)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),ZC(a)&&(a.addEventListener("focus",d=>kU(d,s)),!CU(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),i}function rk(t){return mC(t)&&"ownerSVGElement"in t}function AU(t){return rk(t)&&t.tagName==="svg"}const Mt=t=>!!(t&&t.getVelocity),PU=[...QC,rt,Ds],RU=t=>PU.find(GC(t)),Wv=b.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function i1(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function jU(...t){return e=>{let n=!1;const r=t.map(s=>{const i=i1(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():i1(t[s],null)}}}}function DU(...t){return b.useCallback(jU(...t),t)}class MU extends b.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=ZC(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function VU({children:t,isPresent:e,anchorX:n,root:r}){const s=b.useId(),i=b.useRef(null),o=b.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=b.useContext(Wv),c=DU(i,t==null?void 0:t.ref);return b.useInsertionEffect(()=>{const{width:d,height:h,top:f,left:p,right:g}=o.current;if(e||!i.current||!d||!h)return;const w=n==="left"?`left: ${p}`:`right: ${g}`;i.current.dataset.motionPopId=s;const T=document.createElement("style");a&&(T.nonce=a);const C=r??document.head;return C.appendChild(T),T.sheet&&T.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${w}px !important;
            top: ${f}px !important;
          }
        `),()=>{C.contains(T)&&C.removeChild(T)}},[e]),l.jsx(MU,{isPresent:e,childRef:i,sizeRef:o,children:b.cloneElement(t,{ref:c})})}const OU=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o,anchorX:a,root:c})=>{const d=Lh(LU),h=b.useId();let f=!0,p=b.useMemo(()=>(f=!1,{id:h,initial:e,isPresent:n,custom:s,onExitComplete:g=>{d.set(g,!0);for(const w of d.values())if(!w)return;r&&r()},register:g=>(d.set(g,!1),()=>d.delete(g))}),[n,d,r]);return i&&f&&(p={...p}),b.useMemo(()=>{d.forEach((g,w)=>d.set(w,!1))},[n]),b.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),o==="popLayout"&&(t=l.jsx(VU,{isPresent:n,anchorX:a,root:c,children:t})),l.jsx(Fh.Provider,{value:p,children:t})};function LU(){return new Map}function sk(t=!0){const e=b.useContext(Fh);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=b.useId();b.useEffect(()=>{if(t)return s(i)},[t]);const o=b.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,o]:[!0]}const du=t=>t.key||"";function o1(t){const e=[];return b.Children.forEach(t,n=>{b.isValidElement(n)&&e.push(n)}),e}const Hv=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:a="left",root:c})=>{const[d,h]=sk(o),f=b.useMemo(()=>o1(t),[t]),p=o&&!d?[]:f.map(du),g=b.useRef(!0),w=b.useRef(f),T=Lh(()=>new Map),[C,_]=b.useState(f),[v,x]=b.useState(f);fC(()=>{g.current=!1,w.current=f;for(let V=0;V<v.length;V++){const S=du(v[V]);p.includes(S)?T.delete(S):T.get(S)!==!0&&T.set(S,!1)}},[v,p.length,p.join("-")]);const R=[];if(f!==C){let V=[...f];for(let S=0;S<v.length;S++){const E=v[S],N=du(E);p.includes(N)||(V.splice(S,0,E),R.push(E))}return i==="wait"&&R.length&&(V=R),x(o1(V)),_(f),null}const{forceRender:D}=b.useContext(_v);return l.jsx(l.Fragment,{children:v.map(V=>{const S=du(V),E=o&&!d?!1:f===v||p.includes(S),N=()=>{if(T.has(S))T.set(S,!0);else return;let I=!0;T.forEach(P=>{P||(I=!1)}),I&&(D==null||D(),x(w.current),o&&(h==null||h()),r&&r())};return l.jsx(OU,{isPresent:E,initial:!g.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:i,root:c,onExitComplete:E?void 0:N,anchorX:a,children:V},S)})})},ik=b.createContext({strict:!1}),a1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Go={};for(const t in a1)Go[t]={isEnabled:e=>a1[t].some(n=>!!e[n])};function FU(t){for(const e in t)Go[e]={...Go[e],...t[e]}}const UU=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function jd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||UU.has(t)}let ok=t=>!jd(t);function BU(t){typeof t=="function"&&(ok=e=>e.startsWith("on")?!jd(e):t(e))}try{BU(require("@emotion/is-prop-valid").default)}catch{}function zU(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(ok(s)||n===!0&&jd(s)||!e&&!jd(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const Uh=b.createContext({});function Bh(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Gl(t){return typeof t=="string"||Array.isArray(t)}const qv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Kv=["initial",...qv];function zh(t){return Bh(t.animate)||Kv.some(e=>Gl(t[e]))}function ak(t){return!!(zh(t)||t.variants)}function $U(t,e){if(zh(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Gl(n)?n:void 0,animate:Gl(r)?r:void 0}}return t.inherit!==!1?e:{}}function WU(t){const{initial:e,animate:n}=$U(t,b.useContext(Uh));return b.useMemo(()=>({initial:e,animate:n}),[l1(e),l1(n)])}function l1(t){return Array.isArray(t)?t.join(" "):t}const Ql={};function HU(t){for(const e in t)Ql[e]=t[e],Av(e)&&(Ql[e].isCSSVariable=!0)}function lk(t,{layout:e,layoutId:n}){return ca.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ql[t]||t==="opacity")}const qU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},KU=la.length;function GU(t,e,n){let r="",s=!0;for(let i=0;i<KU;i++){const o=la[i],a=t[o];if(a===void 0)continue;let c=!0;if(typeof a=="number"?c=a===(o.startsWith("scale")?1:0):c=parseFloat(a)===0,!c||n){const d=JC(a,Bv[o]);if(!c){s=!1;const h=qU[o]||o;r+=`${h}(${d}) `}n&&(e[o]=d)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function Gv(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let o=!1,a=!1;for(const c in e){const d=e[c];if(ca.has(c)){o=!0;continue}else if(Av(c)){s[c]=d;continue}else{const h=JC(d,Bv[c]);c.startsWith("origin")?(a=!0,i[c]=h):r[c]=h}}if(e.transform||(o||n?r.transform=GU(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:c="50%",originY:d="50%",originZ:h=0}=i;r.transformOrigin=`${c} ${d} ${h}`}}const Qv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ck(t,e,n){for(const r in e)!Mt(e[r])&&!lk(r,n)&&(t[r]=e[r])}function QU({transformTemplate:t},e){return b.useMemo(()=>{const n=Qv();return Gv(n,e,t),Object.assign({},n.vars,n.style)},[e])}function YU(t,e){const n=t.style||{},r={};return ck(r,n,t),Object.assign(r,QU(t,e)),r}function XU(t,e){const n={},r=YU(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const JU={offset:"stroke-dashoffset",array:"stroke-dasharray"},ZU={offset:"strokeDashoffset",array:"strokeDasharray"};function eB(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?JU:ZU;t[i.offset]=se.transform(-r);const o=se.transform(e),a=se.transform(n);t[i.array]=`${o} ${a}`}function uk(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...a},c,d,h){if(Gv(t,a,d),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:p}=t;f.transform&&(p.transform=f.transform,delete f.transform),(p.transform||f.transformOrigin)&&(p.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),p.transform&&(p.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete f.transformBox),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),s!==void 0&&eB(f,s,i,o,!1)}const dk=()=>({...Qv(),attrs:{}}),hk=t=>typeof t=="string"&&t.toLowerCase()==="svg";function tB(t,e,n,r){const s=b.useMemo(()=>{const i=dk();return uk(i,e,hk(r),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};ck(i,t.style,t),s.style={...i,...s.style}}return s}const nB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Yv(t){return typeof t!="string"||t.includes("-")?!1:!!(nB.indexOf(t)>-1||/[A-Z]/u.test(t))}function rB(t,e,n,{latestValues:r},s,i=!1){const a=(Yv(t)?tB:XU)(e,r,s,t),c=zU(e,typeof t=="string",i),d=t!==b.Fragment?{...c,...a,ref:n}:{},{children:h}=e,f=b.useMemo(()=>Mt(h)?h.get():h,[h]);return b.createElement(t,{...d,children:f})}function c1(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Xv(t,e,n,r){if(typeof e=="function"){const[s,i]=c1(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=c1(r);e=e(n!==void 0?n:t.custom,s,i)}return e}function Lu(t){return Mt(t)?t.get():t}function sB({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:iB(n,r,s,t),renderState:e()}}function iB(t,e,n,r){const s={},i=r(t,{});for(const p in i)s[p]=Lu(i[p]);let{initial:o,animate:a}=t;const c=zh(t),d=ak(t);e&&d&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const f=h?a:o;if(f&&typeof f!="boolean"&&!Bh(f)){const p=Array.isArray(f)?f:[f];for(let g=0;g<p.length;g++){const w=Xv(t,p[g]);if(w){const{transitionEnd:T,transition:C,..._}=w;for(const v in _){let x=_[v];if(Array.isArray(x)){const R=h?x.length-1:0;x=x[R]}x!==null&&(s[v]=x)}for(const v in T)s[v]=T[v]}}}return s}const fk=t=>(e,n)=>{const r=b.useContext(Uh),s=b.useContext(Fh),i=()=>sB(t,e,r,s);return n?i():Lh(i)};function Jv(t,e,n){var i;const{style:r}=t,s={};for(const o in r)(Mt(r[o])||e.style&&Mt(e.style[o])||lk(o,t)||((i=n==null?void 0:n.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}const oB=fk({scrapeMotionValuesFromProps:Jv,createRenderState:Qv});function pk(t,e,n){const r=Jv(t,e,n);for(const s in t)if(Mt(t[s])||Mt(e[s])){const i=la.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}const aB=fk({scrapeMotionValuesFromProps:pk,createRenderState:dk}),lB=Symbol.for("motionComponentSymbol");function ho(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function cB(t,e,n){return b.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):ho(n)&&(n.current=r))},[e])}const Zv=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),uB="framerAppearId",mk="data-"+Zv(uB),gk=b.createContext({});function dB(t,e,n,r,s){var T,C;const{visualElement:i}=b.useContext(Uh),o=b.useContext(ik),a=b.useContext(Fh),c=b.useContext(Wv).reducedMotion,d=b.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:i,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:c}));const h=d.current,f=b.useContext(gk);h&&!h.projection&&s&&(h.type==="html"||h.type==="svg")&&hB(d.current,n,s,f);const p=b.useRef(!1);b.useInsertionEffect(()=>{h&&p.current&&h.update(n,a)});const g=n[mk],w=b.useRef(!!g&&!((T=window.MotionHandoffIsComplete)!=null&&T.call(window,g))&&((C=window.MotionHasOptimisedAnimation)==null?void 0:C.call(window,g)));return fC(()=>{h&&(p.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),w.current&&h.animationState&&h.animationState.animateChanges())}),b.useEffect(()=>{h&&(!w.current&&h.animationState&&h.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var _;(_=window.MotionHandoffMarkAsComplete)==null||_.call(window,g)}),w.current=!1),h.enteringChildren=void 0)}),h}function hB(t,e,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:c,layoutRoot:d,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:yk(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&ho(a),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:c,layoutRoot:d})}function yk(t){if(t)return t.options.allowProjection!==!1?t.projection:yk(t.parent)}function sp(t,{forwardMotionProps:e=!1}={},n,r){n&&FU(n);const s=Yv(t)?aB:oB;function i(a,c){let d;const h={...b.useContext(Wv),...a,layoutId:fB(a)},{isStatic:f}=h,p=WU(a),g=s(a,f);if(!f&&Tv){pB();const w=mB(h);d=w.MeasureLayout,p.visualElement=dB(t,g,h,r,w.ProjectionNode)}return l.jsxs(Uh.Provider,{value:p,children:[d&&p.visualElement?l.jsx(d,{visualElement:p.visualElement,...h}):null,rB(t,a,cB(g,p.visualElement,c),g,f,e)]})}i.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=b.forwardRef(i);return o[lB]=t,o}function fB({layoutId:t}){const e=b.useContext(_v).id;return e&&t!==void 0?e+"-"+t:t}function pB(t,e){b.useContext(ik).strict}function mB(t){const{drag:e,layout:n}=Go;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function gB(t,e){if(typeof Proxy>"u")return sp;const n=new Map,r=(i,o)=>sp(i,o,t,e),s=(i,o)=>r(i,o);return new Proxy(s,{get:(i,o)=>o==="create"?r:(n.has(o)||n.set(o,sp(o,void 0,t,e)),n.get(o))})}function vk({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function yB({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function vB(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function ip(t){return t===void 0||t===1}function rg({scale:t,scaleX:e,scaleY:n}){return!ip(t)||!ip(e)||!ip(n)}function ri(t){return rg(t)||wk(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function wk(t){return u1(t.x)||u1(t.y)}function u1(t){return t&&t!=="0%"}function Dd(t,e,n){const r=t-n,s=e*r;return n+s}function d1(t,e,n,r,s){return s!==void 0&&(t=Dd(t,s,r)),Dd(t,n,r)+e}function sg(t,e=0,n=1,r,s){t.min=d1(t.min,e,n,r,s),t.max=d1(t.max,e,n,r,s)}function xk(t,{x:e,y:n}){sg(t.x,e.translate,e.scale,e.originPoint),sg(t.y,n.translate,n.scale,n.originPoint)}const h1=.999999999999,f1=1.0000000000001;function wB(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&po(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,xk(t,o)),r&&ri(i.latestValues)&&po(t,i.latestValues))}e.x<f1&&e.x>h1&&(e.x=1),e.y<f1&&e.y>h1&&(e.y=1)}function fo(t,e){t.min=t.min+e,t.max=t.max+e}function p1(t,e,n,r,s=.5){const i=ze(t.min,t.max,s);sg(t,e,n,i,r)}function po(t,e){p1(t.x,e.x,e.scaleX,e.scale,e.originX),p1(t.y,e.y,e.scaleY,e.scale,e.originY)}function _k(t,e){return vk(vB(t.getBoundingClientRect(),e))}function xB(t,e,n){const r=_k(t,n),{scroll:s}=e;return s&&(fo(r.x,s.offset.x),fo(r.y,s.offset.y)),r}const m1=()=>({translate:0,scale:1,origin:0,originPoint:0}),mo=()=>({x:m1(),y:m1()}),g1=()=>({min:0,max:0}),Ze=()=>({x:g1(),y:g1()}),ig={current:null},Tk={current:!1};function _B(){if(Tk.current=!0,!!Tv)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>ig.current=t.matches;t.addEventListener("change",e),e()}else ig.current=!1}const TB=new WeakMap;function EB(t,e,n){for(const r in e){const s=e[r],i=n[r];if(Mt(s))t.addValue(r,s);else if(Mt(i))t.addValue(r,Ko(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,Ko(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const y1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class SB{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Fv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Xt.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Fe.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=zh(n),this.isVariantNode=ak(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in f){const g=f[p];c[p]!==void 0&&Mt(g)&&g.set(c[p])}}mount(e){var n;this.current=e,TB.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),Tk.current||_B(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ig.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),js(this.notifyUpdate),js(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ca.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Fe.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Go){const n=Go[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ze()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<y1.length;r++){const s=y1[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=EB(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Ko(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(pC(r)||gC(r))?r=parseFloat(r):!RU(r)&&Ds.test(n)&&(r=XC(e,n)),this.setBaseTarget(e,Mt(r)?r.get():r)),Mt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=Xv(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Mt(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Cv),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){zv.render(this.render)}}class Ek extends SB{constructor(){super(...arguments),this.KeyframeResolver=xU}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Mt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Sk(t,{style:e,vars:n},r,s){const i=t.style;let o;for(o in e)i[o]=e[o];s==null||s.applyProjectionStyles(i,r);for(o in n)i.setProperty(o,n[o])}function IB(t){return window.getComputedStyle(t)}class bB extends Ek{constructor(){super(...arguments),this.type="html",this.renderInstance=Sk}readValueFromInstance(e,n){var r;if(ca.has(n))return(r=this.projection)!=null&&r.isProjecting?Ym(n):F9(e,n);{const s=IB(e),i=(Av(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return _k(e,n)}build(e,n,r){Gv(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Jv(e,n,r)}}const Ik=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function CB(t,e,n,r){Sk(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(Ik.has(s)?s:Zv(s),e.attrs[s])}class kB extends Ek{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ze}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ca.has(n)){const r=YC(n);return r&&r.default||0}return n=Ik.has(n)?n:Zv(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return pk(e,n,r)}build(e,n,r){uk(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){CB(e,n,r,s)}mount(e){this.isSVGTag=hk(e.tagName),super.mount(e)}}const NB=(t,e)=>Yv(t)?new kB(e):new bB(e,{allowProjection:t!==b.Fragment});function Co(t,e,n){const r=t.getProps();return Xv(r,e,n!==void 0?n:r.custom,t)}const og=t=>Array.isArray(t);function AB(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ko(n))}function PB(t){return og(t)?t[t.length-1]||0:t}function RB(t,e){const n=Co(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=PB(i[o]);AB(t,o,a)}}function jB(t){return!!(Mt(t)&&t.add)}function ag(t,e){const n=t.getValue("willChange");if(jB(n))return n.add(e);if(!n&&zr.WillChange){const r=new zr.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function bk(t){return t.props[mk]}const DB=t=>t!==null;function MB(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(DB),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[i]}const VB={type:"spring",stiffness:500,damping:25,restSpeed:10},OB=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),LB={type:"keyframes",duration:.8},FB={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},UB=(t,{keyframes:e})=>e.length>2?LB:ca.has(t)?t.startsWith("scale")?OB(e[1]):VB:FB;function BB({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:c,elapsed:d,...h}){return!!Object.keys(h).length}const e0=(t,e,n,r={},s,i)=>o=>{const a=Uv(r,t)||{},c=a.delay||r.delay||0;let{elapsed:d=0}=r;d=d-lr(c);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-d,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:i?void 0:s};BB(a)||Object.assign(h,UB(t,h)),h.duration&&(h.duration=lr(h.duration)),h.repeatDelay&&(h.repeatDelay=lr(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let f=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(tg(h),h.delay===0&&(f=!0)),(zr.instantAnimations||zr.skipAnimations)&&(f=!0,tg(h),h.delay=0),h.allowFlatten=!a.type&&!a.ease,f&&!i&&e.get()!==void 0){const p=MB(h.keyframes,a);if(p!==void 0){Fe.update(()=>{h.onUpdate(p),h.onComplete()});return}}return a.isSync?new Lv(h):new lU(h)};function zB({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Ck(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(i=r);const c=[],d=s&&t.animationState&&t.animationState.getState()[s];for(const h in a){const f=t.getValue(h,t.latestValues[h]??null),p=a[h];if(p===void 0||d&&zB(d,h))continue;const g={delay:n,...Uv(i||{},h)},w=f.get();if(w!==void 0&&!f.isAnimating&&!Array.isArray(p)&&p===w&&!g.velocity)continue;let T=!1;if(window.MotionHandoffAnimation){const _=bk(t);if(_){const v=window.MotionHandoffAnimation(_,h,Fe);v!==null&&(g.startTime=v,T=!0)}}ag(t,h),f.start(e0(h,f,p,t.shouldReduceMotion&&KC.has(h)?{type:!1}:g,t,T));const C=f.animation;C&&c.push(C)}return o&&Promise.all(c).then(()=>{Fe.update(()=>{o&&RB(t,o)})}),c}function kk(t,e,n,r=0,s=1){const i=Array.from(t).sort((d,h)=>d.sortNodePosition(h)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(i,o):s===1?i*r:a-i*r}function lg(t,e,n={}){var c;const r=Co(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(Ck(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:p}=s;return $B(t,e,d,h,f,p,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[d,h]=a==="beforeChildren"?[i,o]:[o,i];return d().then(()=>h())}else return Promise.all([i(),o(n.delay)])}function $B(t,e,n=0,r=0,s=0,i=1,o){const a=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),a.push(lg(c,e,{...o,delay:n+(typeof r=="function"?0:r)+kk(t.variantChildren,c,r,s,i)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(a)}function WB(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>lg(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=lg(t,e,n);else{const s=typeof e=="function"?Co(t,e,n.custom):e;r=Promise.all(Ck(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function Nk(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const HB=Kv.length;function Ak(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Ak(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<HB;n++){const r=Kv[n],s=t.props[r];(Gl(s)||s===!1)&&(e[r]=s)}return e}const qB=[...qv].reverse(),KB=qv.length;function GB(t){return e=>Promise.all(e.map(({animation:n,options:r})=>WB(t,n,r)))}function QB(t){let e=GB(t),n=v1(),r=!0;const s=c=>(d,h)=>{var p;const f=Co(t,h,c==="exit"?(p=t.presenceContext)==null?void 0:p.custom:void 0);if(f){const{transition:g,transitionEnd:w,...T}=f;d={...d,...T,...w}}return d};function i(c){e=c(t)}function o(c){const{props:d}=t,h=Ak(t.parent)||{},f=[],p=new Set;let g={},w=1/0;for(let C=0;C<KB;C++){const _=qB[C],v=n[_],x=d[_]!==void 0?d[_]:h[_],R=Gl(x),D=_===c?v.isActive:null;D===!1&&(w=C);let V=x===h[_]&&x!==d[_]&&R;if(V&&r&&t.manuallyAnimateOnMount&&(V=!1),v.protectedKeys={...g},!v.isActive&&D===null||!x&&!v.prevProp||Bh(x)||typeof x=="boolean")continue;const S=YB(v.prevProp,x);let E=S||_===c&&v.isActive&&!V&&R||C>w&&R,N=!1;const I=Array.isArray(x)?x:[x];let P=I.reduce(s(_),{});D===!1&&(P={});const{prevResolvedValues:j={}}=v,A={...j,...P},ee=Z=>{E=!0,p.has(Z)&&(N=!0,p.delete(Z)),v.needsAnimating[Z]=!0;const U=t.getValue(Z);U&&(U.liveStyle=!1)};for(const Z in A){const U=P[Z],W=j[Z];if(g.hasOwnProperty(Z))continue;let q=!1;og(U)&&og(W)?q=!Nk(U,W):q=U!==W,q?U!=null?ee(Z):p.add(Z):U!==void 0&&p.has(Z)?ee(Z):v.protectedKeys[Z]=!0}v.prevProp=x,v.prevResolvedValues=P,v.isActive&&(g={...g,...P}),r&&t.blockInitialAnimation&&(E=!1);const H=V&&S;E&&(!H||N)&&f.push(...I.map(Z=>{const U={type:_};if(typeof Z=="string"&&r&&!H&&t.manuallyAnimateOnMount&&t.parent){const{parent:W}=t,q=Co(W,Z);if(W.enteringChildren&&q){const{delayChildren:ce}=q.transition||{};U.delay=kk(W.enteringChildren,t,ce)}}return{animation:Z,options:U}}))}if(p.size){const C={};if(typeof d.initial!="boolean"){const _=Co(t,Array.isArray(d.initial)?d.initial[0]:d.initial);_&&_.transition&&(C.transition=_.transition)}p.forEach(_=>{const v=t.getBaseTarget(_),x=t.getValue(_);x&&(x.liveStyle=!0),C[_]=v??null}),f.push({animation:C})}let T=!!f.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(T=!1),r=!1,T?e(f):Promise.resolve()}function a(c,d){var f;if(n[c].isActive===d)return Promise.resolve();(f=t.variantChildren)==null||f.forEach(p=>{var g;return(g=p.animationState)==null?void 0:g.setActive(c,d)}),n[c].isActive=d;const h=o(c);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=v1()}}}function YB(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Nk(e,t):!1}function Js(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function v1(){return{animate:Js(!0),whileInView:Js(),whileHover:Js(),whileTap:Js(),whileDrag:Js(),whileFocus:Js(),exit:Js()}}class Ws{constructor(e){this.isMounted=!1,this.node=e}update(){}}class XB extends Ws{constructor(e){super(e),e.animationState||(e.animationState=QB(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Bh(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let JB=0;class ZB extends Ws{constructor(){super(...arguments),this.id=JB++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const e8={animation:{Feature:XB},exit:{Feature:ZB}};function Yl(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function wc(t){return{point:{x:t.pageX,y:t.pageY}}}const t8=t=>e=>$v(e)&&t(e,wc(e));function cl(t,e,n,r){return Yl(t,e,t8(n),r)}const Pk=1e-4,n8=1-Pk,r8=1+Pk,Rk=.01,s8=0-Rk,i8=0+Rk;function $t(t){return t.max-t.min}function o8(t,e,n){return Math.abs(t-e)<=n}function w1(t,e,n,r=.5){t.origin=r,t.originPoint=ze(e.min,e.max,t.origin),t.scale=$t(n)/$t(e),t.translate=ze(n.min,n.max,t.origin)-t.originPoint,(t.scale>=n8&&t.scale<=r8||isNaN(t.scale))&&(t.scale=1),(t.translate>=s8&&t.translate<=i8||isNaN(t.translate))&&(t.translate=0)}function ul(t,e,n,r){w1(t.x,e.x,n.x,r?r.originX:void 0),w1(t.y,e.y,n.y,r?r.originY:void 0)}function x1(t,e,n){t.min=n.min+e.min,t.max=t.min+$t(e)}function a8(t,e,n){x1(t.x,e.x,n.x),x1(t.y,e.y,n.y)}function _1(t,e,n){t.min=e.min-n.min,t.max=t.min+$t(e)}function dl(t,e,n){_1(t.x,e.x,n.x),_1(t.y,e.y,n.y)}function xn(t){return[t("x"),t("y")]}const jk=({current:t})=>t?t.ownerDocument.defaultView:null,T1=(t,e)=>Math.abs(t-e);function l8(t,e){const n=T1(t.x,e.x),r=T1(t.y,e.y);return Math.sqrt(n**2+r**2)}class Dk{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=ap(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,w=l8(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!w)return;const{point:T}=p,{timestamp:C}=yt;this.history.push({...T,timestamp:C});const{onStart:_,onMove:v}=this.handlers;g||(_&&_(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,p)},this.handlePointerMove=(p,g)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=op(g,this.transformPagePoint),Fe.update(this.updatePoint,!0)},this.handlePointerUp=(p,g)=>{this.end();const{onEnd:w,onSessionEnd:T,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=ap(p.type==="pointercancel"?this.lastMoveEventInfo:op(g,this.transformPagePoint),this.history);this.startEvent&&w&&w(p,_),T&&T(p,_)},!$v(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=s||window;const a=wc(e),c=op(a,this.transformPagePoint),{point:d}=c,{timestamp:h}=yt;this.history=[{...d,timestamp:h}];const{onSessionStart:f}=n;f&&f(e,ap(c,this.history)),this.removeListeners=gc(cl(this.contextWindow,"pointermove",this.handlePointerMove),cl(this.contextWindow,"pointerup",this.handlePointerUp),cl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),js(this.updatePoint)}}function op(t,e){return e?{point:e(t.point)}:t}function E1(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ap({point:t},e){return{point:t,delta:E1(t,Mk(e)),offset:E1(t,c8(e)),velocity:u8(e,.1)}}function c8(t){return t[0]}function Mk(t){return t[t.length-1]}function u8(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=Mk(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>lr(e)));)n--;if(!r)return{x:0,y:0};const i=bn(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function d8(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ze(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ze(n,t,r.max):Math.min(t,n)),t}function S1(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function h8(t,{top:e,left:n,bottom:r,right:s}){return{x:S1(t.x,n,s),y:S1(t.y,e,r)}}function I1(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function f8(t,e){return{x:I1(t.x,e.x),y:I1(t.y,e.y)}}function p8(t,e){let n=.5;const r=$t(t),s=$t(e);return s>r?n=Hl(e.min,e.max-r,t.min):r>s&&(n=Hl(t.min,t.max-s,e.min)),Br(0,1,n)}function m8(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const cg=.35;function g8(t=cg){return t===!1?t=0:t===!0&&(t=cg),{x:b1(t,"left","right"),y:b1(t,"top","bottom")}}function b1(t,e,n){return{min:C1(t,e),max:C1(t,n)}}function C1(t,e){return typeof t=="number"?t:t[e]||0}const y8=new WeakMap;class v8{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ze(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(wc(f).point)},o=(f,p)=>{const{drag:g,dragPropagation:w,onDragStart:T}=this.getProps();if(g&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=SU(g),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),xn(_=>{let v=this.getAxisMotionValue(_).get()||0;if(cr.test(v)){const{projection:x}=this.visualElement;if(x&&x.layout){const R=x.layout.layoutBox[_];R&&(v=$t(R)*(parseFloat(v)/100))}}this.originPoint[_]=v}),T&&Fe.postRender(()=>T(f,p)),ag(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},a=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p;const{dragPropagation:g,dragDirectionLock:w,onDirectionLock:T,onDrag:C}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:_}=p;if(w&&this.currentDirection===null){this.currentDirection=w8(_),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",p.point,_),this.updateAxis("y",p.point,_),this.visualElement.render(),C&&C(f,p)},c=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p,this.stop(f,p),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>xn(f=>{var p;return this.getAnimationState(f)==="paused"&&((p=this.getAxisMotionValue(f).animation)==null?void 0:p.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new Dk(e,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:jk(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Fe.postRender(()=>a(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!hu(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=d8(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;e&&ho(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=h8(r.layoutBox,e):this.constraints=!1,this.elastic=g8(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&xn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=m8(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ho(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=xB(r,s.root,this.visualElement.getTransformPagePoint());let o=f8(s.layout.layoutBox,i);if(n){const a=n(yB(o));this.hasMutatedConstraints=!!a,a&&(o=vk(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},d=xn(h=>{if(!hu(h,n,this.currentDirection))return;let f=c&&c[h]||{};o&&(f={min:0,max:0});const p=s?200:1e6,g=s?40:1e7,w={type:"inertia",velocity:r?e[h]:0,bounceStiffness:p,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(h,w)});return Promise.all(d).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return ag(this.visualElement,e),r.start(e0(e,r,0,n,this.visualElement,!1))}stopAnimation(){xn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){xn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){xn(n=>{const{drag:r}=this.getProps();if(!hu(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-ze(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ho(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};xn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const c=a.get();s[o]=p8({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),xn(o=>{if(!hu(o,e,null))return;const a=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];a.set(ze(c,d,s[o]))})}addListeners(){if(!this.visualElement.current)return;y8.set(this.visualElement,this);const e=this.visualElement.current,n=cl(e,"pointerdown",c=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();ho(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Fe.read(r);const o=Yl(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(xn(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=c[h].translate,f.set(f.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=cg,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function hu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function w8(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class x8 extends Ws{constructor(e){super(e),this.removeGroupControls=kn,this.removeListeners=kn,this.controls=new v8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||kn}unmount(){this.removeGroupControls(),this.removeListeners()}}const k1=t=>(e,n)=>{t&&Fe.postRender(()=>t(e,n))};class _8 extends Ws{constructor(){super(...arguments),this.removePointerDownListener=kn}onPointerDown(e){this.session=new Dk(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:jk(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:k1(e),onStart:k1(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&Fe.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=cl(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Fu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function N1(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Pa={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(se.test(t))t=parseFloat(t);else return t;const n=N1(t,e.target.x),r=N1(t,e.target.y);return`${n}% ${r}%`}},T8={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Ds.parse(t);if(s.length>5)return r;const i=Ds.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,c=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=c;const d=ze(a,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=d),typeof s[3+o]=="number"&&(s[3+o]/=d),i(s)}};let lp=!1;class E8 extends b.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;HU(S8),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),lp&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Fu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,lp=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Fe.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),zv.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;lp=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Vk(t){const[e,n]=sk(),r=b.useContext(_v);return l.jsx(E8,{...t,layoutGroup:r,switchLayoutGroup:b.useContext(gk),isPresent:e,safeToRemove:n})}const S8={borderRadius:{...Pa,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Pa,borderTopRightRadius:Pa,borderBottomLeftRadius:Pa,borderBottomRightRadius:Pa,boxShadow:T8};function I8(t,e,n){const r=Mt(t)?t:Ko(t);return r.start(e0("",r,e,n)),r.animation}const b8=(t,e)=>t.depth-e.depth;class C8{constructor(){this.children=[],this.isDirty=!1}add(e){Ev(this.children,e),this.isDirty=!0}remove(e){Sv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(b8),this.isDirty=!1,this.children.forEach(e)}}function k8(t,e){const n=Xt.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(js(r),t(i-e))};return Fe.setup(r,!0),()=>js(r)}const Ok=["TopLeft","TopRight","BottomLeft","BottomRight"],N8=Ok.length,A1=t=>typeof t=="string"?parseFloat(t):t,P1=t=>typeof t=="number"||se.test(t);function A8(t,e,n,r,s,i){s?(t.opacity=ze(0,n.opacity??1,P8(r)),t.opacityExit=ze(e.opacity??1,0,R8(r))):i&&(t.opacity=ze(e.opacity??1,n.opacity??1,r));for(let o=0;o<N8;o++){const a=`border${Ok[o]}Radius`;let c=R1(e,a),d=R1(n,a);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||P1(c)===P1(d)?(t[a]=Math.max(ze(A1(c),A1(d),r),0),(cr.test(d)||cr.test(c))&&(t[a]+="%")):t[a]=d}(e.rotate||n.rotate)&&(t.rotate=ze(e.rotate||0,n.rotate||0,r))}function R1(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const P8=Lk(0,.5,SC),R8=Lk(.5,.95,kn);function Lk(t,e,n){return r=>r<t?0:r>e?1:n(Hl(t,e,r))}function j1(t,e){t.min=e.min,t.max=e.max}function wn(t,e){j1(t.x,e.x),j1(t.y,e.y)}function D1(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function M1(t,e,n,r,s){return t-=e,t=Dd(t,1/n,r),s!==void 0&&(t=Dd(t,1/s,r)),t}function j8(t,e=0,n=1,r=.5,s,i=t,o=t){if(cr.test(e)&&(e=parseFloat(e),e=ze(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=ze(i.min,i.max,r);t===i&&(a-=e),t.min=M1(t.min,e,n,a,s),t.max=M1(t.max,e,n,a,s)}function V1(t,e,[n,r,s],i,o){j8(t,e[n],e[r],e[s],e.scale,i,o)}const D8=["x","scaleX","originX"],M8=["y","scaleY","originY"];function O1(t,e,n,r){V1(t.x,e,D8,n?n.x:void 0,r?r.x:void 0),V1(t.y,e,M8,n?n.y:void 0,r?r.y:void 0)}function L1(t){return t.translate===0&&t.scale===1}function Fk(t){return L1(t.x)&&L1(t.y)}function F1(t,e){return t.min===e.min&&t.max===e.max}function V8(t,e){return F1(t.x,e.x)&&F1(t.y,e.y)}function U1(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Uk(t,e){return U1(t.x,e.x)&&U1(t.y,e.y)}function B1(t){return $t(t.x)/$t(t.y)}function z1(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class O8{constructor(){this.members=[]}add(e){Ev(this.members,e),e.scheduleRender()}remove(e){if(Sv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function L8(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:f,rotateY:p,skewX:g,skewY:w}=n;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),f&&(r+=`rotateX(${f}deg) `),p&&(r+=`rotateY(${p}deg) `),g&&(r+=`skewX(${g}deg) `),w&&(r+=`skewY(${w}deg) `)}const a=t.x.scale*e.x,c=t.y.scale*e.y;return(a!==1||c!==1)&&(r+=`scale(${a}, ${c})`),r||"none"}const cp=["","X","Y","Z"],F8=1e3;let U8=0;function up(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Bk(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=bk(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Fe,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Bk(r)}function zk({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=U8++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach($8),this.nodes.forEach(K8),this.nodes.forEach(G8),this.nodes.forEach(W8)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new C8)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Cv),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=rk(o)&&!AU(o),this.instance=o;const{layoutId:a,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||a)&&(this.isLayoutDirty=!0),t){let h,f=0;const p=()=>this.root.updateBlockedByResize=!1;Fe.read(()=>{f=window.innerWidth}),t(o,()=>{const g=window.innerWidth;g!==f&&(f=g,this.root.updateBlockedByResize=!0,h&&h(),h=k8(p,250),Fu.hasAnimatedSinceResize&&(Fu.hasAnimatedSinceResize=!1,this.nodes.forEach(H1)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&d&&(a||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeLayoutChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||d.getDefaultTransition()||Z8,{onLayoutAnimationStart:T,onLayoutAnimationComplete:C}=d.getProps(),_=!this.targetLayout||!Uk(this.targetLayout,g),v=!f&&p;if(this.options.layoutRoot||this.resumeFrom||v||f&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const x={...Uv(w,"layout"),onPlay:T,onComplete:C};(d.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x),this.setAnimationOrigin(h,v)}else f||H1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),js(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Q8),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Bk(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($1);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(W1);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(q8),this.nodes.forEach(B8),this.nodes.forEach(z8)):this.nodes.forEach(W1),this.clearAllSnapshots();const a=Xt.now();yt.delta=Br(0,1e3/60,a-yt.timestamp),yt.timestamp=a,yt.isProcessing=!0,Jf.update.process(yt),Jf.preRender.process(yt),Jf.render.process(yt),yt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,zv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(H8),this.sharedNodes.forEach(Y8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Fe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Fe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!$t(this.snapshot.measuredBox.x)&&!$t(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ze(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!Fk(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&this.instance&&(a||ri(this.latestValues)||h)&&(s(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),e7(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:o}=this.options;if(!o)return Ze();const a=o.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(t7))){const{scroll:h}=this.root;h&&(fo(a.x,h.offset.x),fo(a.y,h.offset.y))}return a}removeElementScroll(o){var c;const a=Ze();if(wn(a,o),(c=this.scroll)!=null&&c.wasRoot)return a;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:f,options:p}=h;h!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&wn(a,o),fo(a.x,f.offset.x),fo(a.y,f.offset.y))}return a}applyTransform(o,a=!1){const c=Ze();wn(c,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&po(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),ri(h.latestValues)&&po(c,h.latestValues)}return ri(this.latestValues)&&po(c,this.latestValues),c}removeTransform(o){const a=Ze();wn(a,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!ri(d.latestValues))continue;rg(d.latestValues)&&d.updateSnapshot();const h=Ze(),f=d.measurePageBox();wn(h,f),O1(a,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return ri(this.latestValues)&&O1(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==yt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var p;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==a;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=yt.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ze(),this.relativeTargetOrigin=Ze(),dl(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),wn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ze(),this.targetWithTransforms=Ze()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),a8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):wn(this.target,this.layout.layoutBox),xk(this.target,this.targetDelta)):wn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ze(),this.relativeTargetOrigin=Ze(),dl(this.relativeTargetOrigin,this.target,g.target),wn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||rg(this.parent.latestValues)||wk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var w;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty)&&(c=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===yt.timestamp&&(c=!1),c)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;wn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;wB(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Ze());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(D1(this.prevProjectionDelta.x,this.projectionDelta.x),D1(this.prevProjectionDelta.y,this.projectionDelta.y)),ul(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!z1(this.projectionDelta.x,this.prevProjectionDelta.x)||!z1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=mo(),this.projectionDelta=mo(),this.projectionDeltaWithTransform=mo()}setAnimationOrigin(o,a=!1){const c=this.snapshot,d=c?c.latestValues:{},h={...this.latestValues},f=mo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Ze(),g=c?c.source:void 0,w=this.layout?this.layout.source:void 0,T=g!==w,C=this.getStack(),_=!C||C.members.length<=1,v=!!(T&&!_&&this.options.crossfade===!0&&!this.path.some(J8));this.animationProgress=0;let x;this.mixTargetDelta=R=>{const D=R/1e3;q1(f.x,o.x,D),q1(f.y,o.y,D),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(dl(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),X8(this.relativeTarget,this.relativeTargetOrigin,p,D),x&&V8(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=Ze()),wn(x,this.relativeTarget)),T&&(this.animationValues=h,A8(h,d,this.latestValues,D,v,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,c,d;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(d=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||d.stop(),this.pendingAnimation&&(js(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Fe.update(()=>{Fu.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ko(0)),this.currentAnimation=I8(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),o.onUpdate&&o.onUpdate(h)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(F8),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:d,latestValues:h}=o;if(!(!a||!c||!d)){if(this!==o&&this.layout&&d&&$k(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||Ze();const f=$t(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+f;const p=$t(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+p}wn(a,c),po(a,h),ul(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new O8),this.sharedNodes.get(o).add(a);const d=a.options.initialPromotionConfig;a.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(a=!0),!a)return;const d={};c.z&&up("z",o,d,this.animationValues);for(let h=0;h<cp.length;h++)up(`rotate${cp[h]}`,o,d,this.animationValues),up(`skew${cp[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Lu(a==null?void 0:a.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Lu(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!ri(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let f=L8(this.projectionDeltaWithTransform,this.treeScale,h);c&&(f=c(h,f)),o.transform=f;const{x:p,y:g}=this.projectionDelta;o.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,d.animationValues?o.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const w in Ql){if(h[w]===void 0)continue;const{correct:T,applyTo:C,isCSSVariable:_}=Ql[w],v=f==="none"?h[w]:T(h[w],d);if(C){const x=C.length;for(let R=0;R<x;R++)o[C[R]]=v}else _?this.options.visualElement.renderState.vars[w]=v:o[w]=v}this.options.layoutId&&(o.pointerEvents=d===this?Lu(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach($1),this.root.sharedNodes.clear()}}}function B8(t){t.updateLayout()}function z8(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=e.source!==t.layout.source;i==="size"?xn(f=>{const p=o?e.measuredBox[f]:e.layoutBox[f],g=$t(p);p.min=r[f].min,p.max=p.min+g}):$k(i,e.layoutBox,r)&&xn(f=>{const p=o?e.measuredBox[f]:e.layoutBox[f],g=$t(r[f]);p.max=p.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+g)});const a=mo();ul(a,r,e.layoutBox);const c=mo();o?ul(c,t.applyTransform(s,!0),e.measuredBox):ul(c,r,e.layoutBox);const d=!Fk(a);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:g}=f;if(p&&g){const w=Ze();dl(w,e.layoutBox,p.layoutBox);const T=Ze();dl(T,r,g.layoutBox),Uk(w,T)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=T,t.relativeTargetOrigin=w,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:a,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function $8(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function W8(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function H8(t){t.clearSnapshot()}function $1(t){t.clearMeasurements()}function W1(t){t.isLayoutDirty=!1}function q8(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function H1(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function K8(t){t.resolveTargetDelta()}function G8(t){t.calcProjection()}function Q8(t){t.resetSkewAndRotation()}function Y8(t){t.removeLeadSnapshot()}function q1(t,e,n){t.translate=ze(e.translate,0,n),t.scale=ze(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function K1(t,e,n,r){t.min=ze(e.min,n.min,r),t.max=ze(e.max,n.max,r)}function X8(t,e,n,r){K1(t.x,e.x,n.x,r),K1(t.y,e.y,n.y,r)}function J8(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Z8={duration:.45,ease:[.4,0,.1,1]},G1=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Q1=G1("applewebkit/")&&!G1("chrome/")?Math.round:kn;function Y1(t){t.min=Q1(t.min),t.max=Q1(t.max)}function e7(t){Y1(t.x),Y1(t.y)}function $k(t,e,n){return t==="position"||t==="preserve-aspect"&&!o8(B1(e),B1(n),.2)}function t7(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const n7=zk({attachResizeListener:(t,e)=>Yl(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),dp={current:void 0},Wk=zk({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!dp.current){const t=new n7({});t.mount(window),t.setOptions({layoutScroll:!0}),dp.current=t}return dp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),r7={pan:{Feature:_8},drag:{Feature:x8,ProjectionNode:Wk,MeasureLayout:Vk}};function X1(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&Fe.postRender(()=>i(e,wc(e)))}class s7 extends Ws{mount(){const{current:e}=this.node;e&&(this.unmount=IU(e,(n,r)=>(X1(this.node,r,"Start"),s=>X1(this.node,s,"End"))))}unmount(){}}class i7 extends Ws{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=gc(Yl(this.node.current,"focus",()=>this.onFocus()),Yl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function J1(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&Fe.postRender(()=>i(e,wc(e)))}class o7 extends Ws{mount(){const{current:e}=this.node;e&&(this.unmount=NU(e,(n,r)=>(J1(this.node,r,"Start"),(s,{success:i})=>J1(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ug=new WeakMap,hp=new WeakMap,a7=t=>{const e=ug.get(t.target);e&&e(t)},l7=t=>{t.forEach(a7)};function c7({root:t,...e}){const n=t||document;hp.has(n)||hp.set(n,{});const r=hp.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(l7,{root:t,...e})),r[s]}function u7(t,e,n){const r=c7(e);return ug.set(t,n),r.observe(t),()=>{ug.delete(t),r.unobserve(t)}}const d7={some:0,all:1};class h7 extends Ws{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:d7[s]},a=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),p=d?h:f;p&&p(c)};return u7(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(f7(e,n))&&this.startObserver()}unmount(){}}function f7({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const p7={inView:{Feature:h7},tap:{Feature:o7},focus:{Feature:i7},hover:{Feature:s7}},m7={layout:{ProjectionNode:Wk,MeasureLayout:Vk}},g7={...e8,...p7,...r7,...m7},Nn=gB(g7,NB);class y7{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,n){this.componentControls.forEach(r=>{r.start(e.nativeEvent||e,n)})}cancel(){this.componentControls.forEach(e=>{e.cancel()})}stop(){this.componentControls.forEach(e=>{e.stop()})}}const v7=()=>new y7;function w7(){return Lh(v7)}const $h=t=>{if(!t)return"";let e;t&&typeof t=="object"&&"seconds"in t?e=new Date(t.seconds*1e3):t.toDate&&typeof t.toDate=="function"?e=t.toDate():e=new Date(t);const n=new Date;if(isNaN(e.getTime()))return"";const r=(o,a)=>o.getFullYear()===a.getFullYear()&&o.getMonth()===a.getMonth()&&o.getDate()===a.getDate();if(r(e,n))return e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0});const s=new Date(n);if(s.setDate(n.getDate()-1),r(e,s))return"Yesterday";const i=new Date(n);return i.setDate(n.getDate()-7),e>i?e.toLocaleDateString([],{weekday:"long"}):e.toLocaleDateString()},Z1=(t,e)=>t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate(),x7=t=>{if(!t)return"Today";let e;if(t&&typeof t=="object"&&"seconds"in t?e=new Date(t.seconds*1e3):t.toDate&&typeof t.toDate=="function"?e=t.toDate():e=new Date(t),isNaN(e.getTime()))return"Today";const n=new Date;if(Z1(e,n))return"Today";const r=new Date;return r.setDate(n.getDate()-1),Z1(e,r)?"Yesterday":e.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})},eT=t=>{if(!t)return new Date().toISOString().split("T")[0];const e=new Date(t);return isNaN(e.getTime())?new Date().toISOString().split("T")[0]:e.toISOString().split("T")[0]},_7=({conversation:t})=>{const e=Ue(),{setSelectedChat:n,currentUser:r}=Te(),s=t.lastMessage==="This message was deleted",i=()=>{const a=window.location.hash.replace("#",""),c=`/chat/${t.id}`;a!==c&&(n(t),e(c))},o=()=>{if(s)return l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(PS,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),l.jsx("p",{className:"truncate italic text-gray-400",children:t.lastMessage})]});const a=t.lastMessageType==="IMAGE"?"Photo":t.lastMessage;return l.jsx("p",{className:"truncate",children:a})};return l.jsxs(Nn.div,{onClick:i,className:"flex items-center p-3 hover:bg-[#202c33] cursor-pointer border-b border-gray-700",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},whileHover:{scale:1.01,backgroundColor:"rgba(32, 44, 51, 0.8)"},whileTap:{scale:.98},transition:{duration:.2},children:[l.jsx("img",{src:t.profileImage,alt:t.name,className:"h-12 w-12 rounded-full mr-4"}),l.jsxs("div",{className:"flex-grow overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h3",{className:"font-semibold text-white",children:t.name}),l.jsx("p",{className:`text-xs ${t.unreadCount>0?"text-primary":"text-gray-400"}`,children:$h(t.lastMessageAt)})]}),l.jsxs("div",{className:"flex justify-between items-start text-sm text-gray-400",children:[l.jsxs("div",{className:"flex items-center space-x-1 truncate w-4/5",children:[r&&t.lastMessageSentById===r.id&&!s&&l.jsx(pi,{className:"w-4 h-4 text-blue-400"}),o()]}),t.unreadCount>0&&l.jsx("span",{className:"bg-primary text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:t.unreadCount})]})]})]})},T7=b.memo(_7);var _n=(t=>(t.All="All",t.Chat="Chat",t.Group="Group",t.Notifications="Notifications",t))(_n||{});const E7=({filter:t,searchTerm:e})=>{const{conversations:n,loading:r,error:s,isLockedViewActive:i}=Te();if(r)return l.jsx("div",{className:"flex-grow flex items-center justify-center",children:l.jsx("p",{children:"Loading chats..."})});if(s)return l.jsx("div",{className:"flex-grow flex items-center justify-center text-red-500",children:l.jsx("p",{children:s})});const o=Vd.useMemo(()=>n.filter(a=>i?a.isLocked:!a.isLocked).filter(a=>t===_n.All?!0:t===_n.Chat?a.conversationType==="INDIVIDUAL":t===_n.Group?a.conversationType==="GROUP":!1).filter(a=>{var c;return(c=a.name)==null?void 0:c.toLowerCase().includes(e.toLowerCase())}),[n,i,t,e]);return l.jsxs("div",{className:"flex-grow overflow-y-auto",children:[o.length===0&&!r&&l.jsx("p",{className:"text-center text-gray-400 mt-10",children:i?"No locked chats found.":"No chats found."}),o.map(a=>l.jsx(T7,{conversation:a},a.id))]})},Hk=[{id:"user1",name:"John Doe",email:"john@example.com",avatar:"https://ui-avatars.com/api/?name=John+Doe&background=random",about:"Hey there! I am using WhatsApp.",isOnline:!0,lastSeen:new Date().toISOString(),phone:"+1234567890",isPrivate:!1,followers:["user2","user3"],following:["user2","user4"],followerCount:2,followingCount:2,isFollowedByCurrentUser:!1,isFollowingCurrentUser:!1},{id:"user2",name:"Jane Smith",email:"jane@example.com",avatar:"https://ui-avatars.com/api/?name=Jane+Smith&background=random",about:"Busy",isOnline:!1,lastSeen:new Date(Date.now()-36e5).toISOString(),phone:"+0987654321",isPrivate:!0,followers:["user1"],following:["user1"],followerCount:1,followingCount:1,isFollowedByCurrentUser:!0,isFollowingCurrentUser:!0},{id:"user3",name:"Alice Johnson",email:"alice@example.com",avatar:"https://ui-avatars.com/api/?name=Alice+Johnson&background=random",about:"At work",isOnline:!0,lastSeen:new Date().toISOString(),phone:"+1122334455",isPrivate:!1,followers:["user1"],following:[],followerCount:1,followingCount:0,isFollowedByCurrentUser:!0,isFollowingCurrentUser:!1},{id:"user4",name:"Bob Builder",email:"bob@example.com",avatar:"https://ui-avatars.com/api/?name=Bob+Builder&background=random",about:"Can we fix it?",isOnline:!0,lastSeen:new Date().toISOString(),phone:"+1231231234",isPrivate:!1,followers:["user1"],following:[],followerCount:1,followingCount:0,isFollowedByCurrentUser:!0,isFollowingCurrentUser:!1},{id:"user5",name:"Charlie Chef",email:"charlie@example.com",avatar:"https://ui-avatars.com/api/?name=Charlie+Chef&background=random",about:"Cooking something good",isOnline:!1,lastSeen:new Date(Date.now()-72e5).toISOString(),phone:"+3213214321",isPrivate:!0,followers:[],following:[],followerCount:0,followingCount:0,isFollowedByCurrentUser:!1,isFollowingCurrentUser:!1}];new Date(Date.now()-1e7).toISOString(),new Date(Date.now()-9e6).toISOString(),new Date(Date.now()-8e6).toISOString(),new Date(Date.now()-7e6).toISOString(),new Date().toISOString(),new Date(Date.now()-864e5).toISOString(),new Date(Date.now()-36e5).toISOString(),new Date(Date.now()-35e5).toISOString(),new Date(Date.now()-34e5).toISOString(),new Date(Date.now()-1e7).toISOString(),new Date(Date.now()-99e5).toISOString(),new Date(Date.now()-98e5).toISOString(),new Date(Date.now()-97e5).toISOString();new Date().toISOString(),new Date(Date.now()+864e5).toISOString();new Date(Date.now()-36e5).toISOString();new Date(Date.now()-36e5).toISOString(),new Date(Date.now()-72e5).toISOString(),new Date(Date.now()-864e5).toISOString();const S7=()=>{const t=Ue(),{currentUser:e}=Te(),[n,r]=b.useState([]),[s,i]=b.useState(!0),[o,a]=b.useState(new Set);b.useEffect(()=>{(async()=>{if(e){i(!0);try{const C=(await Dh(e.id)).map(_=>{const v=Hk.find(x=>x.id===_.fromUserId);return{..._,fromUser:v}});r(C)}catch(T){console.error("Failed to load notifications:",T)}finally{i(!1)}}})()},[e]);const c=async(w,T)=>{w.stopPropagation(),console.log("Mock accept follow",T.id)},d=async(w,T)=>{w.stopPropagation(),console.log("Mock decline follow",T.id)},h=async(w,T)=>{w.stopPropagation(),console.log("Mock follow back",T.id)},f=w=>{(w.type==="follow_success"||w.type==="follow_request_accepted")&&w.fromUserId&&t(`/contact/${w.fromUserId}`)},p=w=>{if(!w)return"";const T=new Date(w),_=Math.floor((new Date().getTime()-T.getTime())/1e3);return _<60?"Just now":_<3600?`${Math.floor(_/60)}m`:_<86400?`${Math.floor(_/3600)}h`:_<604800?`${Math.floor(_/86400)}d`:`${Math.floor(_/604800)}w`},g=w=>{var T;switch((T=w.fromUser)!=null&&T.name,w.type){case"follow_request":return{text:"requested to follow you",action:"follow_request",icon:""};case"follow_success":return{text:"started following you",action:"follow_back",icon:""};case"follow_request_accepted":return{text:"accepted your follow request",action:"none",icon:""};default:return{text:"New notification",action:"none",icon:""}}};return s?l.jsx("div",{className:"flex items-center justify-center p-20",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):n.length===0?l.jsxs("div",{className:"flex flex-col items-center justify-center p-20 text-center",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"No notifications"}),l.jsx("p",{className:"text-sm text-gray-400 max-w-xs",children:"You don't have any notifications yet"})]}):l.jsx("div",{className:"overflow-y-auto",children:n.map(w=>{var _,v;const T=g(w),C=o.has(w.id);return l.jsxs("div",{onClick:()=>f(w),className:`flex items-start gap-3 p-3 hover:bg-[#202c33] cursor-pointer transition-all border-b border-gray-800 ${w.read?"":"bg-[#1a2730]"}`,children:[l.jsxs("div",{className:"flex-shrink-0 relative",children:[(_=w.fromUser)!=null&&_.avatar?l.jsx("img",{src:w.fromUser.avatar,alt:w.fromUser.name,className:"w-12 h-12 rounded-full object-cover"}):l.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700 flex items-center justify-center text-2xl",children:T.icon}),!w.read&&l.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-primary rounded-full border-2 border-[#111b21]"})]}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("p",{className:"text-sm text-white leading-relaxed",children:[l.jsx("span",{className:"font-semibold",children:((v=w.fromUser)==null?void 0:v.name)||"Someone"})," ",l.jsx("span",{className:"text-gray-300",children:T.text})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:p(w.createdAt)}),T.action==="follow_request"&&l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsx("button",{onClick:x=>c(x,w),disabled:C,className:"flex-1 bg-primary hover:bg-primary-hover text-white text-xs font-semibold py-1.5 px-3 rounded-lg transition-colors disabled:opacity-50",children:C?"Processing...":"Confirm"}),l.jsx("button",{onClick:x=>d(x,w),disabled:C,className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white text-xs font-semibold py-1.5 px-3 rounded-lg transition-colors disabled:opacity-50",children:"Delete"})]}),T.action==="follow_back"&&w.fromUser&&l.jsx("button",{onClick:x=>h(x,w),disabled:C,className:"mt-2 bg-primary hover:bg-primary-hover text-white text-xs font-semibold py-1.5 px-4 rounded-lg transition-colors disabled:opacity-50",children:C?"Processing...":w.fromUser.isPrivate?"Request":"Follow Back"})]})]},w.id)})})},qk=()=>{const[t,e]=b.useState(_n.All),[n,r]=b.useState(""),s=Zo(),i=[_n.All,_n.Chat,_n.Group,_n.Notifications];return l.jsxs("div",{className:"flex flex-col h-full bg-[#111b21] relative",children:[!s&&l.jsx(hC,{}),l.jsx("div",{className:"p-2",children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(Si,{className:"h-5 w-5 text-gray-400"})}),l.jsx("input",{type:"text",placeholder:t===_n.Notifications?"Search notifications":"Search or start new chat",className:"form-control form-control-sm w-full bg-[#202c33] border-transparent rounded-lg pl-10 pr-4 py-2 text-sm text-white focus:bg-[#2a3942] focus:outline-none focus:ring-1 focus:ring-emerald-500",value:n,onChange:o=>r(o.target.value)})]})}),l.jsx("div",{className:"px-3 py-2 flex space-x-2 overflow-x-auto",children:i.map(o=>l.jsx("button",{onClick:()=>e(o),className:`btn btn-sm rounded-full transition-colors border-0 whitespace-nowrap ${t===o?"bg-primary text-white":"bg-[#202c33] text-gray-300 hover:bg-[#2a3942]"}`,children:o},o))}),t===_n.Notifications?l.jsx(S7,{}):l.jsx(E7,{filter:t,searchTerm:n}),t!==_n.Notifications&&l.jsx(hs,{to:"/new-chat",className:"btn absolute bottom-24 right-6 lg:bottom-6 bg-primary hover:bg-primary-hover text-white rounded-2xl p-4 shadow-lg",children:l.jsx(VS,{className:"h-6 w-6"})})]})},I7=t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{typeof r.result=="string"?e(r.result):n(new Error("Failed to convert file to base64"))},r.onerror=()=>{n(new Error("Error reading file"))},r.readAsDataURL(t)}),b7=t=>t.type.startsWith("video/")?"video":t.type.startsWith("audio/")?"audio":"image",C7=(t,e=.7)=>{const n=e*1024*1024;return t.size<=n},tT=t=>{if(t===0)return"0 Bytes";const e=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,r)).toFixed(2))+" "+n[r]},k7=t=>Math.ceil(t.size*1.33),Kk=()=>{const{currentUser:t,statuses:e,openStatusViewer:n,users:r}=Te(),{showToast:s}=Vh();Ue();const i=b.useRef(null),[o,a]=b.useState(!1);if(console.log("StatusScreen rendering. Current User:",t==null?void 0:t.id,"Statuses:",e.length),!t)return l.jsx("div",{className:"flex items-center justify-center h-full bg-[#111b21]",children:l.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"})});const c=e.find(p=>p.userId===t.id),d=e.filter(p=>p.userId!==t.id),h=()=>{var p,g;c&&c.updates.length>0?(p=i.current)==null||p.click():(g=i.current)==null||g.click()},f=async p=>{var w;const g=(w=p.target.files)==null?void 0:w[0];if(g){if(!C7(g,.7)){const T=tT(g.size),C=tT(k7(g));s(`File too large (${T}). After base64 encoding (~${C}), it exceeds Firestore's 1MB limit. Please select a file under 700KB.`,"error");return}a(!0);try{const T=b7(g);s("Converting file...","info");const C=await I7(g),_={id:Date.now().toString(),type:T,url:C,timestamp:new Date().toISOString(),caption:"",reactions:[]};s("Uploading status...","info"),await bF(t.id,_),s("Status uploaded successfully!","success"),window.location.reload()}catch(T){console.error("Error uploading status:",T),s("Failed to upload status. Please try again.","error")}finally{a(!1),i.current&&(i.current.value="")}}};return l.jsx("div",{className:"flex flex-col h-full bg-[#111b21] overflow-y-auto",children:l.jsxs("div",{className:"p-4",children:[l.jsx("div",{className:"flex justify-between items-center mb-4",children:l.jsx("h2",{className:"text-xl font-bold text-white",children:"Updates"})}),l.jsx("h3",{className:"text-md font-semibold text-gray-300 mb-2",children:"Status"}),l.jsxs("div",{className:"flex items-start space-x-4 overflow-x-auto pb-4 -mx-4 px-4",children:[l.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center space-y-2 cursor-pointer w-20 text-center relative",onClick:h,children:[l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:t.avatar,alt:"My Status",className:`h-14 w-14 rounded-full ${o?"opacity-50":""}`}),l.jsx("div",{className:"absolute bottom-0 right-0 bg-primary rounded-full p-1 border-2 border-[#111b21]",children:o?l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):l.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",className:"text-white",children:l.jsx("path",{fill:"currentColor",d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})})})]}),l.jsx("div",{children:l.jsx("p",{className:"text-sm text-white truncate",children:"My status"})}),l.jsx("input",{type:"file",ref:i,className:"hidden",accept:"image/*,video/*,audio/*",onChange:f})]}),d.map(p=>{var C;const g=r.find(_=>_.id===p.userId);if(!g)return null;const w=p.updates[p.updates.length-1],T=(C=w==null?void 0:w.reactions)==null?void 0:C[0];return l.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center space-y-2 cursor-pointer w-20 text-center",onClick:()=>n(g.id),children:[l.jsxs("div",{className:"relative p-0.5 border-2 border-primary rounded-full",children:[l.jsx("img",{src:g.avatar,alt:g.name,className:"h-[52px] w-[52px] rounded-full"}),T&&l.jsx("div",{className:"absolute -bottom-2 -right-2 bg-[#2a3942] rounded-full p-1 border-2 border-[#111b21]",children:l.jsx("span",{className:"text-sm",children:T})})]}),l.jsx("div",{children:l.jsx("p",{className:"text-sm text-white truncate",children:g.name})})]},p.id)})]})]})})},N7=({call:t})=>{const{users:e}=Te(),n=e.find(i=>i.id===t.contactId),r=()=>t.callType==="VIDEO"?l.jsx(hy,{className:"h-5 w-5 text-gray-400"}):l.jsx(ur,{className:"h-5 w-5 text-gray-400"}),s=()=>t.type==="incoming"?l.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",className:"text-emerald-500",children:l.jsx("path",{fill:"currentColor",d:"M20 5.41 18.59 4 7 15.59V9H5v10h10v-2H8.41z"})}):t.type==="outgoing"?l.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",className:"text-emerald-500",children:l.jsx("path",{fill:"currentColor",d:"m20 9-8-8-1.41 1.41L16.17 8H4v2h12.17l-5.58 5.59L12 17l8-8z"})}):l.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",className:"text-red-500",children:l.jsx("path",{fill:"currentColor",d:"M20 5.41 18.59 4 7 15.59V9H5v10h10v-2H8.41z"})});return l.jsxs("div",{className:"flex items-center p-3 hover:bg-[#202c33] cursor-pointer",children:[l.jsx("img",{src:n==null?void 0:n.avatar,alt:n==null?void 0:n.name,className:"h-12 w-12 rounded-full mr-4"}),l.jsxs("div",{className:"flex-grow",children:[l.jsx("h3",{className:`font-semibold ${t.type==="missed"?"text-red-500":"text-white"}`,children:n==null?void 0:n.name}),l.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[s(),l.jsx("span",{className:"ml-2",children:$h(t.startedAt)})]})]}),r()]})},Gk=()=>{const{calls:t}=Te();return l.jsxs("div",{className:"flex flex-col h-full bg-[#111b21]",children:[l.jsxs("div",{className:"flex-grow overflow-y-auto",children:[l.jsx("div",{className:"p-3",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"p-3 bg-emerald-600 rounded-full",children:l.jsx(ur,{className:"h-6 w-6 text-white"})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("h3",{className:"font-semibold text-white",children:"Create call link"}),l.jsx("p",{className:"text-sm text-gray-400",children:"Share a link for your WhatsApp call"})]})]})}),l.jsx("h2",{className:"p-4 text-gray-400 font-semibold text-sm",children:"Recent"}),t.map(e=>l.jsx(N7,{call:e},e.id))]}),l.jsx("button",{className:"absolute bottom-24 right-6 lg:bottom-6 bg-emerald-500 hover:bg-emerald-600 text-white rounded-full p-4 shadow-lg",children:l.jsx(ur,{className:"h-6 w-6"})})]})},A7=()=>{const t="text-primary",e="text-gray-400",n="flex flex-col items-center justify-center w-full h-full pt-1 relative";return l.jsxs("div",{className:"flex-shrink-0 bg-[#202c33] flex justify-around items-center h-16 border-t border-gray-700",children:[l.jsxs(To,{to:"/",end:!0,className:({isActive:r})=>`${n} ${r?t:e}`,children:[l.jsx(nh,{className:"h-6 w-6"}),l.jsx("span",{className:"text-xs mt-1",children:"Chats"})]}),l.jsxs(To,{to:"/status",className:({isActive:r})=>`${n} ${r?t:e}`,children:[l.jsx(jS,{className:"h-6 w-6"}),l.jsx("span",{className:"text-xs mt-1",children:"Status"})]}),l.jsxs(To,{to:"/calls",className:({isActive:r})=>`${n} ${r?t:e}`,children:[l.jsx(ur,{className:"h-6 w-6"}),l.jsx("span",{className:"text-xs mt-1",children:"Calls"})]})]})},nT=()=>{const t=hr(),e=Zo(),n=()=>{switch(t.pathname){case"/status":return l.jsx(Kk,{});case"/calls":return l.jsx(Gk,{});case"/":default:return l.jsx(qk,{})}},r=e||t.pathname!=="/";return l.jsxs("div",{className:"flex flex-col w-full lg:w-[35%] lg:max-w-[450px] h-full bg-[#111b21] border-r border-gray-700",children:[r&&l.jsx(hC,{}),l.jsx("div",{className:"flex-grow overflow-y-auto",children:n()}),!e&&l.jsx(A7,{})]})},Qk=()=>l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center bg-[#222e35] p-10 border-l border-gray-700",children:[l.jsx("img",{src:"https://static.whatsapp.net/rsrc.php/v3/y7/r/_DSx_SM7ITE.png",alt:"WhatsApp Web",className:"w-64 h-64"}),l.jsx("h1",{className:"text-3xl font-light text-gray-300 mt-4",children:"WhatsApp Web"}),l.jsxs("p",{className:"text-gray-400 mt-2",children:["Send and receive messages without keeping your phone online.",l.jsx("br",{}),"Use WhatsApp on up to 4 linked devices and 1 phone at the same time."]}),l.jsx("div",{className:"mt-8 border-t border-gray-600 w-full"}),l.jsx("p",{className:"text-gray-500 mt-4 text-sm",children:"End-to-end encrypted"})]}),P7="modulepreload",R7=function(t){return"/"+t},rT={},j7=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=R7(c),c in rT)return;rT[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":P7,d||(f.as="script"),f.crossOrigin="",f.href=c,a&&f.setAttribute("nonce",a),document.head.appendChild(f),d)return new Promise((p,g)=>{f.addEventListener("load",p),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},dg=({isOpen:t,onClose:e,onConfirm:n,title:r,children:s,confirmText:i="Confirm",isDanger:o=!1})=>t?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-[#2a3942] rounded-lg shadow-xl w-full max-w-md mx-4 text-white",children:[l.jsx("div",{className:"p-6 border-b border-gray-700",children:l.jsx("h2",{className:"text-xl font-semibold",children:r})}),l.jsx("div",{className:"p-6",children:s}),l.jsxs("div",{className:"px-6 py-4 bg-[#202c33] rounded-b-lg flex justify-end space-x-4",children:[l.jsx("button",{onClick:e,className:"px-4 py-2 rounded-md text-white bg-gray-600 hover:bg-gray-500",children:"Cancel"}),l.jsx("button",{onClick:n,className:`px-4 py-2 rounded-md text-white ${o?"bg-red-600 hover:bg-red-500":"bg-primary hover:bg-primary-hover"}`,children:i})]})]})}):null,Yk=(t,e)=>{const n=t==null?void 0:t.members[e],r=n==="ADMIN",s=n==="CO_ADMIN",i=n==="MEMBER",o=r||s;return{canAddMembers:o,canRemoveMember:a=>t?r?!0:s?t.members[a]==="MEMBER":!1:!1,canPromoteToCoAdmin:r,canDemoteFromCoAdmin:r,canChangeGroupInfo:o,canChangeGroupSettings:r,canDeleteGroup:r,canDeleteMessage:a=>t?r?!0:s&&t.members[a]==="MEMBER"||a===e:a===e,isAdmin:r,isCoAdmin:s,isMember:i,isAdminOrCoAdmin:o,currentUserRole:n}},D7=["","","","","",""],M7=({message:t,chatId:e,bubbleColor:n,receivedBubbleColor:r,onActionSuccess:s,onReply:i,onEdit:o,selectionMode:a,isSelected:c,onToggleSelection:d,onEnterSelectionMode:h,searchTerm:f})=>{var vn,It;const{currentUser:p,deleteMessage:g,conversations:w,reactToMessage:T,voteOnPoll:C,users:_}=Te();if(!p)return null;const v=t.senderId===p.id,x=w.find(fe=>fe.id===e),[R,D]=b.useState(null);b.useEffect(()=>{(async()=>{if((x==null?void 0:x.conversationType)==="GROUP")try{const{getGroupInfo:Ae}=await j7(async()=>{const{getGroupInfo:Bt}=await Promise.resolve().then(()=>K5);return{getGroupInfo:Bt}},void 0),pt=await Ae(x.id,p.id);D(pt)}catch(Ae){console.error("Failed to fetch group info:",Ae)}})()},[x,p]);const V=Yk(R,p.id),S=v||V.canDeleteMessage(t.senderId),[E,N]=b.useState(!1),I=b.useRef(null),[P,j]=b.useState(!1),[A,ee]=b.useState(!1),H=b.useRef(null),Ee=b.useRef({isDragging:!1,didLongPress:!1}),Z=b.useRef(null),U=fe=>{Ee.current={isDragging:!1,didLongPress:!1},a||(Z.current=window.setTimeout(()=>{h([t.id]),Ee.current.didLongPress=!0,Z.current=null},500))},W=()=>{Z.current&&(clearTimeout(Z.current),Z.current=null),Ee.current.isDragging=!0},q=()=>{Z.current&&(clearTimeout(Z.current),Z.current=null),a&&!Ee.current.didLongPress&&!Ee.current.isDragging&&d([t.id])},ce=async()=>{if(!x||!I.current)return;await g(x.id,t.id,I.current,x.conversationType)&&s(),N(!1),I.current=null};b.useEffect(()=>{const fe=Ae=>{H.current&&!H.current.contains(Ae.target)&&j(!1)};return document.addEventListener("mousedown",fe),()=>document.removeEventListener("mousedown",fe)},[]);const he=async fe=>{await T(e,t.id,fe),ee(!1),s()},Ce=async fe=>{await C(e,t.id,fe),s()},ne=fe=>{I.current=fe,N(!0),j(!1)},Se=()=>{if(!v||!t.status)return null;if(t.isSeen)return l.jsx(pi,{className:"w-4 h-4 text-blue-400"});switch(t.status){case"read":return l.jsx(pi,{className:"w-4 h-4 text-blue-400"});case"delivered":return l.jsx(pi,{className:"w-4 h-4 text-gray-500"});case"sent":return l.jsx(In,{className:"w-4 h-4 text-gray-500"});default:return null}};if(t.deleteForEveryone)return l.jsx("div",{className:`flex my-1 ${v?"justify-end":"justify-start"}`,children:l.jsxs("div",{className:"rounded-lg px-3 py-2 max-w-md bg-[#202c33] italic text-gray-400 flex items-center space-x-2",children:[l.jsx(PS,{className:"h-4 w-4"}),l.jsx("span",{children:"This message was deleted"})]})});if((vn=t.deleteFor)!=null&&vn.includes(p.id))return null;const pe=()=>{if(!t.pollInfo)return null;const{question:fe,options:Ae}=t.pollInfo,pt=Ae.reduce((ot,Xe)=>ot+Xe.voters.length,0),Bt=Ae.findIndex(ot=>ot.voters.includes(p.id));return l.jsxs("div",{className:"mt-2 space-y-2",children:[l.jsx("p",{className:"font-bold",children:fe}),l.jsx("div",{className:"space-y-2",children:Ae.map((ot,Xe)=>{const Dn=ot.voters.length,fr=pt>0?Dn/pt*100:0,pr=Bt===Xe;return l.jsxs("div",{onClick:()=>Ce(Xe),className:"relative p-2 rounded-lg border border-gray-500 hover:bg-white/10 cursor-pointer",children:[l.jsx("div",{className:"absolute top-0 left-0 h-full bg-primary/30 rounded-lg",style:{width:`${fr}%`}}),l.jsxs("div",{className:"relative flex justify-between items-center",children:[l.jsx("span",{className:pr?"font-bold":"",children:ot.text}),l.jsxs("div",{className:"flex items-center space-x-2",children:[pr&&l.jsx(In,{className:"h-4 w-4 text-primary"}),l.jsx("span",{className:"text-xs text-gray-400",children:Dn})]})]})]},Xe)})}),l.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[pt," vote",pt!==1?"s":""]})]})},Ie=()=>{var fe,Ae,pt,Bt,ot;switch(t.messageType){case"image":return l.jsx("img",{src:(fe=t.fileInfo)==null?void 0:fe.url,alt:(Ae=t.fileInfo)==null?void 0:Ae.name,className:"rounded-md max-w-full"});case"video":return l.jsx("video",{src:(pt=t.fileInfo)==null?void 0:pt.url,controls:!0,className:"rounded-md max-w-full"});case"document":return l.jsxs("div",{className:"flex items-center bg-gray-800/50 p-2 rounded-md",children:[l.jsx(hm,{className:"h-8 w-8 text-gray-400 mr-2"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold",children:(Bt=t.fileInfo)==null?void 0:Bt.name}),l.jsx("p",{className:"text-xs text-gray-400",children:(ot=t.fileInfo)==null?void 0:ot.size})]})]});case"voice":return l.jsx("div",{className:"flex items-center",children:l.jsx("audio",{controls:!0,src:t.content,className:"w-full h-8"})});case"poll":return pe();default:{if(f&&t.content.toLowerCase().includes(f.toLowerCase())){const Xe=t.content.split(new RegExp(`(${f})`,"gi"));return l.jsx("p",{className:"whitespace-pre-wrap",children:Xe.map((Dn,fr)=>Dn.toLowerCase()===f.toLowerCase()?l.jsx("span",{className:"bg-yellow-500/50 rounded",children:Dn},fr):Dn)})}return l.jsx("p",{className:"whitespace-pre-wrap",children:t.content})}}},jn=v?{backgroundColor:n}:r?{backgroundColor:r}:n?{backgroundColor:n,filter:"brightness(0.6) saturate(0.8)"}:{},St=(It=_.find(fe=>fe.id===t.senderId))==null?void 0:It.name;return l.jsxs(Nn.div,{className:`flex my-1 relative ${v?"justify-end":"justify-start"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.8,height:0,marginTop:0,marginBottom:0,transition:{duration:.3,ease:"easeInOut"}},transition:{duration:.2,ease:"easeOut"},layout:!0,children:[l.jsxs("div",{className:`relative ${c?"bg-emerald-500/20":""} rounded-lg`,onPointerDown:U,onPointerMove:W,onPointerUp:q,children:[a&&l.jsx("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 z-30",children:c?l.jsx(RS,{className:"w-6 h-6 text-primary"}):l.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-gray-500 bg-[#111b21]"})}),l.jsxs("div",{className:`group relative w-auto ${a?v?"mr-10":"ml-10":""}`,onMouseEnter:()=>!a&&ee(!0),onMouseLeave:()=>!a&&ee(!1),children:[A&&l.jsx("div",{className:`absolute -top-10 z-20 flex bg-[#2a3942] p-1 rounded-full shadow-lg transition-opacity ${v?"right-0":"left-0"}`,onMouseLeave:fe=>{fe.stopPropagation()},children:D7.map(fe=>l.jsx("button",{onClick:Ae=>{Ae.stopPropagation(),he(fe)},className:"p-1 text-2xl hover:scale-125 transition-transform",children:fe},fe))}),l.jsxs("div",{className:`rounded-lg px-3 py-2 max-w-md relative ${v?"":"bg-[#202c33]"}`,style:jn,children:[(x==null?void 0:x.conversationType)==="GROUP"&&!v&&St&&l.jsx("p",{className:"text-xs font-semibold text-primary mb-1",children:St}),t.replyMessageId&&l.jsxs("div",{className:"mb-2 p-2 bg-black/20 rounded-md border-l-2 border-primary",children:[l.jsx("p",{className:"font-semibold text-sm",children:t.replyMessageSender}),l.jsx("p",{className:"text-sm opacity-80 truncate",children:t.replyMessageContent})]}),Ie(),t.reactions&&Object.values(t.reactions).some(fe=>Array.isArray(fe)&&fe.length>0)&&l.jsx("div",{className:"absolute -bottom-4 right-2 flex space-x-1 z-10",children:Object.entries(t.reactions).map(([fe,Ae])=>Array.isArray(Ae)&&Ae.length>0?l.jsxs("div",{className:"bg-[#2a3942] rounded-full px-1.5 py-0.5 flex items-center text-xs shadow",children:[l.jsx("span",{children:fe}),l.jsx("span",{className:"ml-1 text-white",children:Ae.length})]},fe):null)}),l.jsxs("div",{className:"flex justify-end items-center mt-1 text-white",children:[t.isEdited&&l.jsx("span",{className:"text-xs text-gray-400 mr-1",children:"Edited"}),l.jsx("p",{className:"text-xs text-gray-400 mr-1",children:$h(t.timestamp)}),Se()]}),l.jsx("div",{className:"absolute top-1 right-1 z-10",children:l.jsx("button",{onClick:()=>j(fe=>!fe),className:`p-1 rounded-full transition-opacity opacity-0 group-hover:opacity-100 ${P?"opacity-100":""}`,children:l.jsx(d4,{className:"h-5 w-5 text-gray-400"})})})]}),P&&l.jsxs("div",{ref:H,className:`absolute top-0 mt-8 w-48 bg-[#233138] rounded-md shadow-lg z-20 py-1 ${v?"right-0":"left-auto"}`,children:[l.jsx("button",{onClick:()=>{i(t),j(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-[#111b21]",children:"Reply"}),v&&l.jsx("button",{onClick:()=>{o(t),j(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-[#111b21]",children:"Edit"}),l.jsx("button",{onClick:()=>ne("me"),className:"w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-[#111b21]",children:"Delete for me"}),S&&l.jsx("button",{onClick:()=>ne("everyone"),className:"w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-[#111b21]",children:"Delete for everyone"})]})]})]}),l.jsx(dg,{isOpen:E,onClose:()=>N(!1),onConfirm:ce,title:"Delete message?",confirmText:"Delete",isDanger:!0,children:l.jsx("p",{children:"Are you sure you want to delete this message?"})})]})},V7=b.memo(M7),fp=["https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExaG13a3ZtbjV2ejdjdjZ0cDM4Z2oyc2g2bTR5aWd4dDNwNTNnaDBwOCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/3o7abKhOpu0NwenH3O/giphy.gif","https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExZ3Q4enZrdHZkaGN0eXRmMmczcmU1OHRnM3oxNThud3hqOWpramNnbiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/l3q2K5jinAlChoCLS/giphy.gif","https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExbmZpbjU0MmVmaTN0OWZ0ZXR6ajBqMmg5NnQ2emZ2eGZmaXRrcDdyNyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/d3mlE7uhX8KFgEmY/giphy.gif","https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExajF6b2ZzMDFrYXB3NzZ2emV1ZHdqczh0YWQ3a2E0aW9naWpyemM4MSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/tHIRLHtNwxpjIFcOjg/giphy.gif","https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExZDV4cDhseXN0Z2J1cDI0c25sZ3E2dXN3ZDAzbzRmMndzOHM5ZGZqNyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/26n6Gx9moCgs1pUuk/giphy.gif","https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExdnA2OTZudW9kYm5udWZ3ajN4NXM5dGd6eHFmMnd0d2prNnd6eXNqZyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/3o85xwxr06YNoFdSbm/giphy.gif","https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExYTJkb28yMGp1a3d0dWpjaTkyc3A4d284aDZkMTJxbnc0dXR4d2xmcSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/3oEjI6SIIHBdRxXI40/giphy.gif","https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExOWl1OWR0ZGNxYmdzdjA3aWZyZHF6NW10d29kaHh6N3lsaXU3cm92ZCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/G3va31oEEnIkM/giphy.gif"],O7=({isOpen:t,onClose:e,onSelect:n})=>{const[r,s]=b.useState(""),[i,o]=b.useState(fp);return b.useEffect(()=>{o(r?fp.slice().reverse():fp)},[r]),t?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",onClick:e,children:l.jsxs("div",{className:"bg-[#2a3942] rounded-lg shadow-xl w-full max-w-lg mx-4 text-white flex flex-col h-[80vh]",onClick:a=>a.stopPropagation(),children:[l.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Select GIF"}),l.jsx("button",{onClick:e,children:l.jsx(Nr,{className:"h-6 w-6"})})]}),l.jsx("div",{className:"p-4",children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(Si,{className:"h-5 w-5 text-gray-400"})}),l.jsx("input",{type:"text",placeholder:"Search for GIFs",value:r,onChange:a=>s(a.target.value),className:"w-full bg-[#202c33] border-transparent rounded-lg pl-10 pr-4 py-2 text-white focus:outline-none focus:ring-2 ring-primary"})]})}),l.jsx("main",{className:"flex-grow p-4 pt-0 overflow-y-auto",children:l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:i.map(a=>l.jsx("div",{className:"aspect-square cursor-pointer",onClick:()=>n(a),children:l.jsx("img",{src:a,alt:"GIF",className:"w-full h-full object-cover rounded-md"})},a))})})]})}):null},L7=({isOpen:t,onClose:e,onCreate:n})=>{const[r,s]=b.useState(""),[i,o]=b.useState(["",""]);if(!t)return null;const a=(f,p)=>{const g=[...i];g[f]=p,o(g)},c=()=>{i.length<12&&o([...i,""])},d=f=>{i.length>2&&o(i.filter((p,g)=>g!==f))},h=()=>{r.trim()&&i.every(f=>f.trim())?(n({question:r.trim(),options:i.map(f=>({text:f.trim(),voters:[]}))}),e()):alert("Please fill out the question and all options.")};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",onClick:e,children:l.jsxs("div",{className:"bg-[#2a3942] rounded-lg shadow-xl w-full max-w-lg mx-4 text-white",onClick:f=>f.stopPropagation(),children:[l.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Create Poll"}),l.jsx("button",{onClick:e,children:l.jsx(Nr,{className:"h-6 w-6"})})]}),l.jsxs("main",{className:"p-6 space-y-4 max-h-[70vh] overflow-y-auto",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"poll-question",className:"block text-sm font-medium text-gray-300 mb-1",children:"Question"}),l.jsx("input",{id:"poll-question",type:"text",value:r,onChange:f=>s(f.target.value),placeholder:"Ask a question",className:"w-full bg-[#202c33] border-transparent rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 ring-primary"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Options"}),l.jsx("div",{className:"space-y-2",children:i.map((f,p)=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"text",value:f,onChange:g=>a(p,g.target.value),placeholder:`Option ${p+1}`,className:"flex-grow bg-[#202c33] border-transparent rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 ring-primary"}),i.length>2&&l.jsx("button",{onClick:()=>d(p),className:"p-2 rounded-full hover:bg-gray-600",children:l.jsx(OS,{className:"h-5 w-5 text-gray-400"})})]},p))}),i.length<12&&l.jsxs("button",{onClick:c,className:"mt-2 flex items-center space-x-2 text-primary hover:opacity-80",children:[l.jsx(v4,{className:"h-5 w-5"}),l.jsx("span",{children:"Add option"})]})]})]}),l.jsx("footer",{className:"px-6 py-4 bg-[#202c33] rounded-b-lg flex justify-end",children:l.jsx("button",{onClick:h,className:"px-6 py-2 rounded-md text-white bg-primary hover:bg-primary-hover glossy-button",children:"Create"})})]})})},F7=({onMessageSent:t,replyingTo:e,onClearReply:n,editingMessage:r,onEditComplete:s})=>{var Ce;const[i,o]=b.useState(""),{selectedChat:a,currentUser:c,createPoll:d,users:h}=Te(),f=b.useRef(null),p=b.useRef(null),[g,w]=b.useState(null),[T,C]=b.useState("none"),[_,v]=b.useState(!1),[x,R]=b.useState(!1),[D,V]=b.useState(!1),[S,E]=b.useState(!1),[N,I]=b.useState(0),P=b.useRef(null),j=b.useRef(null);b.useRef([]);const A=b.useRef(null);b.useEffect(()=>{r&&(o(r.content),e&&n())},[r,n]),b.useEffect(()=>{const ne=Ie=>{A.current&&!A.current.contains(Ie.target)&&v(!1)};document.addEventListener("mousedown",ne);const Se=j.current,pe=P.current;return()=>{document.removeEventListener("mousedown",ne),Se&&clearInterval(Se),pe&&pe.state==="recording"&&pe.stop()}},[]),b.useEffect(()=>()=>{g&&URL.revokeObjectURL(g.url)},[g]);const ee=(ne,Se)=>{var Ie;const pe=(Ie=ne.target.files)==null?void 0:Ie[0];if(pe){g&&URL.revokeObjectURL(g.url);const jn=Se==="media"?pe.type.startsWith("image/")?"image":pe.type.startsWith("video/")?"video":null:"document";if(jn){const St=URL.createObjectURL(pe);w({url:St,type:jn,file:pe}),C("none")}}},H=()=>{w(null),C("none"),f.current&&(f.current.value=""),p.current&&(p.current.value="")},Ee=async()=>{var ne;if(!(!i.trim()&&!g||!a||!c))try{if(r)await Hb(r.id,i),s();else{const Se=(e==null?void 0:e.senderId)===c.id?"You":(ne=h.find(jn=>jn.id===(e==null?void 0:e.senderId)))==null?void 0:ne.name,pe={senderId:c.id,content:i||"Media attached",messageType:g?g.type:"text"};e&&(pe.replyMessageId=e.id,pe.replyMessageContent=e.content,pe.replyMessageSender=Se),g&&(pe.fileInfo={name:g.file.name,size:`${(g.file.size/1024).toFixed(2)} KB`,url:g.url});const Ie={id:Date.now().toString(),senderId:c.id,content:pe.content||"",timestamp:new Date().toISOString(),messageType:pe.messageType||"text",status:"sent",reactions:{},...pe};t(Ie)}o(""),w(null),n()}catch(Se){console.error("Failed to send/edit message:",Se),alert("Failed to send message. Please try again.")}},Z=async ne=>{if(!(!a||!c))try{const Se={senderId:c.id,content:"",messageType:"image",fileInfo:{name:"giphy.gif",size:"N/A",url:ne}},pe={id:Date.now().toString(),senderId:c.id,content:"",timestamp:new Date().toISOString(),messageType:"image",status:"sent",reactions:{},...Se};t(pe),R(!1)}catch(Se){console.error("Failed to send GIF:",Se),alert("Failed to send GIF. Please try again.")}},U=async ne=>{if(!a)return;const Se=await d(a.id,ne);Se&&t(Se),V(!1)},W=ne=>{ne.key==="Enter"&&Ee()},q=i.trim()!==""||g!==null,ce=r?l.jsx(In,{className:"h-6 w-6"}):l.jsx(u4,{className:"h-6 w-6"}),he=T!=="none"?`filter-${T}`:"";return l.jsxs("div",{className:"flex-shrink-0 bg-[#202c33] z-10",children:[l.jsx(O7,{isOpen:x,onClose:()=>R(!1),onSelect:Z}),l.jsx(L7,{isOpen:D,onClose:()=>V(!1),onCreate:U}),g&&l.jsx("div",{className:"px-4 pt-2 bg-[#202c33] relative",children:l.jsxs("div",{className:"relative inline-block bg-[#111b21] p-2 rounded-lg",children:[g.type==="image"&&l.jsx("img",{src:g.url,alt:"Preview",className:`max-h-24 rounded-md ${he}`}),g.type==="video"&&l.jsx("video",{src:g.url,controls:!0,className:`max-h-24 rounded-md ${he}`}),g.type==="document"&&l.jsxs("div",{className:"flex items-center p-2 rounded-lg",children:[l.jsx(hm,{className:"h-10 w-10 text-gray-400 mr-3"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white text-sm truncate max-w-xs",children:g.file.name}),l.jsx("p",{className:"text-gray-500 text-xs",children:`${(g.file.size/1024).toFixed(2)} KB`})]})]}),l.jsx("button",{onClick:H,className:"absolute -top-2 -right-2 bg-gray-800 rounded-full p-1 text-white hover:bg-gray-600 focus:outline-none","aria-label":"Remove attachment",children:l.jsx(Nr,{className:"h-5 w-5"})})]})}),r?l.jsxs("div",{className:"px-4 py-2 flex justify-between items-start bg-[#2a3942] rounded-t-lg",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx(dm,{className:"h-5 w-5 text-primary mr-3 flex-shrink-0 mt-1"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-primary",children:"Editing Message"}),l.jsx("p",{className:"text-sm text-gray-300 truncate max-w-xs",children:r.content})]})]}),l.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white",children:l.jsx(Nr,{className:"h-5 w-5"})})]}):e&&l.jsxs("div",{className:"px-4 pt-3 flex justify-between items-start bg-[#2a3942] rounded-t-lg",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"w-1 bg-primary rounded-l-lg self-stretch mr-3"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-primary",children:e.senderId===(c==null?void 0:c.id)?"You":(Ce=h.find(ne=>ne.id===e.senderId))==null?void 0:Ce.name}),l.jsx("p",{className:"text-sm text-gray-300 truncate max-w-xs",children:e.content})]})]}),l.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white",children:l.jsx(Nr,{className:"h-5 w-5"})})]}),l.jsxs("div",{className:"px-4 py-3 flex items-center space-x-3",children:[l.jsx("button",{className:"text-gray-400 hover:text-gray-200",children:l.jsx(l4,{className:"h-6 w-6"})}),l.jsxs("div",{className:"relative",ref:A,children:[l.jsx("input",{ref:f,type:"file",accept:"image/*,video/*",className:"hidden",onChange:ne=>ee(ne,"media")}),l.jsx("input",{ref:p,type:"file",className:"hidden",onChange:ne=>ee(ne,"document")}),l.jsx("button",{className:"text-gray-400 hover:text-gray-200",onClick:()=>v(ne=>!ne),children:l.jsx(NS,{className:"h-6 w-6"})}),_&&l.jsxs("div",{className:"absolute bottom-full left-0 mb-2 w-56 bg-[#233138] rounded-lg shadow-lg z-20 py-2",children:[l.jsxs("button",{onClick:()=>{var ne;(ne=f.current)==null||ne.click(),v(!1)},className:"w-full flex items-center space-x-3 px-4 py-2 text-sm text-gray-300 hover:bg-[#111b21]",children:[l.jsx(ix,{className:"h-5 w-5 text-purple-400"}),l.jsx("span",{children:"Photo & Video"})]}),l.jsxs("button",{onClick:()=>{var ne;(ne=p.current)==null||ne.click(),v(!1)},className:"w-full flex items-center space-x-3 px-4 py-2 text-sm text-gray-300 hover:bg-[#111b21]",children:[l.jsx(hm,{className:"h-5 w-5 text-blue-400"}),l.jsx("span",{children:"Document"})]}),l.jsxs("button",{onClick:()=>{R(!0),v(!1)},className:"w-full flex items-center space-x-3 px-4 py-2 text-sm text-gray-300 hover:bg-[#111b21]",children:[l.jsx(ix,{className:"h-5 w-5 text-green-400"}),l.jsx("span",{children:"GIF"})]}),(a==null?void 0:a.conversationType)==="GROUP"&&l.jsxs("button",{onClick:()=>{V(!0),v(!1)},className:"w-full flex items-center space-x-3 px-4 py-2 text-sm text-gray-300 hover:bg-[#111b21]",children:[l.jsx(h4,{className:"h-5 w-5 text-orange-400"}),l.jsx("span",{children:"Poll"})]})]})]}),l.jsx("input",{type:"text",placeholder:"Type a message",className:"flex-grow bg-[#2a3942] rounded-lg px-4 py-2 text-sm focus:outline-none",value:i,onChange:ne=>o(ne.target.value),onKeyPress:W}),l.jsx("button",{onClick:q?Ee:void 0,className:"bg-primary rounded-full p-2 text-white glossy-button",children:q?ce:l.jsx(c4,{className:"h-6 w-6"})})]})]})},U7=t=>{const[e,n]=b.useState([]),[r,s]=b.useState(!1);return b.useEffect(()=>{if(!t){n([]);return}s(!0);const a=W5(t,c=>{n(c),s(!1)});return()=>a()},[t]),{messages:e,loading:r,sendMessage:async(a,c,d="text",h)=>{t&&await jb(t,a,c,d,h)},markAsRead:async a=>{t&&await q5(t,a)}}},B7=({mediaMessages:t,selectionMode:e,isSelected:n,onToggleSelection:r,onEnterSelectionMode:s})=>{var S,E;const[i,o]=b.useState(0),{currentUser:a}=Te(),c=b.useRef({isDragging:!1,didLongPress:!1}),d=b.useRef(null),h=b.useRef(0);if(!t||t.length===0||!a)return null;const f=t[0],p=t[t.length-1],g=f.senderId===a.id,w=t[i],T=(N,I)=>{h.current=I.point.x,c.current.isDragging=!1},C=(N,I)=>{Math.abs(I.point.x-h.current)>10&&(c.current.isDragging=!0,d.current&&(clearTimeout(d.current),d.current=null))},_=(N,I)=>{(Math.abs(I.offset.x)>50||Math.abs(I.velocity.x)>500)&&(I.offset.x>0&&i>0?o(A=>A-1):I.offset.x<0&&i<t.length-1&&o(A=>A+1)),c.current.isDragging=!1},v=t.map(N=>N.id),x=N=>{c.current={isDragging:!1,didLongPress:!1},!e&&s&&(d.current=window.setTimeout(()=>{s(v),c.current.didLongPress=!0,d.current=null},500))},R=()=>{d.current&&(clearTimeout(d.current),d.current=null)},D=()=>{d.current&&(clearTimeout(d.current),d.current=null),e&&!c.current.didLongPress&&!c.current.isDragging&&(r==null||r(v))},V=()=>{if(!g||!p.status)return null;if(p.isSeen)return l.jsx(pi,{className:"w-4 h-4 text-blue-400"});switch(p.status){case"read":return l.jsx(pi,{className:"w-4 h-4 text-blue-400"});case"delivered":return l.jsx(pi,{className:"w-4 h-4 text-gray-500"});case"sent":return l.jsx(In,{className:"w-4 h-4 text-gray-500"});default:return null}};return l.jsx("div",{className:`flex my-1 relative ${g?"justify-end":"justify-start"}`,onPointerDown:x,onPointerMove:R,onPointerUp:D,children:l.jsxs("div",{className:`relative ${n?"bg-emerald-500/20":""} rounded-lg`,children:[e&&l.jsx("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 z-30",children:n?l.jsx(RS,{className:"w-6 h-6 text-primary"}):l.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-gray-500 bg-[#111b21]"})}),l.jsxs("div",{className:`rounded-lg p-1 max-w-sm w-full relative overflow-hidden ${g?"bg-[#005c4b]":"bg-[#202c33]"} ${e?g?"mr-10":"ml-10":""}`,children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"relative overflow-hidden",children:l.jsx(Hv,{initial:!1,mode:"wait",children:l.jsx(Nn.div,{drag:e?!1:"x",dragConstraints:{left:0,right:0},dragElastic:.2,onDragStart:T,onDrag:C,onDragEnd:_,initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{type:"spring",stiffness:300,damping:30},className:"relative",children:w.messageType==="image"?l.jsx("img",{src:(S=w.fileInfo)==null?void 0:S.url,alt:`Image ${i+1}`,className:"rounded-md w-full aspect-square object-cover select-none",draggable:!1}):l.jsx("video",{src:(E=w.fileInfo)==null?void 0:E.url,controls:!e,className:"rounded-md w-full aspect-square object-cover bg-black"})},i)})}),t.length>1&&l.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 flex space-x-1 z-10",children:t.map((N,I)=>l.jsx("button",{onClick:P=>{P.stopPropagation(),e||o(I)},className:`h-1.5 rounded-full transition-all ${I===i?"w-6 bg-white":"w-1.5 bg-white/50"}`,"aria-label":`Go to media ${I+1}`},I))})]}),l.jsxs("div",{className:"flex justify-end items-center mt-1 px-2 pb-1 text-white",children:[l.jsx("p",{className:"text-xs text-gray-400 mr-1",children:$h(p.timestamp)}),V()]})]})]})})},z7=({timestamp:t,isLocked:e,onDoubleClick:n})=>l.jsx("div",{className:"flex justify-center my-4",onDoubleClick:n,children:l.jsxs("div",{className:`flex items-center space-x-2 text-xs font-semibold px-3 py-1.5 rounded-lg shadow-md cursor-pointer select-none transition-colors duration-300 ${e?"bg-red-900/50 text-red-300":"bg-[#1f2c34] text-gray-400"}`,children:[e&&l.jsx(Ii,{className:"h-3 w-3"}),l.jsx("span",{children:x7(t)})]})}),$7=[{name:"green",from:"#00a884",to:"#008a69"},{name:"ocean",from:"#13547a",to:"#80d0c7"},{name:"grape",from:"#4e54c8",to:"#8f94fb"},{name:"fire",from:"#f12711",to:"#f5af19"}],W7=[{name:"gray",color:"#374151"},{name:"dark",color:"#1f2937"},{name:"blue-gray",color:"#4b5563"}],vi={green:{name:"green",gradient:{from:"#00a884",to:"#008a69"},wallpaper:"https://i.redd.it/qwd83nc4xxf41.jpg",bubbleColor:"#005c4b"},sunset:{name:"sunset",gradient:{from:"#FF512F",to:"#DD2476"},wallpaper:"https://picsum.photos/seed/sunset-wallpaper/1080/1920",bubbleColor:"#A31D45"},ocean:{name:"ocean",gradient:{from:"#2193b0",to:"#6dd5ed"},wallpaper:"https://picsum.photos/seed/ocean-wallpaper/1080/1920",bubbleColor:"#1A6B80"},grape:{name:"grape",gradient:{from:"#8E2DE2",to:"#4A00E0"},wallpaper:"https://picsum.photos/seed/grape-wallpaper/1080/1920",bubbleColor:"#5E1B9E"},lush:{name:"lush",gradient:{from:"#11998e",to:"#38ef7d"},wallpaper:"https://picsum.photos/seed/lush-wallpaper/1080/1920",bubbleColor:"#0C6B63"},fire:{name:"fire",gradient:{from:"#ff9966",to:"#ff5e62"},wallpaper:"https://picsum.photos/seed/fire-wallpaper/1080/1920",bubbleColor:"#B34245"},midnight:{name:"midnight",gradient:{from:"#232526",to:"#414345"},wallpaper:"https://picsum.photos/seed/midnight/1080/1920",bubbleColor:"#2b2d2e"},royal:{name:"royal",gradient:{from:"#141E30",to:"#243B55"},wallpaper:"https://picsum.photos/seed/royal/1080/1920",bubbleColor:"#1a2639"},rose:{name:"rose",gradient:{from:"#EC008C",to:"#FC6767"},wallpaper:"https://picsum.photos/seed/rose/1080/1920",bubbleColor:"#A60062"},lavender:{name:"lavender",gradient:{from:"#C33764",to:"#1D2671"},wallpaper:"https://picsum.photos/seed/lavender/1080/1920",bubbleColor:"#6B1E37"},default:{name:"green",gradient:{from:"#00a884",to:"#008a69"},wallpaper:"https://i.redd.it/qwd83nc4xxf41.jpg",bubbleColor:"#005c4b"}},H7=[...new Set(Object.values(vi).map(t=>t.name).filter(t=>t!=="default"))],hg=H7.map(t=>Object.values(vi).find(e=>e.name===t)),fg=({onHeaderClick:t})=>{var Ks;const{id:e}=dy(),{currentUser:n,conversations:r,themeSettings:s,showBrowserNotification:i,deleteMessage:o,initiateCall:a,securityNotificationsEnabled:c,lockedDates:d,unlockedDatesForSession:h,toggleDailyLock:f,promptAndToggleVanishMode:p,clearUnlockedDatesForSession:g,passcodeSettings:w,clearChat:T,setSelectedChat:C,toggleChatLock:_}=Te(),v=Zo(),x=Ue(),R=b.useRef(null),[D,V]=b.useState(!1),S=b.useMemo(()=>r.find(J=>J.id===e)||r.find(J=>{var F;return J.conversationType==="INDIVIDUAL"&&((F=J.participants)==null?void 0:F.includes(e||""))}),[r,e]),{messages:E,loading:N,sendMessage:I}=U7((S==null?void 0:S.id)||null),[P,j]=b.useState(null),[A,ee]=b.useState(null),[H,Ee]=b.useState(null),[Z,U]=b.useState(null),[W,q]=b.useState(!1),[ce,he]=b.useState([]),[Ce,ne]=b.useState(!1),[Se,pe]=b.useState(!1),[Ie,jn]=b.useState(!1),[St,vn]=b.useState(""),[It,fe]=b.useState("all"),Ae=(S==null?void 0:S.isVanishMode)||!1,pt=b.useCallback(()=>{U(null)},[]),Bt=b.useCallback(J=>{q(!0),he(J)},[]),ot=b.useCallback(J=>{he(F=>J.some(Q=>F.includes(Q))?F.filter(Q=>!J.includes(Q)):[...F,...J])},[]),Xe=b.useCallback(()=>{q(!1),he([])},[]);b.useEffect(()=>{W&&ce.length===0&&Xe()},[ce,W,Xe]);const Dn=b.useCallback(()=>{ne(!0)},[]),fr=b.useCallback(async()=>{if(!S)return;const J=ce.map(F=>o(S.id,F,"everyone",S.conversationType));await Promise.all(J),ne(!1),Xe()},[S,ce,o,Xe]),pr=b.useCallback(async()=>{S&&(await T(S.id),pe(!1))},[S,T]);b.useEffect(()=>{const J=async()=>{if(!(!S||!n))if(j(null),ee(null),S.conversationType==="INDIVIDUAL")try{let F=S.id;if(S.participants&&S.participants.length===2){const Q=S.participants.find(re=>re!==n.id);Q&&(F=Q)}const K=await jh(F);j(K)}catch(F){console.error(F)}else try{const F=await wv(S.id,n.id);ee(F)}catch(F){console.error(F)}};return C(S||null),J(),Ee(null),U(null),Xe(),()=>{S&&g(S.id),C(null)}},[e,S,n]),b.useEffect(()=>{var J;W||(J=R.current)==null||J.scrollIntoView({behavior:"smooth"})},[E,W]);const ua=b.useCallback(J=>{I(J.senderId,J.content,J.messageType,J.fileInfo)},[I]),xc=b.useCallback(async()=>{},[]),Fi=b.useCallback(()=>{x("/")},[x]),Ui=b.useCallback(J=>{if(!J)return"last seen recently";if(J&&typeof J=="object"&&"seconds"in J){const F=new Date(J.seconds*1e3),Q=Math.floor((new Date().getTime()-F.getTime())/1e3);return Q<60?"last seen just now":Q<3600?`last seen ${Math.floor(Q/60)} minutes ago`:Q<86400?`last seen ${Math.floor(Q/3600)} hours ago`:`last seen ${Math.floor(Q/86400)} days ago`}return typeof J=="string"?J:"last seen recently"},[]);if(!S||!n)return l.jsx(Qk,{});S.theme||s.themeColor.name;const Bi=S.name,at=S.profileImage,ut=S.conversationType==="GROUP"?`${(A==null?void 0:A.memberCount)||"..."} participants`:P!=null&&P.isOnline?"online":Ui(P==null?void 0:P.lastSeen),Hs=S.conversationType==="INDIVIDUAL"&&(((Ks=S.participants)==null?void 0:Ks.find(J=>J!==(n==null?void 0:n.id)))||(P==null?void 0:P.id))||S.id,da=vi[(S==null?void 0:S.theme)||"default"]||vi.default,qs=S!=null&&S.receivedTheme?vi[S.receivedTheme]:void 0,_c=da.bubbleColor,Kr=qs==null?void 0:qs.bubbleColor,ha={backgroundImage:`url(${s.chatBackground})`,backgroundColor:Ae?"#0b141a":"transparent"},fa=J=>{J.detail===1&&t(Hs)},zi=J=>{J.preventDefault(),J.stopPropagation(),S&&_(S.id)},Tc=()=>{vn(""),fe("all")},Ec=()=>{const J=[];let F=null;const K=d[S.id]||[],Q=h[S.id]||[],re=/(https?:\/\/[^\s]+)/g,oe=E.filter(le=>It==="all"?!0:It==="link"?le.messageType==="text"&&re.test(le.content):le.messageType===It).filter(le=>{var be;return St?le.messageType==="document"&&((be=le.fileInfo)!=null&&be.name)?le.fileInfo.name.toLowerCase().includes(St.toLowerCase()):le.content.toLowerCase().includes(St.toLowerCase()):!0});for(let le=0;le<oe.length;le++){const be=oe[le],Mn=eT(be.timestamp),Vn=K.includes(Mn),Sc=Q.includes(Mn);if(Mn!==F&&(J.push(l.jsx(z7,{timestamp:be.timestamp,isLocked:Vn,onDoubleClick:mr=>{mr.stopPropagation(),f(S.id,Mn,Vn)}},`date-${Mn}`)),F=Mn),Vn&&!Sc)continue;if((be.messageType==="image"||be.messageType==="video")&&It==="all"&&!St){const mr=[be];let Kt=le+1;for(;Kt<oe.length&&(oe[Kt].messageType==="image"||oe[Kt].messageType==="video")&&oe[Kt].senderId===be.senderId;){const Xn=eT(oe[Kt].timestamp);if(K.includes(Xn)&&!Q.includes(Xn))break;mr.push(oe[Kt]),Kt++}if(mr.length>=2){J.push(l.jsx(B7,{mediaMessages:mr,selectionMode:W,isSelected:mr.some(Xn=>ce.includes(Xn.id)),onEnterSelectionMode:Bt,onToggleSelection:ot},`carousel-${be.id}`)),le=Kt-1;continue}}if(be.messageType==="security"){if(!c)continue;J.push(l.jsx("div",{className:"text-center my-2 flex justify-center",children:l.jsxs("div",{className:"bg-[#1e2b32] text-yellow-200 text-xs font-semibold px-3 py-2 rounded-lg flex items-center space-x-2 max-w-md",children:[l.jsx(Ii,{className:"h-4 w-4 flex-shrink-0"}),l.jsx("span",{children:be.content})]})},be.id))}else J.push(l.jsx(V7,{message:be,chatId:S.id,bubbleColor:_c,receivedBubbleColor:Kr,onActionSuccess:xc,onReply:Ee,onEdit:U,selectionMode:W,isSelected:ce.includes(be.id),onEnterSelectionMode:Bt,onToggleSelection:ot,searchTerm:St},be.id))}return J};return l.jsxs("div",{className:"flex flex-col h-full bg-[#0b141a] bg-cover bg-center",style:ha,children:[W?l.jsxs("header",{className:"flex-shrink-0 bg-[#202c33] p-3 flex justify-between items-center z-10",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("button",{onClick:Xe,className:"text-gray-300",children:l.jsx(Nr,{})}),l.jsxs("span",{className:"font-semibold text-white",children:[ce.length," selected"]})]}),l.jsx("div",{className:"flex items-center space-x-4",children:l.jsx("button",{onClick:Dn,className:"text-gray-300",children:l.jsx(OS,{className:"h-6 w-6"})})})]}):l.jsxs("header",{className:"flex-shrink-0 bg-[#202c33] p-3 flex justify-between items-center z-10",children:[l.jsxs("div",{className:"flex items-center min-w-0",children:[!v&&l.jsx("button",{onClick:Fi,className:"mr-2 text-gray-300",children:l.jsx(AS,{})}),l.jsxs("div",{onClick:fa,onDoubleClick:zi,className:"flex items-center cursor-pointer min-w-0",children:[l.jsx("img",{src:at,alt:Bi,className:"h-10 w-10 rounded-full flex-shrink-0"}),l.jsxs("div",{className:"ml-3 truncate flex items-center space-x-2",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"font-semibold text-white truncate",children:Bi}),l.jsx("p",{className:"text-xs text-gray-400 truncate",children:ut})]}),(P==null?void 0:P.isOnline)&&S.conversationType==="INDIVIDUAL"&&l.jsx("div",{className:"w-2.5 h-2.5 bg-green-500 rounded-full animate-pulse-green flex-shrink-0"})]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4 flex-shrink-0",children:[l.jsx("button",{onClick:()=>a(S.id,"voice"),className:"text-gray-400 hover:text-gray-200",children:l.jsx(ur,{className:"h-6 w-6"})}),l.jsx("button",{onClick:()=>a(S.id,"video"),className:"text-gray-400 hover:text-gray-200",children:l.jsx(hy,{className:"h-6 w-6"})}),l.jsx("button",{onClick:()=>jn(J=>!J),className:"text-gray-400 hover:text-gray-200",children:l.jsx(Si,{className:"h-6 w-6"})}),l.jsxs("div",{className:"relative",children:[l.jsx("button",{onClick:()=>V(J=>!J),className:"text-gray-400 hover:text-gray-200",children:l.jsx(kS,{className:"h-6 w-6"})}),D&&l.jsx("div",{className:"absolute top-full right-0 mt-2 w-48 bg-[#233138] rounded-md shadow-lg z-20",children:l.jsxs("ul",{className:"py-1",children:[w.vanishMode.enabled&&S.conversationType==="INDIVIDUAL"&&l.jsx("li",{children:l.jsx("button",{onClick:()=>p(S.id),className:"w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-[#111b21]",children:"Vanish mode"})}),l.jsx("li",{children:l.jsx("button",{onClick:()=>{},className:"w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-[#111b21]",children:"Disappearing messages"})}),l.jsx("li",{children:l.jsx("button",{onClick:()=>{pe(!0),V(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-[#111b21]",children:"Clear chat"})})]})})]})]})]}),Ie&&l.jsxs("div",{className:"p-2 bg-[#111b21] border-b border-gray-700",children:[l.jsxs("div",{className:"relative mb-2",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(Si,{className:"h-5 w-5 text-gray-400"})}),l.jsx("input",{type:"text",placeholder:"Search messages...",value:St,onChange:J=>vn(J.target.value),className:"form-control form-control-sm w-full bg-[#202c33] border-transparent rounded-lg pl-10 pr-10 py-2 text-sm text-white focus:bg-[#2a3942] focus:outline-none focus:ring-1 focus:ring-emerald-500"}),(St||It!=="all")&&l.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:l.jsx("button",{onClick:Tc,className:"text-gray-400 hover:text-white","aria-label":"Clear search",children:l.jsx(Nr,{className:"h-5 w-5"})})})]}),l.jsx("div",{className:"flex space-x-2",children:["all","image","video","document","link"].map(J=>l.jsx("button",{onClick:()=>fe(J),className:`btn btn-sm rounded-full transition-colors border-0 ${It===J?"bg-primary text-white":"bg-[#202c33] text-gray-300 hover:bg-[#2a3942]"}`,children:J==="all"?"All":J.charAt(0).toUpperCase()+J.slice(1)+"s"},J))})]}),l.jsxs("div",{className:"flex-grow overflow-y-auto p-4 space-y-1",children:[N?l.jsx("div",{className:"flex justify-center items-center h-full",children:l.jsx("p",{children:"Loading messages..."})}):Ec(),l.jsx("div",{ref:R})]}),Ae&&!W&&l.jsx("div",{className:"text-center p-2 bg-transparent text-gray-400 text-xs",children:"Vanish mode is on. Seen messages will disappear when you close the chat."}),!W&&l.jsx(F7,{onMessageSent:ua,replyingTo:H,onClearReply:()=>Ee(null),editingMessage:Z,onEditComplete:pt}),l.jsx(dg,{isOpen:Ce,onClose:()=>ne(!1),onConfirm:fr,title:`Delete ${ce.length} message${ce.length>1?"s":""}?`,confirmText:"Delete for everyone",isDanger:!0,children:l.jsx("p",{children:"Selected messages will be deleted for everyone in this chat. This action cannot be undone."})}),l.jsx(dg,{isOpen:Se,onClose:()=>pe(!1),onConfirm:pr,title:"Clear this chat?",confirmText:"Clear Chat",isDanger:!0,children:l.jsx("p",{children:"Messages in this chat will be permanently deleted."})})]})},Is=({checked:t,onChange:e,id:n})=>{const{themeSettings:r}=Te(),s=r.uiStyle==="glossy",i=t?{backgroundImage:`linear-gradient(to right, ${r.toggleOnColor.from}, ${r.toggleOnColor.to})`,...s&&{boxShadow:"inset 0 1px 0 rgba(255,255,255,0.4), inset 0 -1px 1px rgba(0,0,0,0.2)"}}:{backgroundColor:r.toggleOffColor.color};return l.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[l.jsx("input",{id:n,type:"checkbox",checked:t,onChange:o=>e(o.target.checked),className:"sr-only peer"}),l.jsx("div",{className:"w-11 h-6 rounded-full peer peer-checked:after:translate-x-full transition-colors peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all",style:i})]})},rn=({title:t,children:e,onBack:n})=>l.jsxs("div",{className:"flex flex-col h-screen w-screen bg-[#111b21]",children:[l.jsxs("header",{className:"flex-shrink-0 bg-[#202c33] p-4 flex items-center space-x-6 shadow-md z-10",children:[n&&l.jsx("button",{onClick:n,className:"text-gray-300 hover:text-white",children:l.jsx(AS,{className:"h-6 w-6"})}),l.jsx("h1",{className:"text-xl font-semibold text-white",children:t})]}),l.jsx("main",{className:"flex-grow overflow-y-auto",children:e})]}),Xk=({userId:t,noLayout:e=!1})=>{var E;const n=Ue(),[r,s]=b.useState(null),[i,o]=b.useState(!0),[a,c]=b.useState(!1),[d,h]=b.useState(!1),{initiateCall:f,conversations:p,toggleChatLock:g,promptAndToggleVanishMode:w,passcodeSettings:T,updateChatTheme:C,updateChatReceivedTheme:_,currentUser:v}=Te(),x=p.find(N=>{var I;return N.id===t||N.conversationType==="INDIVIDUAL"&&((I=N.participants)==null?void 0:I.includes(t))}),R=(x==null?void 0:x.isLocked)||!1,D=(x==null?void 0:x.isVanishMode)||!1;if(b.useEffect(()=>{(async()=>{o(!0);try{console.log("ContactInfo: Fetching user info for userId:",t);const I=await jh(t);I?(console.log("ContactInfo: User info loaded successfully:",I.name),s(I)):console.error("ContactInfo: User info returned null for userId:",t)}catch(I){console.error("ContactInfo: Failed to fetch user info for userId:",t,I)}finally{o(!1)}})()},[t]),i)return l.jsx("div",{className:"flex-grow overflow-y-auto p-4 text-center",children:"Loading contact info..."});if(!r)return l.jsx(rn,{title:"Contact Info",children:l.jsx("div",{className:"flex-grow overflow-y-auto flex flex-col items-center justify-center p-8 text-center",children:l.jsxs("div",{className:"bg-red-900/20 border border-red-500/50 rounded-lg p-6 max-w-md",children:[l.jsx("div",{className:"text-red-500 text-5xl mb-4",children:""}),l.jsx("h2",{className:"text-xl font-semibold text-red-500 mb-2",children:"Contact Not Found"}),l.jsx("p",{className:"text-gray-300 mb-4",children:"Unable to load contact information. This user may have been deleted or the ID is invalid."}),l.jsxs("div",{className:"bg-gray-800/50 rounded p-3 mb-4",children:[l.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"User ID:"}),l.jsx("p",{className:"text-xs text-gray-300 font-mono break-all",children:t})]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-primary hover:bg-primary-hover text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"Refresh Page"}),l.jsx("button",{onClick:()=>n(-1),className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"Go Back"})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"Check browser console for more details"})]})})});!r.isPrivate||(E=v==null?void 0:v.following)!=null&&E.includes(t);const V=N=>{if(!N)return"last seen recently";if(N&&typeof N=="object"&&"seconds"in N){const I=new Date(N.seconds*1e3),j=Math.floor((new Date().getTime()-I.getTime())/1e3);return j<60?"last seen just now":j<3600?`last seen ${Math.floor(j/60)} minutes ago`:j<86400?`last seen ${Math.floor(j/3600)} hours ago`:`last seen ${Math.floor(j/86400)} days ago`}return typeof N=="string"?N:"last seen recently"},S=l.jsxs("div",{className:"flex-grow overflow-y-auto",children:[l.jsxs("div",{className:"flex flex-col items-center p-4 md:p-6 bg-[#111b21] border-b border-gray-700",children:[l.jsx("div",{className:`flip-card h-32 w-32 md:h-40 md:w-40 mb-4 cursor-pointer ${a?"flipped":""}`,onClick:()=>c(!a),children:l.jsxs("div",{className:"flip-card-inner",children:[l.jsx("div",{className:"flip-card-front",children:l.jsx("img",{src:r.avatar,alt:r.name,className:"h-32 w-32 md:h-40 md:w-40 rounded-full"})}),l.jsx("div",{className:"flip-card-back bg-white rounded-full flex items-center justify-center p-4",children:l.jsx(LS,{className:"h-24 w-24 md:h-32 md:w-32 text-gray-800"})})]})}),l.jsx("h1",{className:"text-xl md:text-2xl text-white",children:r.name}),r.isPrivate&&l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:" Private Account"}),l.jsx("p",{className:"text-gray-400",children:r.isOnline?"online":V(r.lastSeen)}),l.jsxs("div",{className:"flex space-x-4 mt-4",children:[l.jsxs("button",{onClick:()=>f(r.id,"voice"),className:"flex flex-col items-center text-gray-400 hover:text-primary transition-colors",children:[l.jsx("div",{className:"p-2 rounded-full bg-gray-800",children:l.jsx(ur,{className:"h-5 w-5"})}),l.jsx("span",{className:"text-xs mt-1",children:"Call"})]}),l.jsxs("button",{onClick:()=>f(r.id,"video"),className:"flex flex-col items-center text-gray-400 hover:text-primary transition-colors",children:[l.jsx("div",{className:"p-2 rounded-full bg-gray-800",children:l.jsx(hy,{className:"h-5 w-5"})}),l.jsx("span",{className:"text-xs mt-1",children:"Video"})]})]})]}),l.jsxs("div",{className:"bg-[#111b21] p-4 my-3",children:[l.jsx("p",{className:"text-gray-400 text-sm",children:"About"}),l.jsx("p",{className:"text-white mt-1",children:r.statusText||r.bio||"Hey there! I am using WhatsApp."})]}),l.jsxs("div",{className:"bg-[#111b21] my-3",children:[l.jsxs("div",{className:"p-4",children:[l.jsx("p",{className:"text-white",children:"Theme"}),l.jsxs("div",{className:"flex flex-wrap gap-3 mt-2",children:[l.jsx("button",{onClick:()=>x&&C(x.id,null),className:`w-10 h-10 rounded-full focus:outline-none flex items-center justify-center ring-2 ring-offset-2 ring-offset-[#111b21] bg-gray-600 transition-transform hover:scale-110 ${x!=null&&x.theme?"ring-transparent":"ring-white"}`,children:!(x!=null&&x.theme)&&l.jsx(In,{className:"h-5 w-5 text-white"})}),hg.map(N=>l.jsx("button",{onClick:()=>x&&C(x.id,N.name),className:`w-10 h-10 rounded-full focus:outline-none flex-shrink-0 flex items-center justify-center ring-2 ring-offset-2 ring-offset-[#111b21] transition-transform hover:scale-110 ${(x==null?void 0:x.theme)===N.name?"ring-white":"ring-transparent"}`,style:{backgroundImage:`linear-gradient(to right, ${N.gradient.from}, ${N.gradient.to})`},children:(x==null?void 0:x.theme)===N.name&&l.jsx(In,{className:"h-5 w-5 text-white"})},N.name))]})]}),l.jsxs("div",{className:"p-4",children:[l.jsx("p",{className:"text-white",children:"Received Message Theme"}),l.jsxs("div",{className:"flex flex-wrap gap-3 mt-2",children:[l.jsx("button",{onClick:()=>x&&_(x.id,null),className:`w-10 h-10 rounded-full focus:outline-none flex items-center justify-center ring-2 ring-offset-2 ring-offset-[#111b21] bg-gray-600 transition-transform hover:scale-110 ${x!=null&&x.receivedTheme?"ring-transparent":"ring-white"}`,children:!(x!=null&&x.receivedTheme)&&l.jsx(In,{className:"h-5 w-5 text-white"})}),hg.map(N=>l.jsx("button",{onClick:()=>x&&_(x.id,N.name),className:`w-10 h-10 rounded-full focus:outline-none flex-shrink-0 flex items-center justify-center ring-2 ring-offset-2 ring-offset-[#111b21] transition-transform hover:scale-110 ${(x==null?void 0:x.receivedTheme)===N.name?"ring-white":"ring-transparent"}`,style:{backgroundImage:`linear-gradient(to right, ${N.gradient.from}, ${N.gradient.to})`},children:(x==null?void 0:x.receivedTheme)===N.name&&l.jsx(In,{className:"h-5 w-5 text-white"})},N.name))]})]}),l.jsx("div",{className:"p-4 cursor-pointer hover:bg-[#2a3942]",children:l.jsx("p",{className:"text-white",children:"Mute notifications"})}),l.jsxs("div",{className:"flex items-center justify-between p-4",children:[l.jsx("p",{className:"text-white",children:"Chat lock"}),l.jsx(Is,{checked:R,onChange:()=>x&&g(x.id)})]}),l.jsxs("div",{className:"flex items-center justify-between p-4",children:[l.jsx("p",{className:"text-white",children:"Vanish mode"}),l.jsx(Is,{checked:D,onChange:()=>x&&w(x.id)})]}),l.jsx("div",{className:"p-4 cursor-pointer hover:bg-[#2a3942]",children:l.jsx("p",{className:"text-white",children:"Starred messages"})})]}),l.jsxs("div",{className:"bg-[#111b21] my-3 text-red-500",children:[l.jsx("div",{className:"p-4 cursor-pointer hover:bg-[#2a3942]",children:l.jsxs("p",{children:["Block ",r.name]})}),l.jsx("div",{className:"p-4 cursor-pointer hover:bg-[#2a3942]",children:l.jsxs("p",{children:["Report ",r.name]})})]})]});return e?S:l.jsx(rn,{title:"Contact Info",children:S})},sT=({chat:t,onClose:e})=>{var j;const n=Zo(),{conversations:r,toggleChatLock:s,currentUser:i,users:o}=Te(),a=r.find(A=>A.id===t.id),c=(a==null?void 0:a.isLocked)||!1,[d,h]=b.useState(null),[f,p]=b.useState(!1),[g,w]=b.useState({media:[],links:[],docs:[]}),[T,C]=b.useState("media"),[_,v]=b.useState(""),[x,R]=b.useState(null),D=Yk(d,(i==null?void 0:i.id)||"");b.useEffect(()=>{t.conversationType==="GROUP"&&i&&(async()=>{p(!0);try{const ee=await wv(t.id,i.id);h(ee);const H=await Bb(t.id,i.id),Ee=[],Z=[],U=[],W=/(https?:\/\/[^\s]+)/g;for(const q of H)if(q.messageType==="image"&&Ee.push(q),q.messageType==="document"&&q.fileInfo&&U.push(q),q.messageType==="text"){const ce=q.content.match(W);ce&&Z.push(...ce.map(he=>({id:q.id+he,url:he})))}w({media:Ee,links:Z,docs:U})}catch(ee){console.error("Failed to fetch group info",ee)}finally{p(!1)}})()},[t,i]),b.useEffect(()=>{const A=()=>{x&&R(null)};return document.addEventListener("click",A),()=>document.removeEventListener("click",A)},[x]);const V=()=>T==="media"?g.media.length>0?l.jsx("div",{className:"grid grid-cols-3 gap-1",children:g.media.map(A=>l.jsx("img",{src:A.content,alt:"Shared media",className:"w-full h-24 object-cover rounded"},A.id))}):l.jsx("p",{className:"text-gray-400 text-center text-sm py-4",children:"No media shared yet."}):T==="links"?g.links.length>0?l.jsx("ul",{className:"space-y-2",children:g.links.map(A=>l.jsx("li",{className:"bg-[#2a3942] p-2 rounded",children:l.jsx("a",{href:A.url,target:"_blank",rel:"noopener noreferrer",className:"text-emerald-400 text-sm truncate block hover:underline",children:A.url})},A.id))}):l.jsx("p",{className:"text-gray-400 text-center text-sm py-4",children:"No links shared yet."}):T==="docs"?g.docs.length>0?l.jsx("ul",{className:"space-y-2",children:g.docs.map(A=>{var ee,H;return l.jsxs("li",{className:"flex items-center bg-[#2a3942] p-2 rounded",children:[l.jsx(NS,{className:"h-6 w-6 text-gray-400 mr-3"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white text-sm truncate",children:(ee=A.fileInfo)==null?void 0:ee.name}),l.jsx("p",{className:"text-gray-500 text-xs",children:(H=A.fileInfo)==null?void 0:H.size})]})]},A.id)})}):l.jsx("p",{className:"text-gray-400 text-center text-sm py-4",children:"No documents shared yet."}):null,S=d?Object.entries(d.members).filter(([A])=>{const ee=o.find(H=>H.id===A);return ee==null?void 0:ee.name.toLowerCase().includes(_.toLowerCase())}):[],E=(A,ee)=>{const H=o.find(Ee=>Ee.id===A);ee==="remove"?window.confirm(`Remove ${H==null?void 0:H.name} from the group?`)&&console.log("Remove member:",A):ee==="promote"?window.confirm(`Make ${H==null?void 0:H.name} a co-admin?`)&&console.log("Promote to co-admin:",A):ee==="demote"&&window.confirm(`Remove ${H==null?void 0:H.name} as co-admin?`)&&console.log("Demote from co-admin:",A),R(null)},N=()=>{console.log("Add participant clicked")},I=()=>{console.log("Edit group clicked")},P=n?"absolute top-0 right-0 h-full w-[35%] bg-[#202c33] border-l border-gray-700 flex flex-col z-20 transition-all duration-300 ease-in-out":"fixed inset-0 bg-[#111b21] flex flex-col z-30";return l.jsxs("div",{className:P,children:[l.jsxs("header",{className:"flex-shrink-0 bg-[#202c33] p-4 flex items-center space-x-4",children:[l.jsx("button",{onClick:e,className:"text-white",children:l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:l.jsx("path",{fill:"currentColor",d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})}),l.jsx("h2",{className:"text-lg font-semibold text-white",children:t.conversationType==="GROUP"?"Group Info":"Contact Info"})]}),t.conversationType==="INDIVIDUAL"?l.jsx(Xk,{userId:((j=t.participants)==null?void 0:j.find(A=>A!==(i==null?void 0:i.id)))||t.id,noLayout:!0}):l.jsxs("div",{className:"flex-grow overflow-y-auto",children:[l.jsxs("div",{className:"flex flex-col items-center p-4 md:p-6 bg-[#111b21] border-b border-gray-700",children:[l.jsx("img",{src:t.profileImage,alt:t.name,className:"h-32 w-32 md:h-40 md:w-40 rounded-full mb-4"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("h1",{className:"text-2xl text-white",children:t.name}),D.canChangeGroupInfo&&l.jsx("button",{onClick:I,className:"p-1.5 hover:bg-gray-700 rounded-full transition-colors",title:"Edit group",children:l.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",className:"text-gray-400 hover:text-white",children:l.jsx("path",{fill:"currentColor",d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})})]}),l.jsxs("p",{className:"text-gray-400",children:["Group  ",(d==null?void 0:d.memberCount)||"..."," participants"]})]}),d&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-[#111b21] p-4 my-3",children:[l.jsx("p",{className:"text-gray-400 text-sm",children:"Description"}),l.jsx("p",{className:"text-white mt-1",children:d.description})]}),l.jsxs("div",{className:"bg-[#111b21] p-4 my-3 border-l-4 border-primary",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("p",{className:"text-gray-400 text-sm",children:"Your Role"}),l.jsx("div",{className:"flex items-center gap-2",children:D.isAdmin?l.jsxs(l.Fragment,{children:[l.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",className:"text-emerald-400",children:l.jsx("path",{fill:"currentColor",d:"M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V9h7V2.99c3.53.43 6.43 2.96 7.28 6.01H12v4z"})}),l.jsx("span",{className:"text-emerald-400 font-semibold",children:"Group Owner"})]}):D.isCoAdmin?l.jsxs(l.Fragment,{children:[l.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",className:"text-blue-400",children:l.jsx("path",{fill:"currentColor",d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V11H5V8.99h7V4l5.26 2.47c.46.22.76.69.76 1.21v.32H12v4z"})}),l.jsx("span",{className:"text-blue-400 font-semibold",children:"Co-Admin"})]}):l.jsxs(l.Fragment,{children:[l.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",className:"text-gray-400",children:l.jsx("path",{fill:"currentColor",d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),l.jsx("span",{className:"text-gray-400 font-semibold",children:"Member"})]})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-gray-300 text-xs font-medium mb-2",children:"Permissions:"}),l.jsxs("div",{className:"grid grid-cols-1 gap-1.5",children:[D.canChangeGroupInfo&&l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[l.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14",className:"text-green-400",children:l.jsx("path",{fill:"currentColor",d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),"Edit group info & description"]}),D.canAddMembers&&l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[l.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14",className:"text-green-400",children:l.jsx("path",{fill:"currentColor",d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),"Add new participants"]}),D.isAdmin&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[l.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14",className:"text-green-400",children:l.jsx("path",{fill:"currentColor",d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),"Remove any participant"]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[l.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14",className:"text-green-400",children:l.jsx("path",{fill:"currentColor",d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),"Promote/demote co-admins"]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[l.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14",className:"text-green-400",children:l.jsx("path",{fill:"currentColor",d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),"Delete the group"]})]}),D.isCoAdmin&&!D.isAdmin&&l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[l.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14",className:"text-green-400",children:l.jsx("path",{fill:"currentColor",d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),"Remove regular members"]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[l.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14",className:"text-green-400",children:l.jsx("path",{fill:"currentColor",d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),"Send messages & media"]})]})]})]})]}),l.jsxs("div",{className:"bg-[#111b21] p-4 my-3",children:[l.jsx("h3",{className:"text-gray-400 text-sm mb-2",children:"Shared Content"}),l.jsxs("div",{className:"flex border-b border-gray-700 mb-2",children:[l.jsx("button",{onClick:()=>C("media"),className:`flex-1 py-2 text-sm ${T==="media"?"text-primary border-b-2 border-primary":"text-gray-300"}`,children:"Media"}),l.jsx("button",{onClick:()=>C("links"),className:`flex-1 py-2 text-sm ${T==="links"?"text-primary border-b-2 border-primary":"text-gray-300"}`,children:"Links"}),l.jsx("button",{onClick:()=>C("docs"),className:`flex-1 py-2 text-sm ${T==="docs"?"text-primary border-b-2 border-primary":"text-gray-300"}`,children:"Docs"})]}),l.jsx("div",{className:"max-h-48 overflow-y-auto",children:f?l.jsx("p",{className:"text-center text-gray-400",children:"Loading content..."}):V()})]}),D.canChangeGroupSettings&&l.jsx("div",{className:"bg-[#111b21] my-3",children:l.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer hover:bg-[#2a3942]",children:[l.jsx("div",{children:l.jsx("p",{className:"text-white",children:"Chat lock"})}),l.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:c,onChange:()=>s(t.id),className:"sr-only peer"}),l.jsx("div",{className:"w-11 h-6 bg-gray-700 rounded-full peer peer-checked:after:translate-x-full transition-colors peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]})}),l.jsxs("div",{className:"bg-[#111b21] my-3",children:[l.jsxs("h3",{className:"p-4 text-emerald-500 font-semibold",children:[(d==null?void 0:d.memberCount)||"..."," Participants"]}),l.jsx("div",{className:"px-4 pb-2",children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(Si,{className:"h-5 w-5 text-gray-400"})}),l.jsx("input",{type:"text",placeholder:"Search participants",value:_,onChange:A=>v(A.target.value),className:"w-full bg-[#2a3942] rounded-lg pl-10 pr-4 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-primary"})]})}),D.canAddMembers&&l.jsxs("button",{onClick:N,className:"w-full p-3 text-primary hover:bg-[#2a3942] flex items-center gap-2 transition-colors",children:[l.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor",children:l.jsx("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),"Add participant"]}),f&&l.jsx("p",{className:"p-4 text-gray-400",children:"Loading participants..."}),d&&S.map(([A,ee])=>{const H=o.find(Z=>Z.id===A);if(!i)return null;const Ee=A!==i.id&&D.canRemoveMember(A);return l.jsxs("div",{className:"relative flex items-center p-3 hover:bg-[#2a3942] group",children:[l.jsx("img",{src:H==null?void 0:H.avatar,alt:H==null?void 0:H.name,className:"h-10 w-10 rounded-full mr-4"}),l.jsx("div",{className:"flex-grow",children:l.jsxs("p",{className:"text-white",children:[(H==null?void 0:H.name)||A,(H==null?void 0:H.id)===i.id&&" (You)"]})}),l.jsxs("div",{className:"flex items-center gap-2",children:[ee==="ADMIN"?l.jsx("span",{className:"text-xs bg-emerald-500/20 text-emerald-400 font-semibold px-2 py-0.5 rounded-full",children:"Admin"}):ee==="CO_ADMIN"?l.jsx("span",{className:"text-xs bg-blue-500/20 text-blue-400 font-semibold px-2 py-0.5 rounded-full",children:"Co-Admin"}):l.jsx("span",{className:"text-xs bg-gray-700 text-gray-400 font-semibold px-2 py-0.5 rounded-full",children:"Member"}),Ee&&l.jsxs("div",{className:"relative",children:[l.jsx("button",{onClick:()=>R(x===A?null:A),className:"p-1.5 hover:bg-gray-700 rounded-full transition-colors",children:l.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",className:"text-gray-400",children:l.jsx("path",{fill:"currentColor",d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})})}),x===A&&l.jsxs("div",{className:"absolute right-0 top-8 bg-[#2a3942] rounded-lg shadow-lg py-2 z-10 min-w-[160px]",children:[D.canRemoveMember(A)&&l.jsxs("button",{onClick:()=>E(A,"remove"),className:"w-full px-4 py-2 text-left text-white hover:bg-[#3b4a54] transition-colors",children:["Remove ",H==null?void 0:H.name]}),D.canPromoteToCoAdmin&&ee==="MEMBER"&&l.jsx("button",{onClick:()=>E(A,"promote"),className:"w-full px-4 py-2 text-left text-white hover:bg-[#3b4a54] transition-colors",children:"Make co-admin"}),D.canDemoteFromCoAdmin&&ee==="CO_ADMIN"&&l.jsx("button",{onClick:()=>E(A,"demote"),className:"w-full px-4 py-2 text-left text-white hover:bg-[#3b4a54] transition-colors",children:"Dismiss as admin"})]})]})]})]},A)})]}),l.jsxs("div",{className:"bg-[#111b21] my-3 text-red-500",children:[l.jsx("div",{className:"p-4 cursor-pointer hover:bg-[#2a3942]",children:l.jsx("p",{children:"Exit group"})}),D.canDeleteGroup&&l.jsx("div",{className:"p-4 cursor-pointer hover:bg-[#2a3942]",children:l.jsx("p",{children:"Delete group"})}),l.jsx("div",{className:"p-4 cursor-pointer hover:bg-[#2a3942]",children:l.jsx("p",{children:"Report group"})})]})]})]})},q7=()=>{const t=Zo(),{id:e}=dy(),[n,r]=b.useState(!1),{selectedChat:s}=Te();return t?l.jsx("div",{className:"flex h-screen w-screen p-0 md:p-4",children:l.jsxs("div",{className:"flex w-full h-full bg-[#222e35] shadow-2xl overflow-hidden",children:[l.jsx(nT,{}),l.jsxs("div",{className:"flex-grow bg-[#0b141a] relative",children:[l.jsx("div",{className:"absolute inset-0 transition-all duration-300 ease-in-out",style:{right:n&&s?"35%":"0"},children:e&&s?l.jsx(fg,{onHeaderClick:()=>r(!0)}):l.jsx(Qk,{})}),n&&s&&l.jsx(sT,{chat:s,onClose:()=>r(!1)})]})]})}):l.jsxs("div",{className:"h-full w-full bg-[#111b21]",children:[l.jsx("div",{className:`${e?"hidden":"block"} h-full`,children:l.jsx(nT,{})}),l.jsx("div",{className:`${e?"block":"hidden"} h-full`,children:e&&l.jsx(fg,{onHeaderClick:()=>r(!0)})}),n&&s&&l.jsx(sT,{chat:s,onClose:()=>r(!1)})]})},K7=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"})}),G7=({className:t})=>l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",className:t,children:l.jsx("path",{fill:"currentColor",d:"M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"})}),Q7=()=>{const t=Ue(),{currentUser:e}=Te(),{logout:n}=$s(),[r,s]=b.useState(!1),i=async()=>{if(window.confirm("Are you sure you want to log out?")){s(!0);try{await n()}catch(c){console.error("Logout error:",c),alert("Failed to logout. Please try again."),s(!1)}}},o=[{icon:l.jsx(fm,{className:"h-6 w-6 text-gray-400"}),title:"Account",subtitle:"Security notifications, change number",link:"/settings/account"},{icon:l.jsx(Ii,{className:"h-6 w-6 text-gray-400"}),title:"Privacy",subtitle:"Block contacts, disappearing messages",link:"/settings/privacy"},{icon:l.jsx(Ii,{className:"h-6 w-6 text-gray-400"}),title:"Passcode Manager",subtitle:"Manage passcodes for locked chats",link:"/settings/passcode-manager"},{icon:l.jsx(K7,{className:"h-6 w-6 text-gray-400"}),title:"Chats",subtitle:"Theme, wallpapers, chat history",link:"/settings/chats"},{icon:l.jsx(_4,{className:"h-6 w-6 text-gray-400"}),title:"Storage and data",subtitle:"Network usage, auto-download",link:"/settings/storage"},{icon:l.jsx(x4,{className:"h-6 w-6 text-gray-400"}),title:"Help",subtitle:"Help center, contact us, privacy policy",link:"/settings/help"}],a=({item:c})=>l.jsx(hs,{to:c.link,className:"block hover:bg-[#202c33] transition-colors",children:l.jsxs("div",{className:"flex items-center p-4",children:[l.jsx("div",{className:"w-12",children:c.icon}),l.jsxs("div",{className:"ml-4",children:[l.jsx("h3",{className:"text-white",children:c.title}),l.jsx("p",{className:"text-sm text-gray-400",children:c.subtitle})]})]})});return e?l.jsx(rn,{title:"Settings",onBack:()=>t("/"),children:l.jsxs("div",{className:"flex-grow flex flex-col",children:[l.jsx(hs,{to:"/settings/profile",className:"block hover:bg-[#202c33] border-b border-gray-700 transition-colors",children:l.jsxs("div",{className:"flex items-center justify-between p-4",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("img",{src:e.avatar,alt:e.name,className:"h-16 w-16 rounded-full"}),l.jsxs("div",{className:"ml-4",children:[l.jsx("h2",{className:"text-lg font-semibold text-white",children:e.name}),l.jsx("p",{className:"text-sm text-gray-400",children:e.bio||e.statusText||"Hey there! I am using WhatsApp."})]})]}),l.jsx(LS,{className:"h-6 w-6 text-primary"})]})}),l.jsx("div",{className:"divide-y divide-gray-700 flex-shrink-0",children:o.map(c=>l.jsx(a,{item:c},c.title))}),l.jsx("div",{className:"mt-auto border-t border-gray-700",children:l.jsxs("button",{onClick:i,disabled:r,className:"w-full hover:bg-[#202c33] transition-colors p-4 flex items-center disabled:opacity-50",children:[l.jsx("div",{className:"w-12 flex items-center justify-center",children:l.jsx(G7,{className:"h-6 w-6 text-red-500"})}),l.jsxs("div",{className:"ml-4 text-left",children:[l.jsx("h3",{className:"text-red-500 font-medium",children:r?"Logging out...":"Log Out"}),l.jsx("p",{className:"text-sm text-gray-400",children:"Sign out of your account"})]})]})})]})}):null},Y7=()=>{const t=Ue(),{currentUser:e,updateCurrentUser:n}=Te(),r=b.useRef(null),s=()=>{var o;(o=r.current)==null||o.click()},i=o=>{var c;const a=(c=o.target.files)==null?void 0:c[0];if(a){const d=new FileReader;d.onload=()=>{typeof d.result=="string"&&n({avatar:d.result})},d.readAsDataURL(a)}};return e?l.jsxs(rn,{title:"Profile",onBack:()=>t("/settings"),children:[l.jsx("input",{type:"file",ref:r,onChange:i,accept:"image/*",className:"hidden"}),l.jsx("div",{className:"flex flex-col items-center p-8 bg-[#202c33]",children:l.jsxs("div",{className:"relative group cursor-pointer",onClick:s,children:[l.jsx("img",{src:e.avatar,alt:"Profile",className:"h-40 w-40 rounded-full"}),l.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-full flex flex-col items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx(DS,{className:"h-8 w-8 text-white"}),l.jsx("p",{className:"text-xs text-white mt-1 uppercase",children:"Change"})]})]})}),l.jsxs("div",{className:"py-4",children:[l.jsxs("div",{className:"px-6 py-4",children:[l.jsx("p",{className:"text-sm text-primary mb-2",children:"Your name"}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("p",{className:"text-lg text-white",children:e.name}),l.jsx("button",{className:"text-gray-400 hover:text-white",children:l.jsx(dm,{className:"h-5 w-5"})})]})]}),l.jsx("p",{className:"px-6 text-xs text-gray-500",children:"This is not your username or pin. This name will be visible to your WhatsApp contacts."}),l.jsxs("div",{className:"px-6 py-4 mt-4",children:[l.jsx("p",{className:"text-sm text-primary mb-2",children:"About"}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("p",{className:"text-lg text-white",children:e.statusText||e.bio||"Hey there! I am using WhatsApp."}),l.jsx("button",{className:"text-gray-400 hover:text-white",children:l.jsx(dm,{className:"h-5 w-5"})})]})]}),l.jsxs("div",{className:"px-6 py-4 mt-4 border-t border-gray-700",children:[l.jsx("p",{className:"text-sm text-primary mb-2",children:"Privacy"}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-base text-white",children:"Private Account"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"When your account is private, only followers can message you"})]}),l.jsxs("label",{className:"relative inline-flex items-center cursor-pointer ml-3",children:[l.jsx("input",{type:"checkbox",className:"sr-only peer",checked:e.isPrivate||!1,onChange:async o=>{const a=o.target.checked;n({isPrivate:a});try{console.log("Mock update user privacy:",a)}catch(c){console.error("Error updating privacy setting:",c)}}}),l.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]})]})]})]}):null},vr=({title:t,value:e,onClick:n})=>l.jsxs("button",{onClick:n,className:"w-full text-left block hover:bg-[#202c33] px-6 py-3 transition-colors",children:[l.jsx("p",{className:"text-white text-base",children:t}),l.jsx("p",{className:"text-gray-400 text-sm",children:e})]}),X7=()=>{const t=Ue();return l.jsx(rn,{title:"Privacy",onBack:()=>t("/settings"),children:l.jsxs("div",{className:"divide-y divide-gray-800",children:[l.jsxs("div",{className:"py-4",children:[l.jsx("div",{className:"px-6 pb-2",children:l.jsx("p",{className:"text-sm text-gray-400",children:"Who can see my personal info"})}),l.jsx(vr,{title:"Last seen & online",value:"My contacts"}),l.jsx(vr,{title:"Profile photo",value:"Everyone"}),l.jsx(vr,{title:"About",value:"Everyone"}),l.jsx(vr,{title:"Status",value:"My contacts"})]}),l.jsx("div",{className:"py-2",children:l.jsx(vr,{title:"Read receipts",value:"If turned off, you won't send or receive Read receipts. Read receipts are always sent for group chats."})}),l.jsxs("div",{className:"py-4",children:[l.jsx("div",{className:"px-6 pb-2",children:l.jsx("p",{className:"text-sm text-gray-400",children:"Disappearing messages"})}),l.jsx(vr,{title:"Default message timer",value:"Off"})]}),l.jsxs("div",{className:"py-4",children:[l.jsx(vr,{title:"Groups",value:"Everyone"}),l.jsx(vr,{title:"Live location",value:"None"}),l.jsx(vr,{title:"Blocked contacts",value:"0"})]})]})})},fu=({icon:t,title:e,subtitle:n,onClick:r})=>l.jsx("button",{onClick:r,className:"w-full text-left block hover:bg-[#202c33] disabled:opacity-50 transition-colors",children:l.jsxs("div",{className:"flex items-center p-4",children:[l.jsx("div",{className:"w-12",children:t}),l.jsxs("div",{className:"ml-4",children:[l.jsx("h3",{className:"text-white",children:e}),n&&l.jsx("p",{className:"text-sm text-gray-400",children:n})]})]})}),J7=({icon:t,title:e,subtitle:n,isEnabled:r,onToggle:s})=>l.jsxs("div",{className:"flex items-center p-4",children:[l.jsx("div",{className:"w-12",children:t}),l.jsxs("div",{className:"ml-4 flex-grow",children:[l.jsx("h3",{className:"text-white",children:e}),l.jsx("p",{className:"text-sm text-gray-400",children:n})]}),l.jsx(Is,{checked:r,onChange:s})]}),Z7=()=>{const{securityNotificationsEnabled:t,setSecurityNotificationsEnabled:e}=Te(),n=Ue();return l.jsx(rn,{title:"Account",onBack:()=>n("/settings"),children:l.jsxs("div",{className:"py-2 divide-y divide-gray-800",children:[l.jsxs("div",{children:[l.jsx("div",{className:"px-6 py-4",children:l.jsx("h2",{className:"text-primary font-semibold text-sm",children:"Security"})}),l.jsx(J7,{icon:l.jsx(fm,{className:"h-6 w-6 text-gray-400"}),title:"Security notifications",subtitle:"Get notified when your security code changes for a contact.",isEnabled:t,onToggle:e}),l.jsx("div",{className:"px-6 py-2",children:l.jsx("p",{className:"text-xs text-gray-500",children:"Your messages and calls are secured with end-to-end encryption. This means WhatsApp and third parties can't read or listen to them."})})]}),l.jsxs("div",{className:"py-2",children:[l.jsx(fu,{icon:l.jsx(fm,{className:"h-6 w-6 text-gray-400"}),title:"Change password",subtitle:"Update your account password.",onClick:()=>n("/settings/change-password")}),l.jsx(fu,{icon:l.jsx(nh,{className:"h-6 w-6 text-gray-400"}),title:"Change number",subtitle:"Change your phone number associated with your account.",onClick:()=>alert("Feature not implemented")}),l.jsx(fu,{icon:l.jsx(Ii,{className:"h-6 w-6 text-gray-400"}),title:"Request account info",subtitle:"Get a report of your WhatsApp account information.",onClick:()=>alert("Feature not implemented")}),l.jsx(fu,{icon:l.jsx(Ii,{className:"h-6 w-6 text-red-500"}),title:"Delete my account",subtitle:"",onClick:()=>alert("Feature not implemented")})]})]})})},ez=["https://i.redd.it/qwd83nc4xxf41.jpg","https://picsum.photos/seed/wallpaper1/1080/1920","#0b141a","https://picsum.photos/seed/wallpaper2/1080/1920","https://picsum.photos/seed/wallpaper3/1080/1920"],Zs=({title:t,children:e})=>l.jsxs("div",{className:"py-4",children:[l.jsx("h2",{className:"text-primary font-semibold text-sm mb-3",children:t}),e]}),tz=({settings:t,bubbleColor:e})=>{const n={backgroundImage:`url(${t.chatBackground})`,backgroundColor:t.chatBackground.startsWith("#")?t.chatBackground:"transparent"},r=`font-size-${t.fontSize}`;return l.jsx("div",{className:`p-4 rounded-lg bg-cover bg-center border border-gray-700 ${r}`,style:n,children:l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"flex",children:l.jsxs("div",{className:"bg-[#202c33] text-white p-2 rounded-lg max-w-[70%]",children:[l.jsx("p",{children:"Hey! How's it going?"}),l.jsx("span",{className:"text-xs text-gray-400 float-right ml-2 mt-1",children:"10:00 AM"})]})}),l.jsx("div",{className:"flex justify-end",children:l.jsxs("div",{className:"text-white p-2 rounded-lg max-w-[70%]",style:{backgroundColor:e},children:[l.jsx("p",{children:"Great, thanks! Just customizing my theme."}),l.jsx("span",{className:"text-xs text-gray-400/80 float-right ml-2 mt-1",children:"10:01 AM"})]})})]})})},nz=()=>{var g;const{themeSettings:t,setThemeSettings:e}=Te(),n=b.useRef(null),r=Ue(),[s,i]=b.useState("display"),[o,a]=b.useState(!0),c=t.themeColor.name,d=((g=vi[c])==null?void 0:g.bubbleColor)||vi.default.bubbleColor,h=(w,T)=>{e(C=>({...C,[w]:T}))},f=w=>{var C;const T=(C=w.target.files)==null?void 0:C[0];if(T){const _=new FileReader;_.onload=()=>{typeof _.result=="string"&&h("chatBackground",_.result)},_.readAsDataURL(T)}},p=(w,T,C)=>{const _=t.uiStyle==="glossy";return l.jsx("div",{className:"flex flex-wrap gap-2 bg-[#2a3942] rounded-lg p-1 w-full",children:w.map(({label:v,value:x})=>{const R=T===x;return l.jsx("button",{onClick:()=>C(x),className:`flex-grow px-3 py-1 text-sm rounded-md transition-colors text-center ${R?`text-white shadow ${_?"":"bg-primary"}`:"text-gray-300 hover:bg-[#3c4a54]"} ${R&&_?"glossy-button":""}`,style:R&&!_?{backgroundImage:`linear-gradient(to right, ${t.themeColor.from}, ${t.themeColor.to})`}:{},children:v},x)})})};return l.jsxs(rn,{title:"Chats",onBack:()=>r("/settings"),children:[l.jsx("input",{type:"file",ref:n,onChange:f,accept:"image/*",className:"hidden"}),l.jsxs("div",{className:"border-b border-gray-700 flex",children:[l.jsx("button",{onClick:()=>i("display"),className:`flex-1 p-3 text-center font-semibold ${s==="display"?"text-primary border-b-2 border-primary":"text-gray-400"}`,children:"Display"}),l.jsx("button",{onClick:()=>i("chat_settings"),className:`flex-1 p-3 text-center font-semibold ${s==="chat_settings"?"text-primary border-b-2 border-primary":"text-gray-400"}`,children:"Chat Settings"})]}),l.jsxs("div",{className:"p-4 md:p-6",children:[s==="display"&&l.jsxs("div",{className:"md:grid md:grid-cols-2 md:gap-8",children:[l.jsx("div",{className:"mb-6 md:mb-0",children:l.jsx(Zs,{title:"Live Preview",children:l.jsx(tz,{settings:t,bubbleColor:d})})}),l.jsxs("div",{className:"divide-y divide-gray-800",children:[l.jsx(Zs,{title:"Theme Gradient",children:l.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-6 md:grid-cols-5 gap-3 mt-2",children:hg.map(w=>l.jsx("button",{onClick:()=>h("themeColor",{name:w.name,from:w.gradient.from,to:w.gradient.to}),className:`w-full aspect-square rounded-full focus:outline-none flex-shrink-0 flex items-center justify-center ring-2 ring-offset-2 ring-offset-[#111b21] transition-all duration-200 hover:transform hover:scale-110 ${t.themeColor.name===w.name?"ring-white":"ring-transparent"}`,style:{backgroundImage:`linear-gradient(to right, ${w.gradient.from}, ${w.gradient.to})`},children:t.themeColor.name===w.name&&l.jsx(In,{className:"h-6 w-6 text-white"})},w.name))})}),l.jsx(Zs,{title:"Chat Wallpaper",children:l.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-3 lg:grid-cols-4 gap-3 mt-2",children:[ez.map(w=>l.jsxs("button",{onClick:()=>h("chatBackground",w),className:"w-full aspect-square rounded-lg overflow-hidden ring-2 ring-offset-2 ring-offset-[#111b21] focus:outline-none relative group transition-transform hover:scale-105",children:[l.jsx("div",{style:{backgroundImage:`url(${w})`,backgroundColor:w.startsWith("#")?w:"transparent"},className:"w-full h-full bg-cover bg-center"}),l.jsx("div",{className:`absolute inset-0 bg-black/50 flex items-center justify-center transition-opacity ${t.chatBackground===w?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:l.jsx(In,{className:"h-8 w-8 text-white"})})]},w)),l.jsxs("button",{onClick:()=>{var w;return(w=n.current)==null?void 0:w.click()},className:"w-full aspect-square rounded-lg bg-[#2a3942] flex flex-col items-center justify-center text-gray-300 transition-transform hover:scale-105",children:[l.jsx("svg",{className:"h-8 w-8",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),l.jsx("span",{className:"text-xs mt-1",children:"Custom"})]})]})}),l.jsxs(Zs,{title:"Toggle Button Colors",children:[l.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-[#2a3942]",children:[l.jsx("span",{className:"text-white font-semibold",children:"Preview"}),l.jsx(Is,{checked:o,onChange:a})]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"On State"}),l.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-6 md:grid-cols-5 gap-3",children:$7.map(w=>l.jsx("button",{onClick:()=>h("toggleOnColor",{name:w.name,from:w.from,to:w.to}),className:`w-full aspect-square rounded-full focus:outline-none flex items-center justify-center ring-2 ring-offset-2 ring-offset-[#111b21] ${t.toggleOnColor.name===w.name?"ring-white":"ring-transparent"}`,style:{backgroundImage:`linear-gradient(to right, ${w.from}, ${w.to})`},children:t.toggleOnColor.name===w.name&&l.jsx(In,{className:"h-6 w-6 text-white"})},w.name))})]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Off State"}),l.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-6 md:grid-cols-5 gap-3",children:W7.map(w=>l.jsx("button",{onClick:()=>h("toggleOffColor",w),className:`w-full aspect-square rounded-full focus:outline-none flex items-center justify-center ring-2 ring-offset-2 ring-offset-[#111b21] ${t.toggleOffColor.name===w.name?"ring-white":"ring-transparent"}`,style:{backgroundColor:w.color},children:t.toggleOffColor.name===w.name&&l.jsx(In,{className:"h-6 w-6 text-white"})},w.name))})]})]}),l.jsx(Zs,{title:"Header Animation",children:p([{label:"None",value:"none"},{label:"Shine",value:"shine"},{label:"Wave",value:"wave"}],t.headerAnimation,w=>h("headerAnimation",w))})]})]}),s==="chat_settings"&&l.jsxs("div",{className:"divide-y divide-gray-800",children:[l.jsx(Zs,{title:"UI Style",children:p([{label:"Normal",value:"normal"},{label:"Glossy",value:"glossy"}],t.uiStyle,w=>h("uiStyle",w))}),l.jsx(Zs,{title:"Font Size",children:p([{label:"Small",value:"small"},{label:"Medium",value:"medium"},{label:"Large",value:"large"}],t.fontSize,w=>h("fontSize",w))}),l.jsxs("div",{className:"px-6 py-4 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-white",children:"Enable Animations"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Enable/disable all UI animations."})]}),l.jsx(Is,{checked:t.animationsEnabled,onChange:w=>h("animationsEnabled",w)})]})]})]})]})},rz=()=>{const t=Ue(),{currentUser:e}=Te(),[n,r]=b.useState([]),[s,i]=b.useState(!0),[o,a]=b.useState("Follows"),[c,d]=b.useState(new Set);b.useEffect(()=>{(async()=>{if(e){i(!0);try{const j=(await Dh(e.id)).map(A=>{const ee=Hk.find(H=>H.id===A.fromUserId);return{...A,fromUser:ee}});r(j)}catch(P){console.error("Failed to load notifications:",P)}finally{i(!1)}}})()},[e]);const h=async(I,P)=>{I.stopPropagation(),console.log("Mock delete notification",P)},f=async I=>{console.log("Mock mark as read",I)},p=async()=>{console.log("Mock mark all as read")},g=async(I,P)=>{I.stopPropagation(),console.log("Mock accept follow",P.id)},w=async(I,P)=>{I.stopPropagation(),console.log("Mock decline follow",P.id)},T=async(I,P)=>{I.stopPropagation(),console.log("Mock follow back",P.id)},C=I=>{switch(f(I.id),I.type){case"message":I.chatId?t(`/chat/${I.chatId}`):I.fromUserId&&t(`/chat/${I.fromUserId}`);break;case"follow_success":case"follow_request_accepted":I.fromUserId&&t(`/contact/${I.fromUserId}`);break}},_=I=>{if(!I)return"";const P=I.toDate?I.toDate():new Date(I),A=Math.floor((new Date().getTime()-P.getTime())/1e3);return A<60?"Just now":A<3600?`${Math.floor(A/60)}m`:A<86400?`${Math.floor(A/3600)}h`:A<604800?`${Math.floor(A/86400)}d`:`${Math.floor(A/604800)}w`},v=I=>{var j;const P=((j=I.fromUser)==null?void 0:j.name)||"Someone";switch(I.type){case"follow_request":return{text:`${P} requested to follow you`,action:"follow_request",icon:""};case"follow_success":return{text:`${P} started following you`,action:"follow_back",icon:""};case"follow_request_accepted":return{text:`${P} accepted your follow request`,action:"none",icon:""};case"message":return{text:`${P} sent you a message`,action:"none",icon:""};default:return{text:I.message||"New notification",action:"none",icon:""}}},x=I=>{const P=[],j=[],A=[],ee=new Date;return I.forEach(H=>{var U,W;const Ee=((W=(U=H.createdAt)==null?void 0:U.toDate)==null?void 0:W.call(U))||new Date(H.createdAt),Z=Math.floor((ee.getTime()-Ee.getTime())/(1e3*60*60*24));Z===0?P.push(H):Z<7?j.push(H):A.push(H)}),{today:P,thisWeek:j,earlier:A}},R=n.filter(I=>{switch(o){case"Follows":return["follow_request","follow_success","follow_request_accepted"].includes(I.type);case"Requests":return I.type==="follow_request";default:return!0}}),{today:D,thisWeek:V,earlier:S}=x(R),E=n.filter(I=>!I.read).length,N=I=>{var A,ee;const P=v(I),j=c.has(I.id);return l.jsxs("div",{onClick:()=>C(I),className:`flex items-start gap-3 p-4 hover:bg-[#202c33] cursor-pointer transition-all border-b border-gray-800 ${I.read?"":"bg-[#1a2730]"}`,children:[l.jsxs("div",{className:"flex-shrink-0 relative",children:[(A=I.fromUser)!=null&&A.avatar?l.jsx("img",{src:I.fromUser.avatar,alt:I.fromUser.name,className:"w-12 h-12 rounded-full object-cover"}):l.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700 flex items-center justify-center text-2xl",children:P.icon}),!I.read&&l.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-primary rounded-full border-2 border-[#111b21]"})]}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("p",{className:"text-sm text-white leading-relaxed",children:[l.jsx("span",{className:"font-semibold",children:((ee=I.fromUser)==null?void 0:ee.name)||"Someone"})," ",l.jsx("span",{className:"text-gray-300",children:P.text.substring(P.text.indexOf(" "))})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:_(I.createdAt)}),P.action==="follow_request"&&l.jsxs("div",{className:"flex gap-2 mt-3",children:[l.jsx("button",{onClick:H=>g(H,I),disabled:j,className:"flex-1 bg-primary hover:bg-primary-hover text-white text-sm font-semibold py-1.5 px-4 rounded-lg transition-colors disabled:opacity-50",children:j?"Processing...":"Confirm"}),l.jsx("button",{onClick:H=>w(H,I),disabled:j,className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white text-sm font-semibold py-1.5 px-4 rounded-lg transition-colors disabled:opacity-50",children:"Delete"})]}),P.action==="follow_back"&&I.fromUser&&l.jsx("button",{onClick:H=>T(H,I),disabled:j,className:"mt-3 bg-primary hover:bg-primary-hover text-white text-sm font-semibold py-1.5 px-6 rounded-lg transition-colors disabled:opacity-50",children:j?"Processing...":I.fromUser.isPrivate?"Request":"Follow Back"})]}),l.jsx("button",{onClick:H=>h(H,I.id),className:"text-gray-500 hover:text-red-400 p-1 transition-colors flex-shrink-0",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},I.id)};return l.jsx(rn,{title:"Notifications",onBack:()=>t("/settings"),children:l.jsxs("div",{className:"flex-grow overflow-y-auto bg-[#111b21]",children:[l.jsx("div",{className:"sticky top-0 z-10 bg-[#111b21] border-b border-gray-800",children:l.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[l.jsx("div",{className:"flex gap-3 overflow-x-auto no-scrollbar",children:["Follows","Requests"].map(I=>l.jsx("button",{onClick:()=>a(I),className:`px-4 py-1.5 rounded-full text-sm font-semibold whitespace-nowrap transition-all ${o===I?"bg-primary text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:I},I))}),E>0&&l.jsx("button",{onClick:p,className:"text-primary text-sm font-semibold whitespace-nowrap hover:underline",children:"Mark all read"})]})}),s?l.jsx("div",{className:"flex items-center justify-center p-20",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):R.length===0?l.jsxs("div",{className:"flex flex-col items-center justify-center p-20 text-center",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"No notifications yet"}),l.jsx("p",{className:"text-sm text-gray-400 max-w-xs",children:o==="Requests"?"You don't have any follow requests":"You don't have any follow notifications"})]}):l.jsxs("div",{children:[D.length>0&&l.jsxs("div",{children:[l.jsx("div",{className:"px-4 py-2 bg-[#0d1418]",children:l.jsx("h3",{className:"text-sm font-semibold text-gray-400",children:"Today"})}),D.map(N)]}),V.length>0&&l.jsxs("div",{children:[l.jsx("div",{className:"px-4 py-2 bg-[#0d1418]",children:l.jsx("h3",{className:"text-sm font-semibold text-gray-400",children:"This Week"})}),V.map(N)]}),S.length>0&&l.jsxs("div",{children:[l.jsx("div",{className:"px-4 py-2 bg-[#0d1418]",children:l.jsx("h3",{className:"text-sm font-semibold text-gray-400",children:"Earlier"})}),S.map(N)]})]})]})})},sz=()=>{const t=Ue();return l.jsx(rn,{title:"Storage and data",onBack:()=>t("/settings"),children:l.jsxs("div",{className:"p-6 text-white",children:[l.jsx("p",{children:"Storage and data settings will be displayed here."}),l.jsx("p",{className:"mt-4 text-gray-400",children:"Manage network usage and auto-download settings."})]})})},iz=()=>{const t=Ue();return l.jsx(rn,{title:"Help",onBack:()=>t("/settings"),children:l.jsxs("div",{className:"p-6 text-white",children:[l.jsx("p",{children:"Help and support information will be displayed here."}),l.jsx("p",{className:"mt-4 text-gray-400",children:"Access the Help Center, contact support, and view our privacy policy."})]})})},pg=({user:t,onFollowChange:e,className:n=""})=>{const{currentUser:r,updateCurrentUser:s}=Te(),{showToast:i}=Vh(),[o,a]=b.useState(!1),[c,d]=b.useState(t.isFollowedByCurrentUser||!1),[h,f]=b.useState(!1);if(!r||t.id===r.id)return null;const p=async T=>{if(T.stopPropagation(),o)return;a(!0);const C=c;try{c?(d(!1),await Ob(t.id),e&&e(!1)):t.isPrivate?(f(!0),await new Promise(_=>setTimeout(_,500)),i("Follow request sent","success")):(d(!0),await Vb(t.id),e&&e(!0))}catch(_){console.error("Follow action failed:",_),d(C),f(!1),i("Action failed. Please try again.","error")}finally{a(!1)}},g=()=>o?"...":h?"Requested":c?"Following":"Follow",w=()=>c||h?"bg-[#2a3942] text-white hover:bg-[#374248]":"bg-primary text-white hover:bg-primary-hover";return l.jsx("button",{onClick:p,disabled:o,className:`px-4 py-1.5 rounded-full text-sm font-semibold transition-colors ${w()} ${n}`,children:g()})},oz=({users:t,loading:e,emptyMessage:n="No users found."})=>{const r=Ue(),{currentUser:s,addConversation:i,setSelectedChat:o,conversations:a}=Te(),c=d=>{if(!s)return;const h=a.find(f=>{var p;return f.conversationType==="INDIVIDUAL"&&((p=f.participants)==null?void 0:p.includes(d.id))});if(h)o(h),r(`/chat/${d.id}`);else{const f={id:d.id,conversationType:"INDIVIDUAL",name:d.name,profileImage:d.avatar,isOnline:d.isOnline,lastMessage:"",lastMessageAt:new Date().toISOString(),lastMessageType:"text",lastMessageSentById:"",lastMessageSentByName:"",unreadCount:0,participants:[s.id,d.id],isLocked:!1,isVanishMode:!1};i(f),o(f),r(`/chat/${d.id}`)}};return e?l.jsx("div",{className:"flex justify-center p-8",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):t.length===0?l.jsx("div",{className:"flex justify-center p-8 text-gray-400",children:n}):l.jsx("div",{className:"flex flex-col",children:t.map(d=>l.jsxs("div",{onClick:()=>c(d),className:"flex items-center justify-between p-4 hover:bg-[#202c33] cursor-pointer border-b border-gray-800 transition-colors",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("img",{src:d.avatar,alt:d.name,className:"w-12 h-12 rounded-full object-cover"}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-white font-semibold",children:d.name}),l.jsx("p",{className:"text-gray-400 text-sm truncate max-w-[200px]",children:d.about||d.email}),d.followerCount!==void 0&&l.jsxs("p",{className:"text-xs text-gray-500",children:[d.followerCount," followers"]})]})]}),l.jsx(pg,{user:d})]},d.id))})},az=()=>{const t=Ue(),{currentUser:e}=Te(),[n,r]=b.useState("Discover"),[s,i]=b.useState(""),[o,a]=b.useState([]),[c,d]=b.useState(!1);b.useEffect(()=>{h()},[n,e]),b.useEffect(()=>{const f=setTimeout(()=>{n==="Discover"&&h()},500);return()=>clearTimeout(f)},[s]);const h=async()=>{if(e){d(!0);try{let f=[];if(n==="Discover")if(s)f=await Mb(s);else{const p=await vv(),w=(await Bm(e.id)).map(T=>T.id);f=p.filter(T=>T.id!==e.id&&!w.includes(T.id))}else n==="Following"?f=await Bm(e.id):n==="Followers"&&(f=await Lb(e.id));a(f)}catch(f){console.error("Error fetching users:",f)}finally{d(!1)}}};return l.jsxs(rn,{title:"Discover People",onBack:()=>t("/"),children:[l.jsx("div",{className:"p-4 bg-[#202c33]",children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(Si,{className:"h-5 w-5 text-gray-400"})}),l.jsx("input",{type:"text",placeholder:"Search people...",className:"w-full bg-[#111b21] text-white rounded-lg pl-10 pr-4 py-2 focus:outline-none focus:ring-1 focus:ring-primary",value:s,onChange:f=>i(f.target.value)})]})}),l.jsx("div",{className:"flex border-b border-gray-700 bg-[#111b21]",children:["Discover","Following","Followers"].map(f=>l.jsx("button",{onClick:()=>{r(f),i("")},className:`flex-1 p-3 text-sm font-semibold transition-colors ${n===f?"text-primary border-b-2 border-primary":"text-gray-400 hover:text-gray-200"}`,children:f.toUpperCase()},f))}),l.jsx("div",{className:"flex-1 overflow-y-auto bg-[#111b21]",children:l.jsx(oz,{users:o,loading:c,emptyMessage:n==="Discover"?"No users found.":n==="Following"?"You are not following anyone yet.":"You have no followers yet."})})]})},lz=()=>{const{activeCall:t,hangUp:e,toggleMute:n,toggleVideo:r,toggleSpeaker:s,switchCamera:i}=Te(),[o,a]=b.useState("00:00"),[c,d]=b.useState(!1);if(b.useEffect(()=>{if((t==null?void 0:t.type)==="video"){const _=setTimeout(()=>{d(!0)},5e3);return()=>clearTimeout(_)}},[t==null?void 0:t.type]),b.useEffect(()=>{if((t==null?void 0:t.status)==="active"&&t.startTime){const _=setInterval(()=>{const v=Math.floor((Date.now()-t.startTime)/1e3),x=Math.floor(v/60).toString().padStart(2,"0"),R=(v%60).toString().padStart(2,"0");a(`${x}:${R}`)},1e3);return()=>{clearInterval(_)}}},[t==null?void 0:t.status,t==null?void 0:t.startTime]),!t)return l.jsx("div",{className:"flex flex-col items-center justify-center h-screen bg-[#111b21] text-white",children:l.jsx("h1",{className:"text-2xl",children:"Call ended or invalid"})});const{contact:h,status:f,isMuted:p,isVideoOff:g,isSpeaker:w,type:T}=t,C=()=>{switch(f){case"calling":return"Calling...";case"ringing":return"Ringing...";case"active":return o;default:return"Connecting..."}};return l.jsxs("div",{className:"flex flex-col h-screen w-screen bg-[#111b21] text-white overflow-hidden",children:[l.jsxs("div",{className:"relative flex-grow",children:[l.jsx("div",{className:"absolute inset-0 bg-black flex items-center justify-center",children:T==="video"&&c?l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("img",{src:h.avatar,alt:h.name,className:"h-32 w-32 rounded-full opacity-50"}),l.jsxs("p",{className:"mt-4 text-gray-400",children:[h.name,"'s video is off"]})]}):T==="voice"?l.jsx("div",{className:"flex flex-col items-center",children:l.jsx("img",{src:h.avatar,alt:h.name,className:"h-48 w-48 rounded-full"})}):l.jsx("div",{className:"text-gray-400",children:" Remote Video Feed Placeholder"})}),T==="video"&&l.jsx("div",{className:"absolute top-4 right-4 h-32 w-24 md:h-40 md:w-32 bg-gray-900 rounded-lg border border-gray-700 flex items-center justify-center overflow-hidden",children:g?l.jsx("p",{className:"text-gray-400 text-sm p-2 text-center",children:"Your video is off"}):l.jsx("p",{className:"text-sm text-gray-400",children:"Your Video"})})]}),l.jsxs("div",{className:"absolute top-0 left-0 right-0 p-6 bg-gradient-to-b from-black/50 to-transparent",children:[l.jsx("h1",{className:"text-3xl font-semibold",children:h.name}),l.jsx("p",{className:"text-gray-300",children:C()})]}),l.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-8 bg-gradient-to-t from-black/50 to-transparent flex justify-center items-center space-x-4 md:space-x-6",children:[l.jsx("button",{onClick:s,className:"flex flex-col items-center justify-center text-gray-300 hover:text-white",children:l.jsx("div",{className:"p-4 bg-white/10 rounded-full",children:w?l.jsx(f4,{className:"h-6 w-6"}):l.jsx(p4,{className:"h-6 w-6"})})}),l.jsx("button",{onClick:n,className:"flex flex-col items-center justify-center text-gray-300 hover:text-white",children:l.jsx("div",{className:"p-4 bg-white/10 rounded-full",children:p?l.jsx(MS,{className:"h-6 w-6"}):l.jsx(pm,{className:"h-6 w-6"})})}),T==="video"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:r,className:"flex flex-col items-center justify-center text-gray-300 hover:text-white",children:l.jsx("div",{className:"p-4 bg-white/10 rounded-full",children:g?l.jsx(g4,{className:"h-6 w-6"}):l.jsx(DS,{className:"h-6 w-6"})})}),!g&&l.jsx("button",{onClick:i,className:"flex flex-col items-center justify-center text-gray-300 hover:text-white",children:l.jsx("div",{className:"p-4 bg-white/10 rounded-full",children:l.jsx(y4,{className:"h-6 w-6"})})})]}),l.jsx("button",{onClick:e,className:"flex flex-col items-center justify-center text-white",children:l.jsx("div",{className:"p-4 bg-red-600 rounded-full",children:l.jsx(ur,{className:"h-6 w-6 transform -rotate-45"})})}),l.jsx("button",{className:"flex flex-col items-center justify-center text-gray-300 hover:text-white",children:l.jsx("div",{className:"p-4 bg-white/10 rounded-full",children:l.jsx(m4,{className:"h-6 w-6"})})})]})]})},cz=()=>{const{activeCall:t,hangUp:e,toggleMute:n}=Te(),r=Ue(),[s,i]=b.useState("00:00"),o=b.useRef(null),a=w7();if(b.useEffect(()=>{if((t==null?void 0:t.status)==="active"&&t.startTime){const p=setInterval(()=>{const g=Math.floor((Date.now()-t.startTime)/1e3),w=Math.floor(g/60).toString().padStart(2,"0"),T=(g%60).toString().padStart(2,"0");i(`${w}:${T}`)},1e3);return()=>{clearInterval(p)}}},[t==null?void 0:t.status,t==null?void 0:t.startTime]),!t)return null;const{contact:c,isMuted:d,type:h}=t,f=()=>{r(`/call/${c.id}`)};return l.jsxs(l.Fragment,{children:[l.jsx("div",{ref:o,className:"fixed inset-4 pointer-events-none z-40"}),l.jsxs(Nn.div,{drag:!0,dragConstraints:o,dragElastic:.1,dragMomentum:!1,initial:{x:0,y:0,scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},whileHover:{scale:1.02},whileTap:{scale:.98},className:"fixed bottom-24 right-6 w-72 bg-[#202c33] rounded-xl shadow-2xl overflow-hidden z-50 border border-gray-700 cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"bg-[#2a3942] p-2 flex items-center justify-between cursor-grab active:cursor-grabbing",onPointerDown:p=>a.start(p),children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),l.jsx("span",{className:"text-xs text-gray-300 font-medium uppercase tracking-wider",children:h==="video"?"Video Call":"Voice Call"})]}),l.jsx("span",{className:"text-xs text-gray-400 font-mono",children:s})]}),l.jsxs("div",{className:"p-4 flex flex-col items-center justify-center relative bg-[#111b21]",children:[l.jsxs("div",{className:"relative mb-3",children:[l.jsx("img",{src:c.avatar,alt:c.name,className:"h-16 w-16 rounded-full border-2 border-[#2a3942] shadow-md"}),d&&l.jsx("div",{className:"absolute -bottom-1 -right-1 bg-red-500 rounded-full p-1 border-2 border-[#111b21]",children:l.jsx(pm,{className:"h-3 w-3 text-white"})})]}),l.jsx("p",{className:"text-white font-semibold text-lg truncate w-full text-center mb-1",children:c.name}),l.jsx("p",{className:"text-xs text-[#00a884] font-medium",children:"Tap to return"}),l.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center gap-4 backdrop-blur-sm",children:[l.jsx("button",{onClick:p=>{p.stopPropagation(),n()},className:`p-3 rounded-full transition-colors ${d?"bg-white text-black":"bg-white/20 text-white hover:bg-white/30"}`,children:d?l.jsx(MS,{className:"h-5 w-5"}):l.jsx(pm,{className:"h-5 w-5"})}),l.jsx("button",{onClick:p=>{p.stopPropagation(),e()},className:"p-3 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors shadow-lg",children:l.jsx(ur,{className:"h-5 w-5"})}),l.jsx("button",{onClick:p=>{p.stopPropagation(),f()},className:"p-3 bg-[#00a884] text-white rounded-full hover:bg-[#008f6f] transition-colors shadow-lg",children:l.jsx(w4,{className:"h-5 w-5"})})]})]})]})]})},uz=()=>{const{inAppNotification:t,clearInAppNotification:e,answerCall:n,rejectCall:r}=Te(),[s,i]=b.useState(!1);return b.useEffect(()=>{if(t){i(!0);const o=setTimeout(()=>{i(!1),setTimeout(e,300)},t.type==="call"?1e4:4e3);return()=>clearTimeout(o)}},[t,e]),t?l.jsx("div",{className:`fixed top-4 left-1/2 -translate-x-1/2 w-[90%] max-w-md bg-[#2a3942] rounded-lg shadow-2xl p-4 z-50 ${s?"animate-slide-down":"animate-slide-up"}`,children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"flex-shrink-0 pt-0.5",children:t.type==="call"?l.jsx(ur,{className:"h-6 w-6 text-emerald-400"}):l.jsx(nh,{className:"h-6 w-6 text-cyan-400"})}),l.jsxs("div",{className:"ml-3 w-0 flex-1",children:[l.jsx("p",{className:"text-sm font-medium text-white",children:t.title}),l.jsx("p",{className:"mt-1 text-sm text-gray-300",children:t.body}),t.type==="call"&&l.jsxs("div",{className:"mt-3 flex space-x-4",children:[l.jsx("button",{onClick:n,className:"bg-green-500 text-white px-3 py-1 rounded-md text-sm font-semibold",children:"Answer"}),l.jsx("button",{onClick:r,className:"bg-red-500 text-white px-3 py-1 rounded-md text-sm font-semibold",children:"Decline"})]})]}),l.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:l.jsxs("button",{onClick:()=>i(!1),className:"inline-flex text-gray-400 hover:text-gray-200",children:[l.jsx("span",{className:"sr-only",children:"Close"}),l.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})}):null},dz=({isOpen:t,onClose:e,onSubmit:n,title:r,currentPasscode:s})=>{const[i,o]=b.useState(""),[a,c]=b.useState(""),[d,h]=b.useState(""),[f,p]=b.useState(""),g=T=>{if(T.preventDefault(),p(""),i!==s){p("Current passcode is incorrect");return}if(!a||a.length<4){p("New passcode must be at least 4 characters");return}if(a!==d){p("Passcodes do not match");return}n(i,a),w()},w=()=>{o(""),c(""),h(""),p(""),e()};return t?l.jsx(Hv,{children:t&&l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx(Nn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/70",onClick:w}),l.jsxs(Nn.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",duration:.3},className:"relative bg-[#202c33] rounded-lg p-6 w-full max-w-md shadow-2xl",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h2",{className:"text-xl font-semibold text-white",children:r}),l.jsx("button",{onClick:w,className:"text-gray-400 hover:text-white transition-colors",children:l.jsx(Nr,{className:"h-6 w-6"})})]}),l.jsxs("form",{onSubmit:g,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"current",className:"block text-sm font-medium text-gray-300 mb-2",children:"Current Passcode"}),l.jsx("input",{type:"password",id:"current",value:i,onChange:T=>o(T.target.value),className:"w-full px-4 py-2 bg-[#111b21] text-white rounded-lg border border-gray-600 focus:border-primary focus:outline-none",placeholder:"Enter current passcode",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"newPasscode",className:"block text-sm font-medium text-gray-300 mb-2",children:"New Passcode"}),l.jsx("input",{type:"password",id:"newPasscode",value:a,onChange:T=>c(T.target.value),className:"w-full px-4 py-2 bg-[#111b21] text-white rounded-lg border border-gray-600 focus:border-primary focus:outline-none",placeholder:"Enter new passcode",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirmPasscode",className:"block text-sm font-medium text-gray-300 mb-2",children:"Confirm Passcode"}),l.jsx("input",{type:"password",id:"confirmPasscode",value:d,onChange:T=>h(T.target.value),className:"w-full px-4 py-2 bg-[#111b21] text-white rounded-lg border border-gray-600 focus:border-primary focus:outline-none",placeholder:"Re-enter new passcode",required:!0})]}),f&&l.jsx(Nn.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 bg-red-500/20 border border-red-500 rounded-lg text-red-400 text-sm",children:f}),l.jsxs("div",{className:"flex space-x-3 pt-4",children:[l.jsx("button",{type:"button",onClick:w,className:"flex-1 px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"}),l.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/80 transition-colors",children:"Change Passcode"})]})]})]})]})}):null},hz=()=>{const{passcodeSettings:t,updatePasscodeSettings:e}=Te(),n=Ue(),[r,s]=b.useState(!1),[i,o]=b.useState(null),a=(f,p)=>{e({[f]:{...t[f],enabled:p}})},c=f=>{o(f),s(!0)},d=(f,p)=>{i&&e({[i]:{...t[i],passcode:p}})},h=f=>{switch(f){case"lockedChats":return"Change Locked Chats Passcode";case"vanishMode":return"Change Vanish Mode Passcode";case"dailyChatLock":return"Change Daily Chat Lock Passcode";default:return"Change Passcode"}};return l.jsxs(rn,{title:"Passcode Manager",onBack:()=>n("/settings"),children:[l.jsxs("div",{className:"py-4",children:[l.jsx("div",{className:"px-6 py-4",children:l.jsx("p",{className:"text-gray-400 text-sm",children:"Manage privacy features and their passcodes. When a feature is disabled, it cannot be used anywhere in the app."})}),l.jsxs("div",{className:"bg-[#202c33] my-2",children:[l.jsxs("div",{className:"flex items-center justify-between p-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-white",children:"Locked Chats"}),l.jsx("p",{className:"text-gray-400 text-sm",children:"Hide chats in a password-protected folder."})]}),l.jsx(Is,{checked:t.lockedChats.enabled,onChange:f=>a("lockedChats",f)})]}),l.jsx("div",{className:"px-4 pb-4",children:l.jsxs("button",{onClick:()=>c("lockedChats"),disabled:!t.lockedChats.enabled,className:"text-primary disabled:text-gray-500 disabled:cursor-not-allowed",children:["Change Passcode (Current: ",t.lockedChats.passcode,")"]})})]}),l.jsxs("div",{className:"bg-[#202c33] my-2",children:[l.jsxs("div",{className:"flex items-center justify-between p-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-white",children:"Vanish Mode"}),l.jsx("p",{className:"text-gray-400 text-sm",children:"Messages disappear after they are seen."})]}),l.jsx(Is,{checked:t.vanishMode.enabled,onChange:f=>a("vanishMode",f)})]}),l.jsx("div",{className:"px-4 pb-4",children:l.jsxs("button",{onClick:()=>c("vanishMode"),disabled:!t.vanishMode.enabled,className:"text-primary disabled:text-gray-500 disabled:cursor-not-allowed",children:["Change Passcode (Current: ",t.vanishMode.passcode,")"]})})]}),l.jsxs("div",{className:"bg-[#202c33] my-2",children:[l.jsxs("div",{className:"flex items-center justify-between p-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-white",children:"Daily Chat Lock"}),l.jsx("p",{className:"text-gray-400 text-sm",children:"Lock all messages within a specific day."})]}),l.jsx(Is,{checked:t.dailyChatLock.enabled,onChange:f=>a("dailyChatLock",f)})]}),l.jsx("div",{className:"px-4 pb-4",children:l.jsxs("button",{onClick:()=>c("dailyChatLock"),disabled:!t.dailyChatLock.enabled,className:"text-primary disabled:text-gray-500 disabled:cursor-not-allowed",children:["Change Passcode (Current: ",t.dailyChatLock.passcode,")"]})})]})]}),i&&l.jsx(dz,{isOpen:r,onClose:()=>{s(!1),o(null)},onSubmit:d,title:h(i),currentPasscode:t[i].passcode})]})},hl=({label:t,type:e,value:n,onChange:r,placeholder:s,disabled:i,id:o})=>l.jsxs("div",{className:"flex flex-col space-y-1.5",children:[l.jsx("label",{htmlFor:o,className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t}),l.jsx("input",{id:o,type:e,value:n,onChange:r,placeholder:s,disabled:i,className:"px-4 py-3 bg-gray-50 dark:bg-[#2a3942] border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#00a884] focus:border-transparent transition-all text-gray-900 dark:text-white placeholder-gray-400"})]}),fz=({onSwitch:t})=>{const[e,n]=b.useState(""),[r,s]=b.useState(""),[i,o]=b.useState(!1),[a,c]=b.useState(""),{login:d}=$s(),h=async f=>{f.preventDefault(),c(""),o(!0);try{await d(e,r)}catch(p){console.error("Login error:",p),c(p.code==="auth/user-not-found"||p.code==="auth/wrong-password"||p.code==="auth/invalid-credential"?"Invalid email or password.":"Login failed. Please try again.")}finally{o(!1)}};return l.jsxs(Nn.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"w-full max-w-md p-8",children:[l.jsxs("div",{className:"mb-8 text-center",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Welcome Back"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Sign in to continue to WhatsApp"})]}),l.jsxs("form",{onSubmit:h,className:"space-y-6",children:[l.jsx(hl,{id:"email",label:"Email Address",type:"email",value:e,onChange:f=>n(f.target.value),placeholder:"name@example.com",disabled:i}),l.jsx(hl,{id:"password",label:"Password",type:"password",value:r,onChange:f=>s(f.target.value),placeholder:"",disabled:i}),a&&l.jsx(Nn.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-600 dark:text-red-400 text-sm text-center",children:a}),l.jsx("button",{type:"submit",disabled:i,className:"w-full py-3.5 bg-[#00a884] hover:bg-[#008f6f] text-white font-semibold rounded-lg shadow-lg shadow-[#00a884]/30 transition-all transform hover:-translate-y-0.5 disabled:opacity-70 disabled:cursor-not-allowed disabled:transform-none",children:i?l.jsxs("span",{className:"flex items-center justify-center",children:[l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing In..."]}):"Sign In"})]}),l.jsx("div",{className:"mt-8 text-center",children:l.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Don't have an account?"," ",l.jsx("button",{onClick:t,className:"text-[#00a884] font-semibold hover:underline focus:outline-none",children:"Sign Up"})]})})]})},pz=({onSwitch:t})=>{const[e,n]=b.useState(""),[r,s]=b.useState(""),[i,o]=b.useState(""),[a,c]=b.useState(!1),[d,h]=b.useState(""),{signup:f}=$s(),p=async g=>{if(g.preventDefault(),h(""),c(!0),!i.trim()){h("Please enter your name"),c(!1);return}try{await f(e,r,i)}catch(w){console.error("Signup error:",w);const T=w.code==="auth/email-already-in-use"?"This email is already registered. Please log in.":w.code==="auth/weak-password"?"Password should be at least 6 characters.":w.code==="auth/invalid-email"?"Please enter a valid email address.":"Signup failed. Please try again.";h(T)}finally{c(!1)}};return l.jsxs(Nn.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"w-full max-w-md p-8",children:[l.jsxs("div",{className:"mb-8 text-center",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Create Account"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Join the community today"})]}),l.jsxs("form",{onSubmit:p,className:"space-y-6",children:[l.jsx(hl,{id:"name",label:"Full Name",type:"text",value:i,onChange:g=>o(g.target.value),placeholder:"John Doe",disabled:a}),l.jsx(hl,{id:"email",label:"Email Address",type:"email",value:e,onChange:g=>n(g.target.value),placeholder:"name@example.com",disabled:a}),l.jsx(hl,{id:"password",label:"Password",type:"password",value:r,onChange:g=>s(g.target.value),placeholder:"Create a password",disabled:a}),d&&l.jsx(Nn.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-600 dark:text-red-400 text-sm text-center",children:d}),l.jsx("button",{type:"submit",disabled:a,className:"w-full py-3.5 bg-[#00a884] hover:bg-[#008f6f] text-white font-semibold rounded-lg shadow-lg shadow-[#00a884]/30 transition-all transform hover:-translate-y-0.5 disabled:opacity-70 disabled:cursor-not-allowed disabled:transform-none",children:a?l.jsxs("span",{className:"flex items-center justify-center",children:[l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Account..."]}):"Sign Up"})]}),l.jsx("div",{className:"mt-8 text-center",children:l.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Already have an account?"," ",l.jsx("button",{onClick:t,className:"text-[#00a884] font-semibold hover:underline focus:outline-none",children:"Sign In"})]})})]})},mz=()=>{const[t,e]=b.useState(!0),{currentUser:n}=$s(),r=Ue(),s=hr();return b.useEffect(()=>{var i,o;if(n){const a=((o=(i=s.state)==null?void 0:i.from)==null?void 0:o.pathname)||"/";r(a,{replace:!0})}},[n,r,s]),l.jsxs("div",{className:"min-h-screen bg-[#d1d7db] dark:bg-[#111b21] flex items-center justify-center p-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 left-0 w-full h-32 bg-[#00a884] z-0"}),l.jsxs("div",{className:"w-full max-w-5xl bg-white dark:bg-[#202c33] rounded-xl shadow-2xl overflow-hidden z-10 flex flex-col md:flex-row h-[85vh] md:h-[800px] max-h-[90vh]",children:[l.jsxs("div",{className:"hidden md:flex flex-col justify-center items-center w-1/2 bg-gray-50 dark:bg-[#2a3942] p-12 text-center border-r border-gray-100 dark:border-gray-700",children:[l.jsx(Nn.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},className:"mb-8",children:l.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-[#25d366] to-[#128c7e] rounded-full flex items-center justify-center shadow-lg mb-6 mx-auto",children:l.jsx("svg",{viewBox:"0 0 24 24",width:"80",height:"80",fill:"white",children:l.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})})}),l.jsx("h1",{className:"text-4xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Stay Connected"}),l.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 max-w-xs mx-auto leading-relaxed",children:"Experience real-time messaging, high-quality calls, and secure conversations with friends and family."})]}),l.jsx("div",{className:"w-full md:w-1/2 flex items-center justify-center bg-white dark:bg-[#202c33] relative",children:l.jsx(Hv,{mode:"wait",children:t?l.jsx(fz,{onSwitch:()=>e(!1)},"login"):l.jsx(pz,{onSwitch:()=>e(!0)},"signup")})})]}),l.jsx("div",{className:"absolute bottom-4 text-center w-full z-0",children:l.jsx("p",{className:"text-gray-500 text-sm",children:" 2024 WhatsApp Clone. Secure & Encrypted."})})]})},gz=()=>{const{currentUser:t,users:e}=Te(),[n,r]=b.useState([]);b.useEffect(()=>{t&&r([])},[t]);const s=a=>e.find(c=>c.id===a),i=async a=>{console.log("Mock accept follow request",a)},o=async a=>{console.log("Mock reject follow request",a)};return t?l.jsxs("div",{className:"p-4 bg-[#111b21] min-h-screen",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Follow Requests"}),n.length===0?l.jsx("p",{className:"text-gray-400",children:"No pending requests."}):l.jsx("div",{className:"space-y-4",children:n.map(a=>{const c=s(a.from);return l.jsxs("div",{className:"flex items-center justify-between bg-gray-800 p-3 rounded-lg",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[c&&l.jsx("img",{src:c.avatar,alt:c.name,className:"h-10 w-10 rounded-full"}),l.jsx("span",{className:"text-white",children:c?c.name:a.from})]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{className:"bg-primary text-white px-3 py-1 rounded-md hover:bg-primary-hover",onClick:()=>i(a.from),children:"Accept"}),l.jsx("button",{className:"bg-gray-600 text-white px-3 py-1 rounded-md hover:bg-gray-500",onClick:()=>o(a.from),children:"Reject"})]})]},a.id)})})]}):null},yz=()=>{const{currentUser:t}=Te(),e=Ue(),[n,r]=b.useState([]),[s,i]=b.useState(!0),[o,a]=b.useState({}),c=async v=>{if(o[v])return o[v];try{const x=await jh(v);if(x)return a(R=>({...R,[v]:x})),x}catch(x){console.error("Failed to fetch user:",x)}return null};b.useEffect(()=>{(async()=>{if(t){i(!0);try{const x=await Dh(t.id);r(x)}catch(x){console.error("Failed to load notifications:",x)}finally{i(!1)}}})()},[t]);const d=async v=>{console.log("Mock accept follow request",v)},h=async v=>{console.log("Mock reject follow request",v)},f=async v=>{console.log("Mock mark as read",v)},p=async()=>{console.log("Mock mark all as read")},g=v=>{if(!v)return"";const x=v.toDate?v.toDate():new Date(v),D=Math.floor((new Date().getTime()-x.getTime())/1e3);return D<60?"Just now":D<3600?`${Math.floor(D/60)}m`:D<86400?`${Math.floor(D/3600)}h`:D<604800?`${Math.floor(D/86400)}d`:`${Math.floor(D/604800)}w`},w=({notification:v})=>{const[x,R]=b.useState(null);if(b.useEffect(()=>{c(v.fromUserId).then(R)},[v.fromUserId]),!x)return l.jsx("div",{className:"flex items-center justify-between py-3 px-4 animate-pulse",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"h-12 w-12 rounded-full bg-gray-700"}),l.jsx("div",{className:"h-4 w-32 bg-gray-700 rounded"})]})});const D=()=>{var V,S;switch(v.type){case"follow_request":return l.jsxs("div",{className:"flex items-center justify-between py-2",children:[l.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[l.jsx("div",{className:"h-12 w-12 rounded-full bg-gray-700 overflow-hidden flex-shrink-0",children:l.jsx("img",{src:x.avatar,alt:x.name,className:"h-full w-full object-cover"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-semibold text-sm text-white truncate",children:x.name}),l.jsx("p",{className:"text-xs text-gray-400",children:"Requested to follow you"})]})]}),l.jsxs("div",{className:"flex space-x-2 ml-3",children:[l.jsx("button",{onClick:()=>d(v.fromUserId),className:"bg-primary text-white px-4 py-1.5 rounded-md text-sm font-semibold hover:bg-primary-hover transition-colors whitespace-nowrap",children:"Confirm"}),l.jsx("button",{onClick:()=>h(v.fromUserId),className:"bg-gray-700 text-white px-4 py-1.5 rounded-md text-sm font-semibold hover:bg-gray-600 transition-colors whitespace-nowrap",children:"Delete"})]})]});case"follow_accepted":return l.jsxs("div",{className:"flex items-center justify-between py-2",children:[l.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[l.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-700 overflow-hidden flex-shrink-0",children:l.jsx("img",{src:x.avatar,alt:x.name,className:"h-full w-full object-cover"})}),l.jsxs("div",{className:"text-sm flex-1 min-w-0",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-white",children:x.name}),l.jsx("span",{className:"text-gray-300 ml-1",children:"accepted your follow request."})]}),l.jsx("span",{className:"text-gray-500 text-xs",children:g(v.createdAt)})]})]}),l.jsx("div",{className:"ml-3",children:l.jsx(pg,{user:x})})]});case"new_follower":return l.jsxs("div",{className:"flex items-center justify-between py-2",children:[l.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[l.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-700 overflow-hidden flex-shrink-0",children:l.jsx("img",{src:x.avatar,alt:x.name,className:"h-full w-full object-cover"})}),l.jsxs("div",{className:"text-sm flex-1 min-w-0",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-white",children:x.name}),l.jsx("span",{className:"text-gray-300 ml-1",children:"started following you."})]}),l.jsx("span",{className:"text-gray-500 text-xs",children:g(v.createdAt)})]})]}),l.jsx("div",{className:"ml-3",children:l.jsx(pg,{user:x})})]});case"status_reaction":return l.jsxs("div",{className:"flex items-center space-x-3 py-2",children:[l.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-700 overflow-hidden flex-shrink-0",children:l.jsx("img",{src:x.avatar,alt:x.name,className:"h-full w-full object-cover"})}),l.jsxs("div",{className:"text-sm flex-1 min-w-0",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-white",children:x.name}),l.jsxs("span",{className:"text-gray-300 ml-1",children:["reacted ",((V=v.metadata)==null?void 0:V.emoji)||""," to your status."]})]}),l.jsx("span",{className:"text-gray-500 text-xs",children:g(v.createdAt)})]})]});case"message":return l.jsxs("div",{className:"flex items-center space-x-3 cursor-pointer hover:bg-gray-800 -mx-4 px-4 py-2 rounded-lg transition-colors",onClick:()=>{var E;return((E=v.metadata)==null?void 0:E.chatId)&&e(`/chat/${v.metadata.chatId}`)},children:[l.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-700 overflow-hidden flex-shrink-0",children:l.jsx("img",{src:x.avatar,alt:x.name,className:"h-full w-full object-cover"})}),l.jsxs("div",{className:"text-sm flex-1 min-w-0",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-white",children:x.name}),l.jsx("span",{className:"text-gray-300 ml-1",children:"sent you a message."})]}),((S=v.metadata)==null?void 0:S.messageContent)&&l.jsx("p",{className:"text-gray-400 text-xs mt-1 truncate",children:v.metadata.messageContent}),l.jsx("span",{className:"text-gray-500 text-xs",children:g(v.createdAt)})]})]});default:return null}};return l.jsx("div",{className:`px-4 ${v.read?"":"bg-[#1a2730]"} hover:bg-[#202c33] transition-colors`,onClick:()=>!v.read&&f(v.id),children:D()})};if(!t)return l.jsx(rn,{title:"Activity",onBack:()=>e("/"),children:l.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"Please log in to view notifications"})});const T=n.filter(v=>!v.read).length,C=n.filter(v=>v.type==="follow_request"),_=n.filter(v=>v.type!=="follow_request");return l.jsx(rn,{title:"Activity",onBack:()=>e("/"),children:l.jsx("div",{className:"bg-[#111b21] min-h-screen text-white",children:s?l.jsx("div",{className:"flex items-center justify-center py-20",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):n.length===0?l.jsxs("div",{className:"text-center py-20 px-4",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("p",{className:"text-lg text-gray-400 mb-2",children:"No notifications yet"}),l.jsx("p",{className:"text-sm text-gray-500",children:"When people interact with you, you'll see it here"})]}):l.jsxs(l.Fragment,{children:[T>0&&l.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center",children:[l.jsxs("p",{className:"text-sm text-gray-400",children:[T," unread notification",T!==1?"s":""]}),l.jsx("button",{onClick:p,className:"text-primary text-sm font-semibold hover:underline",children:"Mark all as read"})]}),C.length>0&&l.jsxs("div",{className:"border-b border-gray-800",children:[l.jsx("h3",{className:"text-base font-semibold px-4 pt-4 pb-2",children:"Follow Requests"}),l.jsx("div",{className:"divide-y divide-gray-800",children:C.map(v=>l.jsx(w,{notification:v},v.id))})]}),_.length>0&&l.jsxs("div",{children:[l.jsx("h3",{className:"text-base font-semibold px-4 pt-4 pb-2",children:"Recent Activity"}),l.jsx("div",{className:"divide-y divide-gray-800",children:_.map(v=>l.jsx(w,{notification:v},v.id))})]})]})})})},on=({children:t})=>{const{currentUser:e,loading:n}=$s(),r=hr(),s=wr.hasValidTokens();return n?l.jsxs("div",{className:"bg-[#111b21] h-screen w-screen flex flex-col items-center justify-center text-white",children:[l.jsx("img",{src:"https://static.whatsapp.net/rsrc.php/v3/y7/r/_DSx_SM7ITE.png",alt:"WhatsApp Logo",className:"w-24 h-24 mb-4"}),l.jsx("p",{className:"text-lg",children:"Loading..."}),l.jsx("div",{className:"mt-4 w-48 h-1 bg-gray-700 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-primary animate-pulse w-full"})})]}):!e&&!s?l.jsx(qR,{to:"/auth",state:{from:r},replace:!0}):l.jsx(l.Fragment,{children:t})},Jk=()=>{const t=!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia),e=!!window.RTCPeerConnection,n=!!navigator.mediaDevices;return{supported:t&&e&&n,details:{getUserMedia:t,RTCPeerConnection:e,mediaDevices:n}}},Zk=async()=>{try{const t=await navigator.permissions.query({name:"camera"}),e=await navigator.permissions.query({name:"microphone"});return{camera:{granted:t.state==="granted",state:t.state},microphone:{granted:e.state==="granted",state:e.state}}}catch{return{camera:{granted:!1,state:"unknown"},microphone:{granted:!1,state:"unknown"}}}},eN=async()=>{try{const t=await navigator.mediaDevices.enumerateDevices();return{cameras:t.filter(e=>e.kind==="videoinput"),microphones:t.filter(e=>e.kind==="audioinput"),speakers:t.filter(e=>e.kind==="audiooutput")}}catch(t){return console.error("Error enumerating devices:",t),{cameras:[],microphones:[],speakers:[]}}},tN=()=>{try{const t=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]}),e=t.iceConnectionState;return t.close(),{success:!0,iceConnectionState:e}}catch(t){return{success:!1,error:t.message}}},nN=async(t=!0,e=!0)=>{try{const n=await navigator.mediaDevices.getUserMedia({video:t?{width:{ideal:1280},height:{ideal:720}}:!1,audio:e?{echoCancellation:!0,noiseSuppression:!0}:!1}),r={video:n.getVideoTracks(),audio:n.getAudioTracks()};return n.getTracks().forEach(s=>s.stop()),{success:!0,stream:n,tracks:r}}catch(n){return{success:!1,error:n.message}}},vz=async()=>{console.log(" Running WebRTC Diagnostics...");const t=Jk();console.log(" Browser Support:",t);const e=await Zk();console.log(" Permissions:",e);const n=await eN();console.log(" Devices:",n);const r=tN();console.log(" Peer Connection:",r);const s=await nN(!0,!0);console.log(" Media Stream:",s);const i={browserSupport:t,permissions:e,devices:n,peerConnection:r,mediaStream:s};return console.log(" WebRTC Diagnostics Complete:",i),i},wz=t=>{console.group(" WebRTC Diagnostic Summary"),console.log("Browser Support:",t.browserSupport.supported?"":""),console.log("  - getUserMedia:",t.browserSupport.details.getUserMedia?"":""),console.log("  - RTCPeerConnection:",t.browserSupport.details.RTCPeerConnection?"":""),console.log("  - MediaDevices:",t.browserSupport.details.mediaDevices?"":""),console.log(`
Permissions:`),console.log("  - Camera:",t.permissions.camera.state,t.permissions.camera.granted?"":""),console.log("  - Microphone:",t.permissions.microphone.state,t.permissions.microphone.granted?"":""),console.log(`
Devices:`),console.log("  - Cameras:",t.devices.cameras.length),console.log("  - Microphones:",t.devices.microphones.length),console.log("  - Speakers:",t.devices.speakers.length),console.log(`
Peer Connection:`,t.peerConnection.success?"":""),t.peerConnection.error&&console.log("  - Error:",t.peerConnection.error),console.log(`
Media Stream:`,t.mediaStream.success?"":""),t.mediaStream.error?console.log("  - Error:",t.mediaStream.error):t.mediaStream.tracks&&(console.log("  - Video Tracks:",t.mediaStream.tracks.video.length),console.log("  - Audio Tracks:",t.mediaStream.tracks.audio.length)),console.groupEnd()};typeof window<"u"&&(window.webrtcTest={checkSupport:Jk,checkPermissions:Zk,listDevices:eN,testPeerConnection:tN,testMediaStream:nN,runDiagnostics:vz,printSummary:wz},console.log(" WebRTC test utilities available at window.webrtcTest"));const t0=()=>{const t="Notification"in window,e="serviceWorker"in navigator;return{supported:t&&e,details:{notificationAPI:t,serviceWorker:e}}},n0=()=>"Notification"in window?Notification.permission:"default",rN=async()=>{if(!("Notification"in window))return{granted:!1,permission:"denied"};try{const t=await Notification.requestPermission();return{granted:t==="granted",permission:t}}catch(t){return console.error("Error requesting notification permission:",t),{granted:!1,permission:Notification.permission}}},sN=(t="Test Notification",e="This is a test notification from WhatsApp Clone")=>{if(!("Notification"in window)){console.error("Notifications not supported");return}if(Notification.permission!=="granted"){console.error("Notification permission not granted");return}const n=new Notification(t,{body:e,icon:"/icon-192x192.png",badge:"/badge-72x72.png",tag:"test-notification"});n.onclick=()=>{console.log("Test notification clicked"),n.close()},setTimeout(()=>{n.close()},5e3)},iN=async()=>{if(!("serviceWorker"in navigator))return{registered:!1,error:"Service Workers not supported"};try{const t=await navigator.serviceWorker.getRegistration();return{registered:!!t,registration:t}}catch(t){return{registered:!1,error:t.message}}},xz=async()=>{console.log(" Running Notification Diagnostics...");const t=t0();console.log(" Browser Support:",t);const e=n0();console.log(" Permission:",e);const n=await iN();console.log(" Service Worker:",n);const r={browserSupport:t,permission:e,serviceWorker:n};return console.log(" Notification Diagnostics Complete:",r),r},_z=t=>{switch(console.group(" Notification Diagnostic Summary"),console.log("Browser Support:",t.browserSupport.supported?"":""),console.log("  - Notification API:",t.browserSupport.details.notificationAPI?"":""),console.log("  - Service Worker:",t.browserSupport.details.serviceWorker?"":""),console.log(`
Permission:`,t.permission),t.permission){case"granted":console.log("   Notifications enabled");break;case"denied":console.log("   Notifications blocked");break;case"default":console.log("   Permission not requested yet");break}console.log(`
Service Worker:`,t.serviceWorker.registered?" Registered":" Not registered"),t.serviceWorker.error&&console.log("  - Error:",t.serviceWorker.error),console.groupEnd()},Tz=async()=>{console.group(" Testing Notification Flow");const t=t0();if(console.log("1. Support check:",t.supported?"":""),!t.supported){console.error(" Notifications not supported"),console.groupEnd();return}const e=n0();if(console.log("2. Current permission:",e),e!=="granted"){console.log("3. Requesting permission...");const n=await rN();if(console.log("   Permission result:",n),!n.granted){console.error(" Permission not granted"),console.groupEnd();return}}else console.log("3. Permission already granted ");console.log("4. Showing test notification..."),sN(),console.log(" Notification flow test complete"),console.groupEnd()};typeof window<"u"&&(window.notificationTest={checkSupport:t0,getPermission:n0,requestPermission:rN,showTest:sN,checkServiceWorker:iN,runDiagnostics:xz,printSummary:_z,testFlow:Tz},console.log(" Notification test utilities available at window.notificationTest"));const Ez=()=>{const{id:t}=dy();return t?l.jsx(Xk,{userId:t}):null},Sz=()=>{const t=Ue();return l.jsx(fg,{onHeaderClick:e=>{e&&t(`/contact-info/${e}`)}})},Iz=["","","","","",""],bz=()=>{const{activeStatusUser:t,closeStatusViewer:e,nextStatusUser:n,prevStatusUser:r,reactToStatus:s,statuses:i}=Te(),[o,a]=b.useState(i.find(w=>w.userId===(t==null?void 0:t.id))),[c,d]=b.useState(0),[h,f]=b.useState(!1);if(b.useEffect(()=>{a(i.find(w=>w.userId===(t==null?void 0:t.id))),d(0)},[t,i]),b.useEffect(()=>{if(!o||h)return;const w=setTimeout(()=>{c<o.updates.length-1?d(T=>T+1):e()},5e3);return()=>clearTimeout(w)},[c,o,h,e]),!t||!o)return null;const p=o.updates[c],g=(w,T)=>{w.stopPropagation(),T==="next"?c<o.updates.length-1?d(C=>C+1):e():c>0&&d(C=>C-1)};return l.jsxs("div",{className:"fixed inset-0 bg-black/90 z-50 flex flex-col items-center justify-center",onMouseDown:()=>f(!0),onMouseUp:()=>f(!1),onMouseLeave:()=>f(!1),children:[l.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex flex-col z-10",children:[l.jsx("div",{className:"flex space-x-1 mb-2",children:o.updates.map((w,T)=>l.jsx("div",{className:"h-1 flex-1 bg-white/30 rounded-full",children:l.jsx("div",{className:"h-full bg-white rounded-full",style:{width:`${T<c?100:T===c?h?0:100:0}%`,transition:T===c&&!h?"width 5s linear":"none"}})},w.id))}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("img",{src:t.avatar,alt:t.name,className:"h-10 w-10 rounded-full"}),l.jsx("p",{className:"text-white font-semibold",children:t.name})]}),l.jsx("button",{onClick:e,className:"text-white",children:l.jsx(Nr,{className:"h-6 w-6"})})]})]}),l.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[l.jsx("div",{className:"absolute left-0 top-0 h-full w-1/2",onClick:w=>g(w,"prev")}),l.jsx("div",{className:"absolute right-0 top-0 h-full w-1/2",onClick:w=>g(w,"next")}),p.type==="image"?l.jsx("img",{src:p.url,alt:p.caption,className:"max-h-[80vh] max-w-[95vw] object-contain rounded-lg"}):l.jsx("video",{src:p.url,controls:!0,autoPlay:!0,className:"max-h-[80vh] max-w-[95vw] object-contain rounded-lg"}),p.caption&&l.jsx("p",{className:"absolute bottom-20 text-white bg-black/50 p-2 rounded",children:p.caption})]}),l.jsx("div",{className:"absolute bottom-4 flex space-x-2 bg-[#2a3942] p-2 rounded-full shadow-lg",children:Iz.map(w=>l.jsx("button",{onClick:()=>s(t.id,p.id,w),className:"text-2xl hover:scale-125 transition-transform",children:w},w))})]})},Cz=()=>{const{currentUser:t,loading:e,userProfile:n}=$s(),{activeCall:r,themeSettings:s,activeStatusUser:i,loading:o,currentUser:a,error:c}=Te(),h=hr().pathname.startsWith("/call/");if(e)return console.log(" Auth is loading..."),l.jsxs("div",{className:"bg-[#111b21] h-screen w-screen flex flex-col items-center justify-center text-white",children:[l.jsx("img",{src:"https://static.whatsapp.net/rsrc.php/v3/y7/r/_DSx_SM7ITE.png",alt:"WhatsApp Logo",className:"w-24 h-24 mb-4"}),l.jsx("p",{className:"text-lg",children:"Connecting..."}),l.jsx("div",{className:"mt-4 w-48 h-1 bg-gray-700 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-primary animate-pulse w-full"})})]});const f=`theme-${s.themeColor.name}`,p=s.uiStyle==="glossy"?"glossy":"",g=s.animationsEnabled?"":"no-animations",w=`font-size-${s.fontSize}`;return l.jsxs("div",{className:`bg-[#111b21] text-gray-300 h-screen w-screen overflow-hidden ${f} ${p} ${g} ${w}`,children:[l.jsxs(GR,{children:[l.jsx(Je,{path:"/auth",element:l.jsx(mz,{})}),l.jsxs(Je,{path:"/",element:l.jsx(on,{children:l.jsx(q7,{})}),children:[l.jsx(Je,{index:!0,element:l.jsx(qk,{})}),l.jsx(Je,{path:"chat/:id",element:l.jsx(Sz,{})}),l.jsx(Je,{path:"status",element:l.jsx(Kk,{})}),l.jsx(Je,{path:"calls",element:l.jsx(Gk,{})}),l.jsx(Je,{path:"activity",element:l.jsx(yz,{})}),l.jsx(Je,{path:"follow-requests",element:l.jsx(gz,{})})]}),l.jsx(Je,{path:"/settings",element:l.jsx(on,{children:l.jsx(Q7,{})})}),l.jsx(Je,{path:"/settings/profile",element:l.jsx(on,{children:l.jsx(Y7,{})})}),l.jsx(Je,{path:"/settings/privacy",element:l.jsx(on,{children:l.jsx(X7,{})})}),l.jsx(Je,{path:"/settings/account",element:l.jsx(on,{children:l.jsx(Z7,{})})}),l.jsx(Je,{path:"/settings/chats",element:l.jsx(on,{children:l.jsx(nz,{})})}),l.jsx(Je,{path:"/settings/notifications",element:l.jsx(on,{children:l.jsx(rz,{})})}),l.jsx(Je,{path:"/settings/storage",element:l.jsx(on,{children:l.jsx(sz,{})})}),l.jsx(Je,{path:"/settings/help",element:l.jsx(on,{children:l.jsx(iz,{})})}),l.jsx(Je,{path:"/settings/passcode-manager",element:l.jsx(on,{children:l.jsx(hz,{})})}),l.jsx(Je,{path:"/new-chat",element:l.jsx(on,{children:l.jsx(az,{})})}),l.jsx(Je,{path:"/contact-info/:id",element:l.jsx(on,{children:l.jsx(Ez,{})})}),l.jsx(Je,{path:"/call/:id",element:l.jsx(on,{children:l.jsx(lz,{})})})]}),r&&!h&&l.jsx(cz,{}),l.jsx(uz,{}),i&&l.jsx(bz,{})]})};function kz(){return l.jsx(n4,{children:l.jsx(z6,{children:l.jsx($6,{children:l.jsx(jF,{children:l.jsx(Cz,{})})})})})}"serviceWorker"in navigator&&navigator.serviceWorker.register("/firebase-messaging-sw.js").then(t=>{console.log("Service Worker registered successfully:",t)}).catch(t=>{console.error("Service Worker registration failed:",t)});const oN=document.getElementById("root");if(!oN)throw new Error("Could not find root element to mount to");const Nz=pp.createRoot(oN);Nz.render(l.jsx(Vd.StrictMode,{children:l.jsx(kz,{})}));
